var sc=Object.defineProperty;var ac=(t,e,n)=>e in t?sc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ce=(t,e,n)=>(ac(t,typeof e!="symbol"?e+"":e,n),n);import{u as ic,a as lc,r as p,c as cc,b as Ot,m as ke,f as ee,j as w,d as oi,e as Z,B as je,g as uc,h as de,o as Ge,i as hn,k as Ze,I as dc,l as Hn,n as po,p as he,q as Ar,s as fc,t as hc,v as pc,w as mc,x as Zr,y as vc,z as yc,A as gc,C as wc,D as bs,E as si,F as xs,G as ai,H as bc,J as xc,K as Cc,P as ii,_ as qn,L as Gn,M as li,N as ci,O as $e,Q as vr,R as _t,S as ie,T as la,U as _c,V as An,W as eo,X as mo,Y as ca,Z as Ec,$ as kc,a0 as Sc,a1 as Oc,a2 as Ic,a3 as Pc,a4 as Oe,a5 as Nc,a6 as ui,a7 as Dc,a8 as to,a9 as Ke,aa as jc,ab as tt,ac as qe,ad as Ac,ae as tn,af as Tc,ag as Fc,ah as Mc,ai as Rc,aj as Lc,ak as Bc,al as Wc,am as $c,an as Cs,ao as _s,ap as Es,aq as di,ar as ks,as as Ss,at as fi,au as Os,av as Kc}from"./input.js";import{app as we}from"/scripts/app.js";import{api as Uc}from"/scripts/api.js";function zc(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function hi(t){var e;return zc(t)&&(e=t.ownerDocument)!=null?e:document}function Vc(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Hc=Vc();function qc(t){const e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function pi(t){const{theme:e}=ic(),n=lc();return p.useMemo(()=>cc(e.direction,{...n,...t}),[t,e.direction,n])}var Gc=Object.defineProperty,Yc=(t,e,n)=>e in t?Gc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ue=(t,e,n)=>(Yc(t,typeof e!="symbol"?e+"":e,n),n);function ua(t){return t.sort((e,n)=>{const r=e.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var Jc=t=>typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE;function da(t,e,n){let r=t+1;return n&&r>=e&&(r=0),r}function fa(t,e,n){let r=t-1;return n&&r<0&&(r=e),r}var Do=typeof window<"u"?p.useLayoutEffect:p.useEffect,Tr=t=>t,Xc=class{constructor(){ue(this,"descendants",new Map),ue(this,"register",t=>{if(t!=null)return Jc(t)?this.registerNode(t):e=>{this.registerNode(e,t)}}),ue(this,"unregister",t=>{this.descendants.delete(t);const e=ua(Array.from(this.descendants.keys()));this.assignIndex(e)}),ue(this,"destroy",()=>{this.descendants.clear()}),ue(this,"assignIndex",t=>{this.descendants.forEach(e=>{const n=t.indexOf(e.node);e.index=n,e.node.dataset.index=e.index.toString()})}),ue(this,"count",()=>this.descendants.size),ue(this,"enabledCount",()=>this.enabledValues().length),ue(this,"values",()=>Array.from(this.descendants.values()).sort((e,n)=>e.index-n.index)),ue(this,"enabledValues",()=>this.values().filter(t=>!t.disabled)),ue(this,"item",t=>{if(this.count()!==0)return this.values()[t]}),ue(this,"enabledItem",t=>{if(this.enabledCount()!==0)return this.enabledValues()[t]}),ue(this,"first",()=>this.item(0)),ue(this,"firstEnabled",()=>this.enabledItem(0)),ue(this,"last",()=>this.item(this.descendants.size-1)),ue(this,"lastEnabled",()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)}),ue(this,"indexOf",t=>{var e,n;return t&&(n=(e=this.descendants.get(t))==null?void 0:e.index)!=null?n:-1}),ue(this,"enabledIndexOf",t=>t==null?-1:this.enabledValues().findIndex(e=>e.node.isSameNode(t))),ue(this,"next",(t,e=!0)=>{const n=da(t,this.count(),e);return this.item(n)}),ue(this,"nextEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const r=this.enabledIndexOf(n.node),o=da(r,this.enabledCount(),e);return this.enabledItem(o)}),ue(this,"prev",(t,e=!0)=>{const n=fa(t,this.count()-1,e);return this.item(n)}),ue(this,"prevEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const r=this.enabledIndexOf(n.node),o=fa(r,this.enabledCount()-1,e);return this.enabledItem(o)}),ue(this,"registerNode",(t,e)=>{if(!t||this.descendants.has(t))return;const n=Array.from(this.descendants.keys()).concat(t),r=ua(n);e!=null&&e.disabled&&(e.disabled=!!e.disabled);const o={node:t,index:-1,...e};this.descendants.set(t,o),this.assignIndex(r)})}};function Qc(){const t=p.useRef(new Xc);return Do(()=>()=>t.current.destroy()),t.current}var[Zc,mi]=Ot({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function eu(t){const e=mi(),[n,r]=p.useState(-1),o=p.useRef(null);Do(()=>()=>{o.current&&e.unregister(o.current)},[]),Do(()=>{if(!o.current)return;const a=Number(o.current.dataset.index);n!=a&&!Number.isNaN(a)&&r(a)});const s=Tr(t?e.register(t):e.register);return{descendants:e,index:n,enabledIndex:e.enabledIndexOf(o.current),register:ke(s,o)}}function tu(){return[Tr(Zc),()=>Tr(mi()),()=>Qc(),o=>eu(o)]}var jo=ee(function(e,n){const{htmlWidth:r,htmlHeight:o,alt:s,...a}=e;return w.jsx("img",{width:r,height:o,ref:n,alt:s,...a})});jo.displayName="NativeImage";function nu(t){const{loading:e,src:n,srcSet:r,onLoad:o,onError:s,crossOrigin:a,sizes:i,ignoreFallback:l}=t,[u,c]=p.useState("pending");p.useEffect(()=>{c(n?"loading":"pending")},[n]);const d=p.useRef(),f=p.useCallback(()=>{if(!n)return;h();const g=new Image;g.src=n,a&&(g.crossOrigin=a),r&&(g.srcset=r),i&&(g.sizes=i),e&&(g.loading=e),g.onload=m=>{h(),c("loaded"),o==null||o(m)},g.onerror=m=>{h(),c("failed"),s==null||s(m)},d.current=g},[n,a,r,i,o,s,e]),h=()=>{d.current&&(d.current.onload=null,d.current.onerror=null,d.current=null)};return oi(()=>{if(!l)return u==="loading"&&f(),()=>{h()}},[u,f,l]),l?"loaded":u}var ru=(t,e)=>t!=="loaded"&&e==="beforeLoadOrError"||t==="failed"&&e==="onError";function ou(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}var vi=ee(function(e,n){const{fallbackSrc:r,fallback:o,src:s,srcSet:a,align:i,fit:l,loading:u,ignoreFallback:c,crossOrigin:d,fallbackStrategy:f="beforeLoadOrError",referrerPolicy:h,...g}=e,m=r!==void 0||o!==void 0,v=u!=null||c||!m,x=nu({...e,crossOrigin:d,ignoreFallback:v}),b=ru(x,f),k={ref:n,objectFit:l,objectPosition:i,...v?g:ou(g,["onError","onLoad"])};return b?o||w.jsx(Z.img,{as:jo,className:"chakra-image__placeholder",src:r,...k}):w.jsx(Z.img,{as:jo,src:s,srcSet:a,crossOrigin:d,loading:u,referrerPolicy:h,className:"chakra-image",...k})});vi.displayName="Image";function su(t){return p.Children.toArray(t).filter(e=>p.isValidElement(e))}var Yn=ee((t,e)=>{const{icon:n,children:r,isRound:o,"aria-label":s,...a}=t,i=n||r,l=p.isValidElement(i)?p.cloneElement(i,{"aria-hidden":!0,focusable:!1}):null;return w.jsx(je,{padding:"0",borderRadius:o?"full":void 0,ref:e,"aria-label":s,...a,children:l})});Yn.displayName="IconButton";var[au,yi]=uc("Card"),gi=ee(function(e,n){const{className:r,...o}=e,s=yi();return w.jsx(Z.div,{ref:n,className:de("chakra-card__body",r),__css:s.body,...o})}),wi=ee(function(e,n){const{className:r,...o}=e,s=yi();return w.jsx(Z.div,{ref:n,className:de("chakra-card__header",r),__css:s.header,...o})}),bi=ee(function(e,n){const{className:r,children:o,direction:s="column",justify:a,align:i,...l}=Ge(e),u=hn("Card",e);return w.jsx(Z.div,{ref:n,className:de("chakra-card",r),__css:{display:"flex",flexDirection:s,justifyContent:a,alignItems:i,position:"relative",minWidth:0,wordWrap:"break-word",...u.container},...l,children:w.jsx(au,{value:u,children:o})})}),[iu,xi]=Ot({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[lu,pn]=Ot({strict:!1,name:"FormControlContext"});function cu(t){const{id:e,isRequired:n,isInvalid:r,isDisabled:o,isReadOnly:s,...a}=t,i=p.useId(),l=e||`field-${i}`,u=`${l}-label`,c=`${l}-feedback`,d=`${l}-helptext`,[f,h]=p.useState(!1),[g,m]=p.useState(!1),[v,x]=p.useState(!1),b=p.useCallback((_={},N=null)=>({id:d,..._,ref:ke(N,S=>{S&&m(!0)})}),[d]),k=p.useCallback((_={},N=null)=>({..._,ref:N,"data-focus":Ze(v),"data-disabled":Ze(o),"data-invalid":Ze(r),"data-readonly":Ze(s),id:_.id!==void 0?_.id:u,htmlFor:_.htmlFor!==void 0?_.htmlFor:l}),[l,o,v,r,s,u]),O=p.useCallback((_={},N=null)=>({id:c,..._,ref:ke(N,S=>{S&&h(!0)}),"aria-live":"polite"}),[c]),I=p.useCallback((_={},N=null)=>({..._,...a,ref:N,role:"group","data-focus":Ze(v),"data-disabled":Ze(o),"data-invalid":Ze(r),"data-readonly":Ze(s)}),[a,o,v,r,s]),E=p.useCallback((_={},N=null)=>({..._,ref:N,role:"presentation","aria-hidden":!0,children:_.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!s,isDisabled:!!o,isFocused:!!v,onFocus:()=>x(!0),onBlur:()=>x(!1),hasFeedbackText:f,setHasFeedbackText:h,hasHelpText:g,setHasHelpText:m,id:l,labelId:u,feedbackId:c,helpTextId:d,htmlProps:a,getHelpTextProps:b,getErrorMessageProps:O,getRootProps:I,getLabelProps:k,getRequiredIndicatorProps:E}}var Is=ee(function(e,n){const r=hn("Form",e),o=Ge(e),{getRootProps:s,htmlProps:a,...i}=cu(o),l=de("chakra-form-control",e.className);return w.jsx(lu,{value:i,children:w.jsx(iu,{value:r,children:w.jsx(Z.div,{...s({},n),className:l,__css:r.container})})})});Is.displayName="FormControl";var uu=ee(function(e,n){const r=pn(),o=xi(),s=de("chakra-form__helper-text",e.className);return w.jsx(Z.div,{...r==null?void 0:r.getHelpTextProps(e,n),__css:o.helperText,className:s})});uu.displayName="FormHelperText";var[du,fu]=Ot({name:"FormErrorStylesContext",errorMessage:`useFormErrorStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormError />" `}),Ps=ee((t,e)=>{const n=hn("FormError",t),r=Ge(t),o=pn();return o!=null&&o.isInvalid?w.jsx(du,{value:n,children:w.jsx(Z.div,{...o==null?void 0:o.getErrorMessageProps(r,e),className:de("chakra-form__error-message",t.className),__css:{display:"flex",alignItems:"center",...n.text}})}):null});Ps.displayName="FormErrorMessage";var hu=ee((t,e)=>{const n=fu(),r=pn();if(!(r!=null&&r.isInvalid))return null;const o=de("chakra-form__error-icon",t.className);return w.jsx(dc,{ref:e,"aria-hidden":!0,...t,__css:n.icon,className:o,children:w.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})});hu.displayName="FormErrorIcon";var Ns=ee(function(e,n){var r;const o=Hn("FormLabel",e),s=Ge(e),{className:a,children:i,requiredIndicator:l=w.jsx(Ci,{}),optionalIndicator:u=null,...c}=s,d=pn(),f=(r=d==null?void 0:d.getLabelProps(c,n))!=null?r:{ref:n,...c};return w.jsxs(Z.label,{...f,className:de("chakra-form__label",s.className),__css:{display:"block",textAlign:"start",...o},children:[i,d!=null&&d.isRequired?l:u]})});Ns.displayName="FormLabel";var Ci=ee(function(e,n){const r=pn(),o=xi();if(!(r!=null&&r.isRequired))return null;const s=de("chakra-form__required-indicator",e.className);return w.jsx(Z.span,{...r==null?void 0:r.getRequiredIndicatorProps(e,n),__css:o.requiredIndicator,className:s})});Ci.displayName="RequiredIndicator";function pu(t){const{isDisabled:e,isInvalid:n,isReadOnly:r,isRequired:o,...s}=mu(t);return{...s,disabled:e,readOnly:r,required:o,"aria-invalid":po(n),"aria-required":po(o),"aria-readonly":po(r)}}function mu(t){var e,n,r;const o=pn(),{id:s,disabled:a,readOnly:i,required:l,isRequired:u,isInvalid:c,isReadOnly:d,isDisabled:f,onFocus:h,onBlur:g,...m}=t,v=t["aria-describedby"]?[t["aria-describedby"]]:[];return o!=null&&o.hasFeedbackText&&(o!=null&&o.isInvalid)&&v.push(o.feedbackId),o!=null&&o.hasHelpText&&v.push(o.helpTextId),{...m,"aria-describedby":v.join(" ")||void 0,id:s??(o==null?void 0:o.id),isDisabled:(e=a??f)!=null?e:o==null?void 0:o.isDisabled,isReadOnly:(n=i??d)!=null?n:o==null?void 0:o.isReadOnly,isRequired:(r=l??u)!=null?r:o==null?void 0:o.isRequired,isInvalid:c??(o==null?void 0:o.isInvalid),onFocus:he(o==null?void 0:o.onFocus,h),onBlur:he(o==null?void 0:o.onBlur,g)}}function nn(t,e,n,r){const o=Ar(n);return p.useEffect(()=>{const s=typeof t=="function"?t():t??document;if(!(!n||!s))return s.addEventListener(e,o,r),()=>{s.removeEventListener(e,o,r)}},[e,t,r,o,n]),()=>{const s=typeof t=="function"?t():t??document;s==null||s.removeEventListener(e,o,r)}}function vu(t){return"current"in t}var _i=()=>typeof window<"u";function yu(){var t;const e=navigator.userAgentData;return(t=e==null?void 0:e.platform)!=null?t:navigator.platform}var gu=t=>_i()&&t.test(navigator.vendor),wu=t=>_i()&&t.test(yu()),bu=()=>wu(/mac|iphone|ipad|ipod/i),xu=()=>bu()&&gu(/apple/i);function Cu(t){const{ref:e,elements:n,enabled:r}=t,o=()=>{var s,a;return(a=(s=e.current)==null?void 0:s.ownerDocument)!=null?a:document};nn(o,"pointerdown",s=>{if(!xu()||!r)return;const a=s.target,l=(n??[e]).some(u=>{const c=vu(u)?u.current:u;return(c==null?void 0:c.contains(a))||c===a});o().activeElement!==a&&l&&(s.preventDefault(),a.focus())})}var Ei={exports:{}},_u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Eu=_u,ku=Eu;function ki(){}function Si(){}Si.resetWarningCache=ki;var Su=function(){function t(r,o,s,a,i,l){if(l!==ku){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Si,resetWarningCache:ki};return n.PropTypes=n,n};Ei.exports=Su();var Ou=Ei.exports;const Pt=fc(Ou);function Iu(t){const e=t.ownerDocument.defaultView||window,{overflow:n,overflowX:r,overflowY:o}=e.getComputedStyle(t);return/auto|scroll|overlay|hidden/.test(n+o+r)}function Pu(t){return t.localName==="html"?t:t.assignedSlot||t.parentElement||t.ownerDocument.documentElement}function Oi(t){return["html","body","#document"].includes(t.localName)?t.ownerDocument.body:hc(t)&&Iu(t)?t:Oi(Pu(t))}var Nu=Hc?p.useLayoutEffect:p.useEffect;function Ao(t,e=[]){const n=p.useRef(t);return Nu(()=>{n.current=t}),p.useCallback((...r)=>{var o;return(o=n.current)==null?void 0:o.call(n,...r)},e)}function Du(t){const{ref:e,handler:n,enabled:r=!0}=t,o=Ao(n),a=p.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;p.useEffect(()=>{if(!r)return;const i=d=>{vo(d,e)&&(a.isPointerDown=!0)},l=d=>{if(a.ignoreEmulatedMouseEvents){a.ignoreEmulatedMouseEvents=!1;return}a.isPointerDown&&n&&vo(d,e)&&(a.isPointerDown=!1,o(d))},u=d=>{a.ignoreEmulatedMouseEvents=!0,n&&a.isPointerDown&&vo(d,e)&&(a.isPointerDown=!1,o(d))},c=hi(e.current);return c.addEventListener("mousedown",i,!0),c.addEventListener("mouseup",l,!0),c.addEventListener("touchstart",i,!0),c.addEventListener("touchend",u,!0),()=>{c.removeEventListener("mousedown",i,!0),c.removeEventListener("mouseup",l,!0),c.removeEventListener("touchstart",i,!0),c.removeEventListener("touchend",u,!0)}},[n,e,o,a,r])}function vo(t,e){var n;const r=t.target;return r&&!hi(r).contains(r)?!1:!((n=e.current)!=null&&n.contains(r))}function ju(t,e){const n=p.useId();return p.useMemo(()=>t||[e,n].filter(Boolean).join("-"),[t,e,n])}function Au(t,e){const n=t!==void 0;return[n,n&&typeof t<"u"?t:e]}function Ds(t={}){const{onClose:e,onOpen:n,isOpen:r,id:o}=t,s=Ao(n),a=Ao(e),[i,l]=p.useState(t.defaultIsOpen||!1),[u,c]=Au(r,i),d=ju(o,"disclosure"),f=p.useCallback(()=>{u||l(!1),a==null||a()},[u,a]),h=p.useCallback(()=>{u||l(!0),s==null||s()},[u,s]),g=p.useCallback(()=>{(c?f:h)()},[c,h,f]);return{isOpen:!!c,onOpen:h,onClose:f,onToggle:g,isControlled:u,getButtonProps:(m={})=>({...m,"aria-expanded":c,"aria-controls":d,onClick:pc(m.onClick,g)}),getDisclosureProps:(m={})=>({...m,hidden:!c,id:d})}}var no=ee(function(e,n){const{htmlSize:r,...o}=e,s=hn("Input",o),a=Ge(o),i=pu(a),l=de("chakra-input",e.className);return w.jsx(Z.input,{size:r,...i,__css:s.field,ref:n,className:l})});no.displayName="Input";no.id="Input";function Tu(t,e){return Array.isArray(t)?t.map(n=>n===null?null:e(n)):mc(t)?Object.keys(t).reduce((n,r)=>(n[r]=e(t[r]),n),{}):t!=null?e(t):null}var rt=ee(function(e,n){const r=Hn("Text",e),{className:o,align:s,decoration:a,casing:i,...l}=Ge(e),u=qc({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return w.jsx(Z.p,{ref:n,className:de("chakra-text",e.className),...u,...l,__css:r})});rt.displayName="Text";var js=t=>w.jsx(Z.div,{className:"chakra-stack__divider",...t,__css:{...t.__css,borderWidth:0,alignSelf:"stretch",borderColor:"inherit",width:"auto",height:"auto"}});js.displayName="StackDivider";var Ii=t=>w.jsx(Z.div,{className:"chakra-stack__item",...t,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...t.__css}});Ii.displayName="StackItem";function Fu(t){const{spacing:e,direction:n}=t,r={column:{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":Tu(n,o=>r[o])}}var an=ee((t,e)=>{const{isInline:n,direction:r,align:o,justify:s,spacing:a="0.5rem",wrap:i,children:l,divider:u,className:c,shouldWrapChildren:d,...f}=t,h=n?"row":r??"column",g=p.useMemo(()=>Fu({spacing:a,direction:h}),[a,h]),m=!!u,v=!d&&!m,x=p.useMemo(()=>{const k=su(l);return v?k:k.map((O,I)=>{const E=typeof O.key<"u"?O.key:I,_=I+1===k.length,S=d?w.jsx(Ii,{children:O},E):O;if(!m)return S;const D=p.cloneElement(u,{__css:g}),j=_?null:D;return w.jsxs(p.Fragment,{children:[S,j]},E)})},[u,g,m,v,d,l]),b=de("chakra-stack",c);return w.jsx(Z.div,{ref:e,display:"flex",alignItems:o,justifyContent:s,flexDirection:h,flexWrap:i,gap:m?void 0:a,className:b,...f,children:x})});an.displayName="Stack";var jt=ee((t,e)=>w.jsx(an,{align:"center",...t,direction:"row",ref:e}));jt.displayName="HStack";var As=ee(function(e,n){const r=Hn("Heading",e),{className:o,...s}=Ge(e);return w.jsx(Z.h2,{ref:n,className:de("chakra-heading",e.className),...s,__css:r})});As.displayName="Heading";var Ct=Z("div");Ct.displayName="Box";var Pi=ee(function(e,n){const{size:r,centerContent:o=!0,...s}=e,a=o?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return w.jsx(Ct,{ref:n,boxSize:r,__css:{...a,flexShrink:0,flexGrow:0},...s})});Pi.displayName="Square";var Mu=ee(function(e,n){const{size:r,...o}=e;return w.jsx(Pi,{size:r,ref:n,borderRadius:"9999px",...o})});Mu.displayName="Circle";var yr=ee(function(e,n){const r=Hn("Badge",e),{className:o,...s}=Ge(e);return w.jsx(Z.span,{ref:n,className:de("chakra-badge",e.className),...s,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...r}})});yr.displayName="Badge";var Mt=ee(function(e,n){const{direction:r,align:o,justify:s,wrap:a,basis:i,grow:l,shrink:u,...c}=e,d={display:"flex",flexDirection:r,alignItems:o,justifyContent:s,flexWrap:a,flexBasis:i,flexGrow:l,flexShrink:u};return w.jsx(Z.div,{ref:n,__css:d,...c})});Mt.displayName="Flex";function Ru(t){const{key:e}=t;return e.length===1||e.length>1&&/[^a-zA-Z0-9]/.test(e)}function Lu(t={}){const{timeout:e=300,preventDefault:n=()=>!0}=t,[r,o]=p.useState([]),s=p.useRef(),a=()=>{s.current&&(clearTimeout(s.current),s.current=null)},i=()=>{a(),s.current=setTimeout(()=>{o([]),s.current=null},e)};p.useEffect(()=>a,[]);function l(u){return c=>{if(c.key==="Backspace"){const d=[...r];d.pop(),o(d);return}if(Ru(c)){const d=r.concat(c.key);n(c)&&(c.preventDefault(),c.stopPropagation()),o(d),u(d.join("")),i()}}}return l}function Bu(t,e,n,r){if(e==null)return r;if(!r)return t.find(a=>n(a).toLowerCase().startsWith(e.toLowerCase()));const o=t.filter(s=>n(s).toLowerCase().startsWith(e.toLowerCase()));if(o.length>0){let s;return o.includes(r)?(s=o.indexOf(r)+1,s===o.length&&(s=0),o[s]):(s=t.indexOf(o[0]),t[s])}return r}function Wu(){const t=p.useRef(new Map),e=t.current,n=p.useCallback((o,s,a,i)=>{t.current.set(a,{type:s,el:o,options:i}),o.addEventListener(s,a,i)},[]),r=p.useCallback((o,s,a,i)=>{o.removeEventListener(s,a,i),t.current.delete(a)},[]);return p.useEffect(()=>()=>{e.forEach((o,s)=>{r(o.el,o.type,s,o.options)})},[r,e]),{add:n,remove:r}}function yo(t){const e=t.target,{tagName:n,isContentEditable:r}=e;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function $u(t={}){const{ref:e,isDisabled:n,isFocusable:r,clickOnEnter:o=!0,clickOnSpace:s=!0,onMouseDown:a,onMouseUp:i,onClick:l,onKeyDown:u,onKeyUp:c,tabIndex:d,onMouseOver:f,onMouseLeave:h,...g}=t,[m,v]=p.useState(!0),[x,b]=p.useState(!1),k=Wu(),O=y=>{y&&y.tagName!=="BUTTON"&&v(!1)},I=m?d:d||0,E=n&&!r,_=p.useCallback(y=>{if(n){y.stopPropagation(),y.preventDefault();return}y.currentTarget.focus(),l==null||l(y)},[n,l]),N=p.useCallback(y=>{x&&yo(y)&&(y.preventDefault(),y.stopPropagation(),b(!1),k.remove(document,"keyup",N,!1))},[x,k]),S=p.useCallback(y=>{if(u==null||u(y),n||y.defaultPrevented||y.metaKey||!yo(y.nativeEvent)||m)return;const P=o&&y.key==="Enter";s&&y.key===" "&&(y.preventDefault(),b(!0)),P&&(y.preventDefault(),y.currentTarget.click()),k.add(document,"keyup",N,!1)},[n,m,u,o,s,k,N]),D=p.useCallback(y=>{if(c==null||c(y),n||y.defaultPrevented||y.metaKey||!yo(y.nativeEvent)||m)return;s&&y.key===" "&&(y.preventDefault(),b(!1),y.currentTarget.click())},[s,m,n,c]),j=p.useCallback(y=>{y.button===0&&(b(!1),k.remove(document,"mouseup",j,!1))},[k]),$=p.useCallback(y=>{if(y.button!==0)return;if(n){y.stopPropagation(),y.preventDefault();return}m||b(!0),y.currentTarget.focus({preventScroll:!0}),k.add(document,"mouseup",j,!1),a==null||a(y)},[n,m,a,k,j]),L=p.useCallback(y=>{y.button===0&&(m||b(!1),i==null||i(y))},[i,m]),B=p.useCallback(y=>{if(n){y.preventDefault();return}f==null||f(y)},[n,f]),X=p.useCallback(y=>{x&&(y.preventDefault(),b(!1)),h==null||h(y)},[x,h]),C=ke(e,O);return m?{...g,ref:C,type:"button","aria-disabled":E?void 0:n,disabled:E,onClick:_,onMouseDown:a,onMouseUp:i,onKeyUp:c,onKeyDown:u,onMouseOver:f,onMouseLeave:h}:{...g,ref:C,role:"button","data-active":Ze(x),"aria-disabled":n?"true":void 0,tabIndex:E?void 0:I,onClick:_,onMouseDown:$,onMouseUp:L,onKeyUp:D,onKeyDown:S,onMouseOver:B,onMouseLeave:X}}function Ku(t){const e=t.current;if(!e)return!1;const n=yc(e);return!n||e.contains(n)?!1:!!gc(n)}function Ni(t,e){const{shouldFocus:n,visible:r,focusRef:o}=e,s=n&&!r;Zr(()=>{if(!s||Ku(t))return;const a=(o==null?void 0:o.current)||t.current;let i;if(a)return i=requestAnimationFrame(()=>{a.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(i)}},[s,t,o])}var Uu={preventScroll:!0,shouldFocus:!1};function zu(t,e=Uu){const{focusRef:n,preventScroll:r,shouldFocus:o,visible:s}=e,a=Vu(t)?t.current:t,i=o&&s,l=p.useRef(i),u=p.useRef(s);oi(()=>{!u.current&&s&&(l.current=i),u.current=s},[s,i]);const c=p.useCallback(()=>{if(!(!s||!a||!l.current)&&(l.current=!1,!a.contains(document.activeElement)))if(n!=null&&n.current)requestAnimationFrame(()=>{var d;(d=n.current)==null||d.focus({preventScroll:r})});else{const d=vc(a);d.length>0&&requestAnimationFrame(()=>{d[0].focus({preventScroll:r})})}},[s,r,a,n]);Zr(()=>{c()},[c]),nn(a,"transitionend",c)}function Vu(t){return"current"in t}var Jt=(t,e)=>({var:t,varRef:e?`var(${t}, ${e})`:`var(${t})`}),pe={arrowShadowColor:Jt("--popper-arrow-shadow-color"),arrowSize:Jt("--popper-arrow-size","8px"),arrowSizeHalf:Jt("--popper-arrow-size-half"),arrowBg:Jt("--popper-arrow-bg"),transformOrigin:Jt("--popper-transform-origin"),arrowOffset:Jt("--popper-arrow-offset")};function Hu(t){if(t.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}var qu={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},Gu=t=>qu[t],ha={scroll:!0,resize:!0};function Yu(t){let e;return typeof t=="object"?e={enabled:!0,options:{...ha,...t}}:e={enabled:t,options:ha},e}var Ju={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:t})=>{t.styles.popper.width=`${t.rects.reference.width}px`},effect:({state:t})=>()=>{const e=t.elements.reference;t.elements.popper.style.width=`${e.offsetWidth}px`}},Xu={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:t})=>{pa(t)},effect:({state:t})=>()=>{pa(t)}},pa=t=>{t.elements.popper.style.setProperty(pe.transformOrigin.var,Gu(t.placement))},Qu={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:t})=>{Zu(t)}},Zu=t=>{var e;if(!t.placement)return;const n=ed(t.placement);if((e=t.elements)!=null&&e.arrow&&n){Object.assign(t.elements.arrow.style,{[n.property]:n.value,width:pe.arrowSize.varRef,height:pe.arrowSize.varRef,zIndex:-1});const r={[pe.arrowSizeHalf.var]:`calc(${pe.arrowSize.varRef} / 2 - 1px)`,[pe.arrowOffset.var]:`calc(${pe.arrowSizeHalf.varRef} * -1)`};for(const o in r)t.elements.arrow.style.setProperty(o,r[o])}},ed=t=>{if(t.startsWith("top"))return{property:"bottom",value:pe.arrowOffset.varRef};if(t.startsWith("bottom"))return{property:"top",value:pe.arrowOffset.varRef};if(t.startsWith("left"))return{property:"right",value:pe.arrowOffset.varRef};if(t.startsWith("right"))return{property:"left",value:pe.arrowOffset.varRef}},td={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:t})=>{ma(t)},effect:({state:t})=>()=>{ma(t)}},ma=t=>{if(!t.elements.arrow)return;const e=t.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!e)return;const n=Hu(t.placement);n&&e.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(e.style,{transform:"rotate(45deg)",background:pe.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},nd={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},rd={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function od(t,e="ltr"){var n,r;const o=((n=nd[t])==null?void 0:n[e])||t;return e==="ltr"?o:(r=rd[t])!=null?r:o}var Pe="top",ze="bottom",Ve="right",Ne="left",Ts="auto",Jn=[Pe,ze,Ve,Ne],ln="start",Tn="end",sd="clippingParents",Di="viewport",bn="popper",ad="reference",va=Jn.reduce(function(t,e){return t.concat([e+"-"+ln,e+"-"+Tn])},[]),ji=[].concat(Jn,[Ts]).reduce(function(t,e){return t.concat([e,e+"-"+ln,e+"-"+Tn])},[]),id="beforeRead",ld="read",cd="afterRead",ud="beforeMain",dd="main",fd="afterMain",hd="beforeWrite",pd="write",md="afterWrite",vd=[id,ld,cd,ud,dd,fd,hd,pd,md];function ot(t){return t?(t.nodeName||"").toLowerCase():null}function Fe(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function zt(t){var e=Fe(t).Element;return t instanceof e||t instanceof Element}function Ue(t){var e=Fe(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Fs(t){if(typeof ShadowRoot>"u")return!1;var e=Fe(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function yd(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},s=e.elements[n];!Ue(s)||!ot(s)||(Object.assign(s.style,r),Object.keys(o).forEach(function(a){var i=o[a];i===!1?s.removeAttribute(a):s.setAttribute(a,i===!0?"":i)}))})}function gd(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],s=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),i=a.reduce(function(l,u){return l[u]="",l},{});!Ue(o)||!ot(o)||(Object.assign(o.style,i),Object.keys(s).forEach(function(l){o.removeAttribute(l)}))})}}const wd={name:"applyStyles",enabled:!0,phase:"write",fn:yd,effect:gd,requires:["computeStyles"]};function nt(t){return t.split("-")[0]}var Rt=Math.max,Fr=Math.min,cn=Math.round;function To(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ai(){return!/^((?!chrome|android).)*safari/i.test(To())}function un(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,s=1;e&&Ue(t)&&(o=t.offsetWidth>0&&cn(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&cn(r.height)/t.offsetHeight||1);var a=zt(t)?Fe(t):window,i=a.visualViewport,l=!Ai()&&n,u=(r.left+(l&&i?i.offsetLeft:0))/o,c=(r.top+(l&&i?i.offsetTop:0))/s,d=r.width/o,f=r.height/s;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function Ms(t){var e=un(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Ti(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Fs(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ht(t){return Fe(t).getComputedStyle(t)}function bd(t){return["table","td","th"].indexOf(ot(t))>=0}function It(t){return((zt(t)?t.ownerDocument:t.document)||window.document).documentElement}function ro(t){return ot(t)==="html"?t:t.assignedSlot||t.parentNode||(Fs(t)?t.host:null)||It(t)}function ya(t){return!Ue(t)||ht(t).position==="fixed"?null:t.offsetParent}function xd(t){var e=/firefox/i.test(To()),n=/Trident/i.test(To());if(n&&Ue(t)){var r=ht(t);if(r.position==="fixed")return null}var o=ro(t);for(Fs(o)&&(o=o.host);Ue(o)&&["html","body"].indexOf(ot(o))<0;){var s=ht(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function Xn(t){for(var e=Fe(t),n=ya(t);n&&bd(n)&&ht(n).position==="static";)n=ya(n);return n&&(ot(n)==="html"||ot(n)==="body"&&ht(n).position==="static")?e:n||xd(t)||e}function Rs(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function kn(t,e,n){return Rt(t,Fr(e,n))}function Cd(t,e,n){var r=kn(t,e,n);return r>n?n:r}function Fi(){return{top:0,right:0,bottom:0,left:0}}function Mi(t){return Object.assign({},Fi(),t)}function Ri(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var _d=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Mi(typeof e!="number"?e:Ri(e,Jn))};function Ed(t){var e,n=t.state,r=t.name,o=t.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,i=nt(n.placement),l=Rs(i),u=[Ne,Ve].indexOf(i)>=0,c=u?"height":"width";if(!(!s||!a)){var d=_d(o.padding,n),f=Ms(s),h=l==="y"?Pe:Ne,g=l==="y"?ze:Ve,m=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],v=a[l]-n.rects.reference[l],x=Xn(s),b=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,k=m/2-v/2,O=d[h],I=b-f[c]-d[g],E=b/2-f[c]/2+k,_=kn(O,E,I),N=l;n.modifiersData[r]=(e={},e[N]=_,e.centerOffset=_-E,e)}}function kd(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||Ti(e.elements.popper,o)&&(e.elements.arrow=o))}const Sd={name:"arrow",enabled:!0,phase:"main",fn:Ed,effect:kd,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function dn(t){return t.split("-")[1]}var Od={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Id(t,e){var n=t.x,r=t.y,o=e.devicePixelRatio||1;return{x:cn(n*o)/o||0,y:cn(r*o)/o||0}}function ga(t){var e,n=t.popper,r=t.popperRect,o=t.placement,s=t.variation,a=t.offsets,i=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=a.x,h=f===void 0?0:f,g=a.y,m=g===void 0?0:g,v=typeof c=="function"?c({x:h,y:m}):{x:h,y:m};h=v.x,m=v.y;var x=a.hasOwnProperty("x"),b=a.hasOwnProperty("y"),k=Ne,O=Pe,I=window;if(u){var E=Xn(n),_="clientHeight",N="clientWidth";if(E===Fe(n)&&(E=It(n),ht(E).position!=="static"&&i==="absolute"&&(_="scrollHeight",N="scrollWidth")),E=E,o===Pe||(o===Ne||o===Ve)&&s===Tn){O=ze;var S=d&&E===I&&I.visualViewport?I.visualViewport.height:E[_];m-=S-r.height,m*=l?1:-1}if(o===Ne||(o===Pe||o===ze)&&s===Tn){k=Ve;var D=d&&E===I&&I.visualViewport?I.visualViewport.width:E[N];h-=D-r.width,h*=l?1:-1}}var j=Object.assign({position:i},u&&Od),$=c===!0?Id({x:h,y:m},Fe(n)):{x:h,y:m};if(h=$.x,m=$.y,l){var L;return Object.assign({},j,(L={},L[O]=b?"0":"",L[k]=x?"0":"",L.transform=(I.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",L))}return Object.assign({},j,(e={},e[O]=b?m+"px":"",e[k]=x?h+"px":"",e.transform="",e))}function Pd(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,s=n.adaptive,a=s===void 0?!0:s,i=n.roundOffsets,l=i===void 0?!0:i,u={placement:nt(e.placement),variation:dn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ga(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ga(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Nd={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Pd,data:{}};var ir={passive:!0};function Dd(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,s=o===void 0?!0:o,a=r.resize,i=a===void 0?!0:a,l=Fe(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",n.update,ir)}),i&&l.addEventListener("resize",n.update,ir),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",n.update,ir)}),i&&l.removeEventListener("resize",n.update,ir)}}const jd={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Dd,data:{}};var Ad={left:"right",right:"left",bottom:"top",top:"bottom"};function gr(t){return t.replace(/left|right|bottom|top/g,function(e){return Ad[e]})}var Td={start:"end",end:"start"};function wa(t){return t.replace(/start|end/g,function(e){return Td[e]})}function Ls(t){var e=Fe(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Bs(t){return un(It(t)).left+Ls(t).scrollLeft}function Fd(t,e){var n=Fe(t),r=It(t),o=n.visualViewport,s=r.clientWidth,a=r.clientHeight,i=0,l=0;if(o){s=o.width,a=o.height;var u=Ai();(u||!u&&e==="fixed")&&(i=o.offsetLeft,l=o.offsetTop)}return{width:s,height:a,x:i+Bs(t),y:l}}function Md(t){var e,n=It(t),r=Ls(t),o=(e=t.ownerDocument)==null?void 0:e.body,s=Rt(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=Rt(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),i=-r.scrollLeft+Bs(t),l=-r.scrollTop;return ht(o||n).direction==="rtl"&&(i+=Rt(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:a,x:i,y:l}}function Ws(t){var e=ht(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Li(t){return["html","body","#document"].indexOf(ot(t))>=0?t.ownerDocument.body:Ue(t)&&Ws(t)?t:Li(ro(t))}function Sn(t,e){var n;e===void 0&&(e=[]);var r=Li(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),s=Fe(r),a=o?[s].concat(s.visualViewport||[],Ws(r)?r:[]):r,i=e.concat(a);return o?i:i.concat(Sn(ro(a)))}function Fo(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Rd(t,e){var n=un(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function ba(t,e,n){return e===Di?Fo(Fd(t,n)):zt(e)?Rd(e,n):Fo(Md(It(t)))}function Ld(t){var e=Sn(ro(t)),n=["absolute","fixed"].indexOf(ht(t).position)>=0,r=n&&Ue(t)?Xn(t):t;return zt(r)?e.filter(function(o){return zt(o)&&Ti(o,r)&&ot(o)!=="body"}):[]}function Bd(t,e,n,r){var o=e==="clippingParents"?Ld(t):[].concat(e),s=[].concat(o,[n]),a=s[0],i=s.reduce(function(l,u){var c=ba(t,u,r);return l.top=Rt(c.top,l.top),l.right=Fr(c.right,l.right),l.bottom=Fr(c.bottom,l.bottom),l.left=Rt(c.left,l.left),l},ba(t,a,r));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function Bi(t){var e=t.reference,n=t.element,r=t.placement,o=r?nt(r):null,s=r?dn(r):null,a=e.x+e.width/2-n.width/2,i=e.y+e.height/2-n.height/2,l;switch(o){case Pe:l={x:a,y:e.y-n.height};break;case ze:l={x:a,y:e.y+e.height};break;case Ve:l={x:e.x+e.width,y:i};break;case Ne:l={x:e.x-n.width,y:i};break;default:l={x:e.x,y:e.y}}var u=o?Rs(o):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case ln:l[u]=l[u]-(e[c]/2-n[c]/2);break;case Tn:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function Fn(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,s=n.strategy,a=s===void 0?t.strategy:s,i=n.boundary,l=i===void 0?sd:i,u=n.rootBoundary,c=u===void 0?Di:u,d=n.elementContext,f=d===void 0?bn:d,h=n.altBoundary,g=h===void 0?!1:h,m=n.padding,v=m===void 0?0:m,x=Mi(typeof v!="number"?v:Ri(v,Jn)),b=f===bn?ad:bn,k=t.rects.popper,O=t.elements[g?b:f],I=Bd(zt(O)?O:O.contextElement||It(t.elements.popper),l,c,a),E=un(t.elements.reference),_=Bi({reference:E,element:k,strategy:"absolute",placement:o}),N=Fo(Object.assign({},k,_)),S=f===bn?N:E,D={top:I.top-S.top+x.top,bottom:S.bottom-I.bottom+x.bottom,left:I.left-S.left+x.left,right:S.right-I.right+x.right},j=t.modifiersData.offset;if(f===bn&&j){var $=j[o];Object.keys(D).forEach(function(L){var B=[Ve,ze].indexOf(L)>=0?1:-1,X=[Pe,ze].indexOf(L)>=0?"y":"x";D[L]+=$[X]*B})}return D}function Wd(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,s=n.rootBoundary,a=n.padding,i=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?ji:l,c=dn(r),d=c?i?va:va.filter(function(g){return dn(g)===c}):Jn,f=d.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=d);var h=f.reduce(function(g,m){return g[m]=Fn(t,{placement:m,boundary:o,rootBoundary:s,padding:a})[nt(m)],g},{});return Object.keys(h).sort(function(g,m){return h[g]-h[m]})}function $d(t){if(nt(t)===Ts)return[];var e=gr(t);return[wa(t),e,wa(e)]}function Kd(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,s=o===void 0?!0:o,a=n.altAxis,i=a===void 0?!0:a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,g=h===void 0?!0:h,m=n.allowedAutoPlacements,v=e.options.placement,x=nt(v),b=x===v,k=l||(b||!g?[gr(v)]:$d(v)),O=[v].concat(k).reduce(function(K,R){return K.concat(nt(R)===Ts?Wd(e,{placement:R,boundary:c,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:m}):R)},[]),I=e.rects.reference,E=e.rects.popper,_=new Map,N=!0,S=O[0],D=0;D<O.length;D++){var j=O[D],$=nt(j),L=dn(j)===ln,B=[Pe,ze].indexOf($)>=0,X=B?"width":"height",C=Fn(e,{placement:j,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),y=B?L?Ve:Ne:L?ze:Pe;I[X]>E[X]&&(y=gr(y));var P=gr(y),A=[];if(s&&A.push(C[$]<=0),i&&A.push(C[y]<=0,C[P]<=0),A.every(function(K){return K})){S=j,N=!1;break}_.set(j,A)}if(N)for(var M=g?3:1,F=function(R){var J=O.find(function(ne){var se=_.get(ne);if(se)return se.slice(0,R).every(function(fe){return fe})});if(J)return S=J,"break"},z=M;z>0;z--){var U=F(z);if(U==="break")break}e.placement!==S&&(e.modifiersData[r]._skip=!0,e.placement=S,e.reset=!0)}}const Ud={name:"flip",enabled:!0,phase:"main",fn:Kd,requiresIfExists:["offset"],data:{_skip:!1}};function xa(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Ca(t){return[Pe,Ve,ze,Ne].some(function(e){return t[e]>=0})}function zd(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,s=e.modifiersData.preventOverflow,a=Fn(e,{elementContext:"reference"}),i=Fn(e,{altBoundary:!0}),l=xa(a,r),u=xa(i,o,s),c=Ca(l),d=Ca(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const Vd={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:zd};function Hd(t,e,n){var r=nt(t),o=[Ne,Pe].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=s[0],i=s[1];return a=a||0,i=(i||0)*o,[Ne,Ve].indexOf(r)>=0?{x:i,y:a}:{x:a,y:i}}function qd(t){var e=t.state,n=t.options,r=t.name,o=n.offset,s=o===void 0?[0,0]:o,a=ji.reduce(function(c,d){return c[d]=Hd(d,e.rects,s),c},{}),i=a[e.placement],l=i.x,u=i.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=a}const Gd={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:qd};function Yd(t){var e=t.state,n=t.name;e.modifiersData[n]=Bi({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Jd={name:"popperOffsets",enabled:!0,phase:"read",fn:Yd,data:{}};function Xd(t){return t==="x"?"y":"x"}function Qd(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,s=o===void 0?!0:o,a=n.altAxis,i=a===void 0?!1:a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,g=n.tetherOffset,m=g===void 0?0:g,v=Fn(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),x=nt(e.placement),b=dn(e.placement),k=!b,O=Rs(x),I=Xd(O),E=e.modifiersData.popperOffsets,_=e.rects.reference,N=e.rects.popper,S=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,D=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,$={x:0,y:0};if(E){if(s){var L,B=O==="y"?Pe:Ne,X=O==="y"?ze:Ve,C=O==="y"?"height":"width",y=E[O],P=y+v[B],A=y-v[X],M=h?-N[C]/2:0,F=b===ln?_[C]:N[C],z=b===ln?-N[C]:-_[C],U=e.elements.arrow,K=h&&U?Ms(U):{width:0,height:0},R=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Fi(),J=R[B],ne=R[X],se=kn(0,_[C],K[C]),fe=k?_[C]/2-M-se-J-D.mainAxis:F-se-J-D.mainAxis,Ce=k?-_[C]/2+M+se+ne+D.mainAxis:z+se+ne+D.mainAxis,Je=e.elements.arrow&&Xn(e.elements.arrow),te=Je?O==="y"?Je.clientTop||0:Je.clientLeft||0:0,ye=(L=j==null?void 0:j[O])!=null?L:0,Le=y+fe-ye-te,Q=y+Ce-ye,ge=kn(h?Fr(P,Le):P,y,h?Rt(A,Q):A);E[O]=ge,$[O]=ge-y}if(i){var le,_e=O==="x"?Pe:Ne,at=O==="x"?ze:Ve,Ee=E[I],Xe=I==="y"?"height":"width",wn=Ee+v[_e],sr=Ee-v[at],vt=[Pe,Ne].indexOf(x)!==-1,Qe=(le=j==null?void 0:j[I])!=null?le:0,ar=vt?wn:Ee-_[Xe]-N[Xe]-Qe+D.altAxis,aa=vt?Ee+_[Xe]+N[Xe]-Qe-D.altAxis:sr,ia=h&&vt?Cd(ar,Ee,aa):kn(h?ar:wn,Ee,h?aa:sr);E[I]=ia,$[I]=ia-Ee}e.modifiersData[r]=$}}const Zd={name:"preventOverflow",enabled:!0,phase:"main",fn:Qd,requiresIfExists:["offset"]};function ef(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function tf(t){return t===Fe(t)||!Ue(t)?Ls(t):ef(t)}function nf(t){var e=t.getBoundingClientRect(),n=cn(e.width)/t.offsetWidth||1,r=cn(e.height)/t.offsetHeight||1;return n!==1||r!==1}function rf(t,e,n){n===void 0&&(n=!1);var r=Ue(e),o=Ue(e)&&nf(e),s=It(e),a=un(t,o,n),i={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((ot(e)!=="body"||Ws(s))&&(i=tf(e)),Ue(e)?(l=un(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Bs(s))),{x:a.left+i.scrollLeft-l.x,y:a.top+i.scrollTop-l.y,width:a.width,height:a.height}}function of(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function o(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(i){if(!n.has(i)){var l=e.get(i);l&&o(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||o(s)}),r}function sf(t){var e=of(t);return vd.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function af(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function lf(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var _a={placement:"bottom",modifiers:[],strategy:"absolute"};function Ea(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function cf(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,s=o===void 0?_a:o;return function(i,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},_a,s),modifiersData:{},elements:{reference:i,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(x){var b=typeof x=="function"?x(c.options):x;m(),c.options=Object.assign({},s,c.options,b),c.scrollParents={reference:zt(i)?Sn(i):i.contextElement?Sn(i.contextElement):[],popper:Sn(l)};var k=sf(lf([].concat(r,c.options.modifiers)));return c.orderedModifiers=k.filter(function(O){return O.enabled}),g(),h.update()},forceUpdate:function(){if(!f){var x=c.elements,b=x.reference,k=x.popper;if(Ea(b,k)){c.rects={reference:rf(b,Xn(k),c.options.strategy==="fixed"),popper:Ms(k)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(D){return c.modifiersData[D.name]=Object.assign({},D.data)});for(var O=0;O<c.orderedModifiers.length;O++){if(c.reset===!0){c.reset=!1,O=-1;continue}var I=c.orderedModifiers[O],E=I.fn,_=I.options,N=_===void 0?{}:_,S=I.name;typeof E=="function"&&(c=E({state:c,options:N,name:S,instance:h})||c)}}}},update:af(function(){return new Promise(function(v){h.forceUpdate(),v(c)})}),destroy:function(){m(),f=!0}};if(!Ea(i,l))return h;h.setOptions(u).then(function(v){!f&&u.onFirstUpdate&&u.onFirstUpdate(v)});function g(){c.orderedModifiers.forEach(function(v){var x=v.name,b=v.options,k=b===void 0?{}:b,O=v.effect;if(typeof O=="function"){var I=O({state:c,name:x,instance:h,options:k}),E=function(){};d.push(I||E)}})}function m(){d.forEach(function(v){return v()}),d=[]}return h}}var uf=[jd,Jd,Nd,wd,Gd,Ud,Zd,Sd,Vd],df=cf({defaultModifiers:uf});function $s(t={}){const{enabled:e=!0,modifiers:n,placement:r="bottom",strategy:o="absolute",arrowPadding:s=8,eventListeners:a=!0,offset:i,gutter:l=8,flip:u=!0,boundary:c="clippingParents",preventOverflow:d=!0,matchWidth:f,direction:h="ltr"}=t,g=p.useRef(null),m=p.useRef(null),v=p.useRef(null),x=od(r,h),b=p.useRef(()=>{}),k=p.useCallback(()=>{var D;!e||!g.current||!m.current||((D=b.current)==null||D.call(b),v.current=df(g.current,m.current,{placement:x,modifiers:[td,Qu,Xu,{...Ju,enabled:!!f},{name:"eventListeners",...Yu(a)},{name:"arrow",options:{padding:s}},{name:"offset",options:{offset:i??[0,l]}},{name:"flip",enabled:!!u,options:{padding:8}},{name:"preventOverflow",enabled:!!d,options:{boundary:c}},...n??[]],strategy:o}),v.current.forceUpdate(),b.current=v.current.destroy)},[x,e,n,f,a,s,i,l,u,d,c,o]);p.useEffect(()=>()=>{var D;!g.current&&!m.current&&((D=v.current)==null||D.destroy(),v.current=null)},[]);const O=p.useCallback(D=>{g.current=D,k()},[k]),I=p.useCallback((D={},j=null)=>({...D,ref:ke(O,j)}),[O]),E=p.useCallback(D=>{m.current=D,k()},[k]),_=p.useCallback((D={},j=null)=>({...D,ref:ke(E,j),style:{...D.style,position:o,minWidth:f?void 0:"max-content",inset:"0 auto auto 0"}}),[o,E,f]),N=p.useCallback((D={},j=null)=>{const{size:$,shadowColor:L,bg:B,style:X,...C}=D;return{...C,ref:j,"data-popper-arrow":"",style:ff(D)}},[]),S=p.useCallback((D={},j=null)=>({...D,ref:j,"data-popper-arrow-inner":""}),[]);return{update(){var D;(D=v.current)==null||D.update()},forceUpdate(){var D;(D=v.current)==null||D.forceUpdate()},transformOrigin:pe.transformOrigin.varRef,referenceRef:O,popperRef:E,getPopperProps:_,getArrowProps:N,getArrowInnerProps:S,getReferenceProps:I}}function ff(t){const{size:e,shadowColor:n,bg:r,style:o}=t,s={...o,position:"absolute"};return e&&(s["--popper-arrow-size"]=e),n&&(s["--popper-arrow-shadow-color"]=n),r&&(s["--popper-arrow-bg"]=r),s}function Ks(t={}){const{onClose:e,onOpen:n,isOpen:r,id:o}=t,s=Ar(n),a=Ar(e),[i,l]=p.useState(t.defaultIsOpen||!1),u=r!==void 0?r:i,c=r!==void 0,d=p.useId(),f=o??`disclosure-${d}`,h=p.useCallback(()=>{c||l(!1),a==null||a()},[c,a]),g=p.useCallback(()=>{c||l(!0),s==null||s()},[c,s]),m=p.useCallback(()=>{u?h():g()},[u,g,h]);function v(b={}){return{...b,"aria-expanded":u,"aria-controls":f,onClick(k){var O;(O=b.onClick)==null||O.call(b,k),m()}}}function x(b={}){return{...b,hidden:!u,id:f}}return{isOpen:u,onOpen:g,onClose:h,onToggle:m,isControlled:c,getButtonProps:v,getDisclosureProps:x}}function hf(t){const{ref:e,handler:n,enabled:r=!0}=t,o=Ar(n),a=p.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;p.useEffect(()=>{if(!r)return;const i=d=>{go(d,e)&&(a.isPointerDown=!0)},l=d=>{if(a.ignoreEmulatedMouseEvents){a.ignoreEmulatedMouseEvents=!1;return}a.isPointerDown&&n&&go(d,e)&&(a.isPointerDown=!1,o(d))},u=d=>{a.ignoreEmulatedMouseEvents=!0,n&&a.isPointerDown&&go(d,e)&&(a.isPointerDown=!1,o(d))},c=Wi(e.current);return c.addEventListener("mousedown",i,!0),c.addEventListener("mouseup",l,!0),c.addEventListener("touchstart",i,!0),c.addEventListener("touchend",u,!0),()=>{c.removeEventListener("mousedown",i,!0),c.removeEventListener("mouseup",l,!0),c.removeEventListener("touchstart",i,!0),c.removeEventListener("touchend",u,!0)}},[n,e,o,a,r])}function go(t,e){var n;const r=t.target;return r&&!Wi(r).contains(r)?!1:!((n=e.current)!=null&&n.contains(r))}function Wi(t){var e;return(e=t==null?void 0:t.ownerDocument)!=null?e:document}function $i(t){const{isOpen:e,ref:n}=t,[r,o]=p.useState(e),[s,a]=p.useState(!1);return p.useEffect(()=>{s||(o(e),a(!0))},[e,s,r]),nn(()=>n.current,"animationend",()=>{o(e)}),{present:!(e?!1:!r),onComplete(){var l;const u=wc(n.current),c=new u.CustomEvent("animationend",{bubbles:!0});(l=n.current)==null||l.dispatchEvent(c)}}}function Ki(t){const{wasSelected:e,enabled:n,isSelected:r,mode:o="unmount"}=t;return!!(!n||r||o==="keepMounted"&&e)}var[pf,mf,vf,yf]=tu(),[gf,Qn]=Ot({strict:!1,name:"MenuContext"});function wf(t,...e){const n=p.useId(),r=t||n;return p.useMemo(()=>e.map(o=>`${o}-${r}`),[r,e])}function Ui(t){var e;return(e=t==null?void 0:t.ownerDocument)!=null?e:document}function ka(t){return Ui(t).activeElement===t}function bf(t={}){const{id:e,closeOnSelect:n=!0,closeOnBlur:r=!0,initialFocusRef:o,autoSelect:s=!0,isLazy:a,isOpen:i,defaultIsOpen:l,onClose:u,onOpen:c,placement:d="bottom-start",lazyBehavior:f="unmount",direction:h,computePositionOnMount:g=!1,...m}=t,v=p.useRef(null),x=p.useRef(null),b=vf(),k=p.useCallback(()=>{requestAnimationFrame(()=>{var U;(U=v.current)==null||U.focus({preventScroll:!1})})},[]),O=p.useCallback(()=>{const U=setTimeout(()=>{var K;if(o)(K=o.current)==null||K.focus();else{const R=b.firstEnabled();R&&L(R.index)}});P.current.add(U)},[b,o]),I=p.useCallback(()=>{const U=setTimeout(()=>{const K=b.lastEnabled();K&&L(K.index)});P.current.add(U)},[b]),E=p.useCallback(()=>{c==null||c(),s?O():k()},[s,O,k,c]),{isOpen:_,onOpen:N,onClose:S,onToggle:D}=Ks({isOpen:i,defaultIsOpen:l,onClose:u,onOpen:E});hf({enabled:_&&r,ref:v,handler:U=>{var K;(K=x.current)!=null&&K.contains(U.target)||S()}});const j=$s({...m,enabled:_||g,placement:d,direction:h}),[$,L]=p.useState(-1);Zr(()=>{_||L(-1)},[_]),Ni(v,{focusRef:x,visible:_,shouldFocus:!0});const B=$i({isOpen:_,ref:v}),[X,C]=wf(e,"menu-button","menu-list"),y=p.useCallback(()=>{N(),k()},[N,k]),P=p.useRef(new Set([]));p.useEffect(()=>{const U=P.current;return()=>{U.forEach(K=>clearTimeout(K)),U.clear()}},[]);const A=p.useCallback(()=>{N(),O()},[O,N]),M=p.useCallback(()=>{N(),I()},[N,I]),F=p.useCallback(()=>{var U,K;const R=Ui(v.current),J=(U=v.current)==null?void 0:U.contains(R.activeElement);if(!(_&&!J))return;const se=(K=b.item($))==null?void 0:K.node;se==null||se.focus({preventScroll:!0})},[_,$,b]),z=p.useRef(null);return{openAndFocusMenu:y,openAndFocusFirstItem:A,openAndFocusLastItem:M,onTransitionEnd:F,unstable__animationState:B,descendants:b,popper:j,buttonId:X,menuId:C,forceUpdate:j.forceUpdate,orientation:"vertical",isOpen:_,onToggle:D,onOpen:N,onClose:S,menuRef:v,buttonRef:x,focusedIndex:$,closeOnSelect:n,closeOnBlur:r,autoSelect:s,setFocusedIndex:L,isLazy:a,lazyBehavior:f,initialFocusRef:o,rafId:z}}function xf(t={},e=null){const n=Qn(),{onToggle:r,popper:o,openAndFocusFirstItem:s,openAndFocusLastItem:a}=n,i=p.useCallback(l=>{const u=l.key,d={Enter:s,ArrowDown:s,ArrowUp:a}[u];d&&(l.preventDefault(),l.stopPropagation(),d(l))},[s,a]);return{...t,ref:ke(n.buttonRef,e,o.referenceRef),id:n.buttonId,"data-active":Ze(n.isOpen),"aria-expanded":n.isOpen,"aria-haspopup":"menu","aria-controls":n.menuId,onClick:he(t.onClick,r),onKeyDown:he(t.onKeyDown,i)}}function Mo(t){var e;return kf(t)&&!!((e=t==null?void 0:t.getAttribute("role"))!=null&&e.startsWith("menuitem"))}function Cf(t={},e=null){const n=Qn();if(!n)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:r,setFocusedIndex:o,menuRef:s,isOpen:a,onClose:i,menuId:l,isLazy:u,lazyBehavior:c,unstable__animationState:d}=n,f=mf(),h=Lu({preventDefault:x=>x.key!==" "&&Mo(x.target)}),g=p.useCallback(x=>{if(!x.currentTarget.contains(x.target))return;const b=x.key,O={Tab:E=>E.preventDefault(),Escape:i,ArrowDown:()=>{const E=f.nextEnabled(r);E&&o(E.index)},ArrowUp:()=>{const E=f.prevEnabled(r);E&&o(E.index)}}[b];if(O){x.preventDefault(),O(x);return}const I=h(E=>{const _=Bu(f.values(),E,N=>{var S,D;return(D=(S=N==null?void 0:N.node)==null?void 0:S.textContent)!=null?D:""},f.item(r));if(_){const N=f.indexOf(_.node);o(N)}});Mo(x.target)&&I(x)},[f,r,h,i,o]),m=p.useRef(!1);a&&(m.current=!0);const v=Ki({wasSelected:m.current,enabled:u,mode:c,isSelected:d.present});return{...t,ref:ke(s,e),children:v?t.children:null,tabIndex:-1,role:"menu",id:l,style:{...t.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:he(t.onKeyDown,g)}}function _f(t={}){const{popper:e,isOpen:n}=Qn();return e.getPopperProps({...t,style:{visibility:n?"visible":"hidden",...t.style}})}function Ef(t={},e=null){const{onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onClick:s,onFocus:a,isDisabled:i,isFocusable:l,closeOnSelect:u,type:c,...d}=t,f=Qn(),{setFocusedIndex:h,focusedIndex:g,closeOnSelect:m,onClose:v,menuRef:x,isOpen:b,menuId:k,rafId:O}=f,I=p.useRef(null),E=`${k}-menuitem-${p.useId()}`,{index:_,register:N}=yf({disabled:i&&!l}),S=p.useCallback(y=>{n==null||n(y),!i&&h(_)},[h,_,i,n]),D=p.useCallback(y=>{r==null||r(y),I.current&&!ka(I.current)&&S(y)},[S,r]),j=p.useCallback(y=>{o==null||o(y),!i&&h(-1)},[h,i,o]),$=p.useCallback(y=>{s==null||s(y),Mo(y.currentTarget)&&(u??m)&&v()},[v,s,m,u]),L=p.useCallback(y=>{a==null||a(y),h(_)},[h,a,_]),B=_===g,X=i&&!l;Zr(()=>{if(b)return B&&!X&&I.current?(O.current&&cancelAnimationFrame(O.current),O.current=requestAnimationFrame(()=>{var y;(y=I.current)==null||y.focus({preventScroll:!0}),O.current=null})):x.current&&!ka(x.current)&&x.current.focus({preventScroll:!0}),()=>{O.current&&cancelAnimationFrame(O.current)}},[B,X,x,b]);const C=$u({onClick:$,onFocus:L,onMouseEnter:S,onMouseMove:D,onMouseLeave:j,ref:ke(N,I,e),isDisabled:i,isFocusable:l});return{...d,...C,type:c??C.type,id:E,role:"menuitem",tabIndex:B?0:-1}}function kf(t){var e;if(!Sf(t))return!1;const n=(e=t.ownerDocument.defaultView)!=null?e:window;return t instanceof n.HTMLElement}function Sf(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}var[Of,Zn]=Ot({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),oo=t=>{const{children:e}=t,n=hn("Menu",t),r=Ge(t),{direction:o}=bs(),{descendants:s,...a}=bf({...r,direction:o}),i=p.useMemo(()=>a,[a]),{isOpen:l,onClose:u,forceUpdate:c}=i;return w.jsx(pf,{value:s,children:w.jsx(gf,{value:i,children:w.jsx(Of,{value:n,children:si(e,{isOpen:l,onClose:u,forceUpdate:c})})})})};oo.displayName="Menu";var zi=ee((t,e)=>{const n=Zn();return w.jsx(Z.span,{ref:e,...t,__css:n.command,className:"chakra-menu__command"})});zi.displayName="MenuCommand";var If=ee((t,e)=>{const{type:n,...r}=t,o=Zn(),s=r.as||n?n??void 0:"button",a=p.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...o.item}),[o.item]);return w.jsx(Z.button,{ref:e,type:s,...r,__css:a})}),Vi=t=>{const{className:e,children:n,...r}=t,o=Zn(),s=p.Children.only(n),a=p.isValidElement(s)?p.cloneElement(s,{focusable:"false","aria-hidden":!0,className:de("chakra-menu__icon",s.props.className)}):null,i=de("chakra-menu__icon-wrapper",e);return w.jsx(Z.span,{className:i,...r,__css:o.icon,children:a})};Vi.displayName="MenuIcon";var Lt=ee((t,e)=>{const{icon:n,iconSpacing:r="0.75rem",command:o,commandSpacing:s="0.75rem",children:a,...i}=t,l=Ef(i,e),c=n||o?w.jsx("span",{style:{pointerEvents:"none",flex:1},children:a}):a;return w.jsxs(If,{...l,className:de("chakra-menu__menuitem",l.className),children:[n&&w.jsx(Vi,{fontSize:"0.8em",marginEnd:r,children:n}),c,o&&w.jsx(zi,{marginStart:s,children:o})]})});Lt.displayName="MenuItem";var Pf={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},Nf=Z(xs.div),so=ee(function(e,n){var r,o;const{rootProps:s,motionProps:a,...i}=e,{isOpen:l,onTransitionEnd:u,unstable__animationState:c}=Qn(),d=Cf(i,n),f=_f(s),h=Zn();return w.jsx(Z.div,{...f,__css:{zIndex:(o=e.zIndex)!=null?o:(r=h.list)==null?void 0:r.zIndex},children:w.jsx(Nf,{variants:Pf,initial:!1,animate:l?"enter":"exit",__css:{outline:0,...h.list},...a,className:de("chakra-menu__menu-list",d.className),...d,onUpdate:u,onAnimationComplete:ai(c.onComplete,d.onAnimationComplete)})})});so.displayName="MenuList";var Df=ee((t,e)=>{const n=Zn();return w.jsx(Z.button,{ref:e,...t,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...n.button}})}),Hi=ee((t,e)=>{const{children:n,as:r,...o}=t,s=xf(o,e),a=r||Df;return w.jsx(a,{...s,className:de("chakra-menu__menu-button",t.className),children:w.jsx(Z.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:t.children})})});Hi.displayName="MenuButton";var[jf,er]=Ot({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[Af,Us]=Ot({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `});function qi(t){const e=p.Children.only(t.children),{getTriggerProps:n}=er();return p.cloneElement(e,n(e.props,e.ref))}qi.displayName="PopoverTrigger";var Xt={click:"click",hover:"hover"};function Tf(t={}){const{closeOnBlur:e=!0,closeOnEsc:n=!0,initialFocusRef:r,id:o,returnFocusOnClose:s=!0,autoFocus:a=!0,arrowSize:i,arrowShadowColor:l,trigger:u=Xt.click,openDelay:c=200,closeDelay:d=200,isLazy:f,lazyBehavior:h="unmount",computePositionOnMount:g,...m}=t,{isOpen:v,onClose:x,onOpen:b,onToggle:k}=Ks(t),O=p.useRef(null),I=p.useRef(null),E=p.useRef(null),_=p.useRef(!1),N=p.useRef(!1);v&&(N.current=!0);const[S,D]=p.useState(!1),[j,$]=p.useState(!1),L=p.useId(),B=o??L,[X,C,y,P]=["popover-trigger","popover-content","popover-header","popover-body"].map(Q=>`${Q}-${B}`),{referenceRef:A,getArrowProps:M,getPopperProps:F,getArrowInnerProps:z,forceUpdate:U}=$s({...m,enabled:v||!!g}),K=$i({isOpen:v,ref:E});Cu({enabled:v,ref:I}),Ni(E,{focusRef:I,visible:v,shouldFocus:s&&u===Xt.click}),zu(E,{focusRef:r,visible:v,shouldFocus:a&&u===Xt.click});const R=Ki({wasSelected:N.current,enabled:f,mode:h,isSelected:K.present}),J=p.useCallback((Q={},ge=null)=>{const le={...Q,style:{...Q.style,transformOrigin:pe.transformOrigin.varRef,[pe.arrowSize.var]:i?`${i}px`:void 0,[pe.arrowShadowColor.var]:l},ref:ke(E,ge),children:R?Q.children:null,id:C,tabIndex:-1,role:"dialog",onKeyDown:he(Q.onKeyDown,_e=>{n&&_e.key==="Escape"&&x()}),onBlur:he(Q.onBlur,_e=>{const at=Sa(_e),Ee=wo(E.current,at),Xe=wo(I.current,at);v&&e&&(!Ee&&!Xe)&&x()}),"aria-labelledby":S?y:void 0,"aria-describedby":j?P:void 0};return u===Xt.hover&&(le.role="tooltip",le.onMouseEnter=he(Q.onMouseEnter,()=>{_.current=!0}),le.onMouseLeave=he(Q.onMouseLeave,_e=>{_e.nativeEvent.relatedTarget!==null&&(_.current=!1,setTimeout(()=>x(),d))})),le},[R,C,S,y,j,P,u,n,x,v,e,d,l,i]),ne=p.useCallback((Q={},ge=null)=>F({...Q,style:{visibility:v?"visible":"hidden",...Q.style}},ge),[v,F]),se=p.useCallback((Q,ge=null)=>({...Q,ref:ke(ge,O,A)}),[O,A]),fe=p.useRef(),Ce=p.useRef(),Je=p.useCallback(Q=>{O.current==null&&A(Q)},[A]),te=p.useCallback((Q={},ge=null)=>{const le={...Q,ref:ke(I,ge,Je),id:X,"aria-haspopup":"dialog","aria-expanded":v,"aria-controls":C};return u===Xt.click&&(le.onClick=he(Q.onClick,k)),u===Xt.hover&&(le.onFocus=he(Q.onFocus,()=>{fe.current===void 0&&b()}),le.onBlur=he(Q.onBlur,_e=>{const at=Sa(_e),Ee=!wo(E.current,at);v&&e&&Ee&&x()}),le.onKeyDown=he(Q.onKeyDown,_e=>{_e.key==="Escape"&&x()}),le.onMouseEnter=he(Q.onMouseEnter,()=>{_.current=!0,fe.current=window.setTimeout(()=>b(),c)}),le.onMouseLeave=he(Q.onMouseLeave,()=>{_.current=!1,fe.current&&(clearTimeout(fe.current),fe.current=void 0),Ce.current=window.setTimeout(()=>{_.current===!1&&x()},d)})),le},[X,v,C,u,Je,k,b,e,x,c,d]);p.useEffect(()=>()=>{fe.current&&clearTimeout(fe.current),Ce.current&&clearTimeout(Ce.current)},[]);const ye=p.useCallback((Q={},ge=null)=>({...Q,id:y,ref:ke(ge,le=>{D(!!le)})}),[y]),Le=p.useCallback((Q={},ge=null)=>({...Q,id:P,ref:ke(ge,le=>{$(!!le)})}),[P]);return{forceUpdate:U,isOpen:v,onAnimationComplete:K.onComplete,onClose:x,getAnchorProps:se,getArrowProps:M,getArrowInnerProps:z,getPopoverPositionerProps:ne,getPopoverProps:J,getTriggerProps:te,getHeaderProps:ye,getBodyProps:Le}}function wo(t,e){return t===e||(t==null?void 0:t.contains(e))}function Sa(t){var e;const n=t.currentTarget.ownerDocument.activeElement;return(e=t.relatedTarget)!=null?e:n}function Gi(t){const e=hn("Popover",t),{children:n,...r}=Ge(t),o=bs(),s=Tf({...r,direction:o.direction});return w.jsx(jf,{value:s,children:w.jsx(Af,{value:e,children:si(n,{isOpen:s.isOpen,onClose:s.onClose,forceUpdate:s.forceUpdate})})})}Gi.displayName="Popover";var Yi=ee(function(e,n){const{getBodyProps:r}=er(),o=Us();return w.jsx(Z.div,{...r(e,n),className:de("chakra-popover__body",e.className),__css:o.body})});Yi.displayName="PopoverBody";var Ji=ee(function(e,n){const{onClose:r}=er(),o=Us();return w.jsx(bc,{size:"sm",onClick:r,className:de("chakra-popover__close-btn",e.className),__css:o.closeButton,ref:n,...e})});Ji.displayName="PopoverCloseButton";function Ff(t){if(t)return{enter:{...t.enter,visibility:"visible"},exit:{...t.exit,transitionEnd:{visibility:"hidden"}}}}var Mf={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},Rf=Z(xs.section),Xi=ee(function(e,n){const{variants:r=Mf,...o}=e,{isOpen:s}=er();return w.jsx(Rf,{ref:n,variants:Ff(r),initial:!1,animate:s?"enter":"exit",...o})});Xi.displayName="PopoverTransition";var Qi=ee(function(e,n){const{rootProps:r,motionProps:o,...s}=e,{getPopoverProps:a,getPopoverPositionerProps:i,onAnimationComplete:l}=er(),u=Us(),c={position:"relative",display:"flex",flexDirection:"column",...u.content};return w.jsx(Z.div,{...i(r),__css:u.popper,className:"chakra-popover__popper",children:w.jsx(Xi,{...o,...a(s,n),onAnimationComplete:ai(l,s.onAnimationComplete),className:de("chakra-popover__content",e.className),__css:c})})});Qi.displayName="PopoverContent";var Lf={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},Ro=t=>{var e;return((e=t.current)==null?void 0:e.ownerDocument)||document},wr=t=>{var e,n;return((n=(e=t.current)==null?void 0:e.ownerDocument)==null?void 0:n.defaultView)||window};function Bf(t={}){const{openDelay:e=0,closeDelay:n=0,closeOnClick:r=!0,closeOnMouseDown:o,closeOnScroll:s,closeOnPointerDown:a=o,closeOnEsc:i=!0,onOpen:l,onClose:u,placement:c,id:d,isOpen:f,defaultIsOpen:h,arrowSize:g=10,arrowShadowColor:m,arrowPadding:v,modifiers:x,isDisabled:b,gutter:k,offset:O,direction:I,...E}=t,{isOpen:_,onOpen:N,onClose:S}=Ks({isOpen:f,defaultIsOpen:h,onOpen:l,onClose:u}),{referenceRef:D,getPopperProps:j,getArrowInnerProps:$,getArrowProps:L}=$s({enabled:_,placement:c,arrowPadding:v,modifiers:x,gutter:k,offset:O,direction:I}),B=p.useId(),C=`tooltip-${d??B}`,y=p.useRef(null),P=p.useRef(),A=p.useCallback(()=>{P.current&&(clearTimeout(P.current),P.current=void 0)},[]),M=p.useRef(),F=p.useCallback(()=>{M.current&&(clearTimeout(M.current),M.current=void 0)},[]),z=p.useCallback(()=>{F(),S()},[S,F]),U=Wf(y,z),K=p.useCallback(()=>{if(!b&&!P.current){_&&U();const te=wr(y);P.current=te.setTimeout(N,e)}},[U,b,_,N,e]),R=p.useCallback(()=>{A();const te=wr(y);M.current=te.setTimeout(z,n)},[n,z,A]),J=p.useCallback(()=>{_&&r&&R()},[r,R,_]),ne=p.useCallback(()=>{_&&a&&R()},[a,R,_]),se=p.useCallback(te=>{_&&te.key==="Escape"&&R()},[_,R]);nn(()=>Ro(y),"keydown",i?se:void 0),nn(()=>{if(!s)return null;const te=y.current;if(!te)return null;const ye=Oi(te);return ye.localName==="body"?wr(y):ye},"scroll",()=>{_&&s&&z()},{passive:!0,capture:!0}),p.useEffect(()=>{b&&(A(),_&&S())},[b,_,S,A]),p.useEffect(()=>()=>{A(),F()},[A,F]),nn(()=>y.current,"pointerleave",R);const fe=p.useCallback((te={},ye=null)=>({...te,ref:ke(y,ye,D),onPointerEnter:he(te.onPointerEnter,Q=>{Q.pointerType!=="touch"&&K()}),onClick:he(te.onClick,J),onPointerDown:he(te.onPointerDown,ne),onFocus:he(te.onFocus,K),onBlur:he(te.onBlur,R),"aria-describedby":_?C:void 0}),[K,R,ne,_,C,J,D]),Ce=p.useCallback((te={},ye=null)=>j({...te,style:{...te.style,[pe.arrowSize.var]:g?`${g}px`:void 0,[pe.arrowShadowColor.var]:m}},ye),[j,g,m]),Je=p.useCallback((te={},ye=null)=>{const Le={...te.style,position:"relative",transformOrigin:pe.transformOrigin.varRef};return{ref:ye,...E,...te,id:C,role:"tooltip",style:Le}},[E,C]);return{isOpen:_,show:K,hide:R,getTriggerProps:fe,getTooltipProps:Je,getTooltipPositionerProps:Ce,getArrowProps:L,getArrowInnerProps:$}}var bo="chakra-ui:close-tooltip";function Wf(t,e){return p.useEffect(()=>{const n=Ro(t);return n.addEventListener(bo,e),()=>n.removeEventListener(bo,e)},[e,t]),()=>{const n=Ro(t),r=wr(t);n.dispatchEvent(new r.CustomEvent(bo))}}function $f(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}function Kf(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}var Uf=Z(xs.div),Bt=ee((t,e)=>{var n,r;const o=Hn("Tooltip",t),s=Ge(t),a=bs(),{children:i,label:l,shouldWrapChildren:u,"aria-label":c,hasArrow:d,bg:f,portalProps:h,background:g,backgroundColor:m,bgColor:v,motionProps:x,...b}=s,k=(r=(n=g??m)!=null?n:f)!=null?r:v;if(k){o.bg=k;const j=xc(a,"colors",k);o[pe.arrowBg.var]=j}const O=Bf({...b,direction:a.direction}),I=typeof i=="string"||u;let E;if(I)E=w.jsx(Z.span,{display:"inline-block",tabIndex:0,...O.getTriggerProps(),children:i});else{const j=p.Children.only(i);E=p.cloneElement(j,O.getTriggerProps(j.props,j.ref))}const _=!!c,N=O.getTooltipProps({},e),S=_?$f(N,["role","id"]):N,D=Kf(N,["role","id"]);return l?w.jsxs(w.Fragment,{children:[E,w.jsx(Cc,{children:O.isOpen&&w.jsx(ii,{...h,children:w.jsx(Z.div,{...O.getTooltipPositionerProps(),__css:{zIndex:o.zIndex,pointerEvents:"none"},children:w.jsxs(Uf,{variants:Lf,initial:"exit",animate:"enter",exit:"exit",...x,...S,__css:o,children:[l,_&&w.jsx(Z.span,{srOnly:!0,...D,children:c}),d&&w.jsx(Z.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:w.jsx(Z.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:o.bg}})})]})})})})]}):w.jsx(w.Fragment,{children:i})});Bt.displayName="Tooltip";var Zi=qn(function t(){Gn(this,t)}),el="CALC_UNIT",zf=new RegExp(el,"g");function xo(t){return typeof t=="number"?"".concat(t).concat(el):t}var Vf=function(t){li(n,t);var e=ci(n);function n(r,o){var s;Gn(this,n),s=e.call(this),$e(vr(s),"result",""),$e(vr(s),"unitlessCssVar",void 0),$e(vr(s),"lowPriority",void 0);var a=_t(r);return s.unitlessCssVar=o,r instanceof n?s.result="(".concat(r.result,")"):a==="number"?s.result=xo(r):a==="string"&&(s.result=r),s}return qn(n,[{key:"add",value:function(o){return o instanceof n?this.result="".concat(this.result," + ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," + ").concat(xo(o))),this.lowPriority=!0,this}},{key:"sub",value:function(o){return o instanceof n?this.result="".concat(this.result," - ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," - ").concat(xo(o))),this.lowPriority=!0,this}},{key:"mul",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof n?this.result="".concat(this.result," * ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," * ").concat(o)),this.lowPriority=!1,this}},{key:"div",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof n?this.result="".concat(this.result," / ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," / ").concat(o)),this.lowPriority=!1,this}},{key:"getResult",value:function(o){return this.lowPriority||o?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(o){var s=this,a=o||{},i=a.unit,l=!0;return typeof i=="boolean"?l=i:Array.from(this.unitlessCssVar).some(function(u){return s.result.includes(u)})&&(l=!1),this.result=this.result.replace(zf,l?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n}(Zi),Hf=function(t){li(n,t);var e=ci(n);function n(r){var o;return Gn(this,n),o=e.call(this),$e(vr(o),"result",0),r instanceof n?o.result=r.result:typeof r=="number"&&(o.result=r),o}return qn(n,[{key:"add",value:function(o){return o instanceof n?this.result+=o.result:typeof o=="number"&&(this.result+=o),this}},{key:"sub",value:function(o){return o instanceof n?this.result-=o.result:typeof o=="number"&&(this.result-=o),this}},{key:"mul",value:function(o){return o instanceof n?this.result*=o.result:typeof o=="number"&&(this.result*=o),this}},{key:"div",value:function(o){return o instanceof n?this.result/=o.result:typeof o=="number"&&(this.result/=o),this}},{key:"equal",value:function(){return this.result}}]),n}(Zi),qf=function(e,n){var r=e==="css"?Vf:Hf;return function(o){return new r(o,n)}},Oa=function(){function t(e,n){Gn(this,t),$e(this,"name",void 0),$e(this,"style",void 0),$e(this,"_keyframe",!0),this.name=e,this.style=n}return qn(t,[{key:"getName",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n?"".concat(n,"-").concat(this.name):this.name}}]),t}();const Gf=1e3*60*10;let Yf=function(){function t(){Gn(this,t),this.map=new Map,this.objectIDMap=new WeakMap,this.nextID=0,this.lastAccessBeat=new Map,this.accessBeat=0}return qn(t,[{key:"set",value:function(n,r){this.clear();const o=this.getCompositeKey(n);this.map.set(o,r),this.lastAccessBeat.set(o,Date.now())}},{key:"get",value:function(n){const r=this.getCompositeKey(n),o=this.map.get(r);return this.lastAccessBeat.set(r,Date.now()),this.accessBeat+=1,o}},{key:"getCompositeKey",value:function(n){return n.map(o=>o&&typeof o=="object"?`obj_${this.getObjectID(o)}`:`${typeof o}_${o}`).join("|")}},{key:"getObjectID",value:function(n){if(this.objectIDMap.has(n))return this.objectIDMap.get(n);const r=this.nextID;return this.objectIDMap.set(n,r),this.nextID+=1,r}},{key:"clear",value:function(){if(this.accessBeat>1e4){const n=Date.now();this.lastAccessBeat.forEach((r,o)=>{n-r>Gf&&(this.map.delete(o),this.lastAccessBeat.delete(o))}),this.accessBeat=0}}}])}();const Ia=new Yf;function Jf(t,e){return ie.useMemo(()=>{const n=Ia.get(e);if(n)return n;const r=t();return Ia.set(e,r),r},e)}function Xf(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return`max(${n.map(o=>la(o)).join(",")})`},min:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return`min(${n.map(o=>la(o)).join(",")})`}}}const tl=typeof CSSINJS_STATISTIC<"u";let Lo=!0;function zs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!tl)return Object.assign.apply(Object,[{}].concat(e));Lo=!1;const r={};return e.forEach(o=>{Object.keys(o).forEach(a=>{Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:()=>o[a]})})}),Lo=!0,r}const Pa={};function Qf(){}const Zf=t=>{let e,n=t,r=Qf;return tl&&typeof Proxy<"u"&&(e=new Set,n=new Proxy(t,{get(o,s){return Lo&&e.add(s),o[s]}}),r=(o,s)=>{var a;Pa[o]={global:Array.from(e),component:Object.assign(Object.assign({},(a=Pa[o])===null||a===void 0?void 0:a.component),s)}}),{token:n,keys:e,flush:r}},nl=(t,e,n)=>{var r;return typeof n=="function"?n(zs(e,(r=e[t])!==null&&r!==void 0?r:{})):n??{}},rl=(t,e,n,r)=>{const o=Object.assign({},e[t]);if(r!=null&&r.deprecatedTokens){const{deprecatedTokens:a}=r;a.forEach(i=>{let[l,u]=i;var c;(o!=null&&o[l]||o!=null&&o[u])&&((c=o[u])!==null&&c!==void 0||(o[u]=o==null?void 0:o[l]))})}const s=Object.assign(Object.assign({},n),o);return Object.keys(s).forEach(a=>{s[a]===e[a]&&delete s[a]}),s},Na=(t,e)=>`${[e,t.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function ol(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=Array.isArray(t)?t:[t,t],[s]=o,a=o.join("-");return function(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i;const[u,c,d,f,h]=An(),{getPrefixCls:g,iconPrefixCls:m,csp:v}=p.useContext(eo),x=g(),b=h?"css":"js",k=Jf(()=>{const N=new Set;return h&&Object.keys(r.unitless||{}).forEach(S=>{N.add(mo(S,h.prefix)),N.add(mo(S,Na(s,h.prefix)))}),qf(b,N)},[b,s,h&&h.prefix]),{max:O,min:I}=Xf(b),E={theme:u,token:f,hashId:d,nonce:()=>v==null?void 0:v.nonce,clientOnly:r.clientOnly,layer:{name:"antd"},order:r.order||-999};return ca(Object.assign(Object.assign({},E),{clientOnly:!1,path:["Shared",x]}),()=>[{"&":Ec(f)}]),kc(m,v),[ca(Object.assign(Object.assign({},E),{path:[a,i,m]}),()=>{if(r.injectStyle===!1)return[];const{token:N,flush:S}=Zf(f),D=nl(s,c,n),j=`.${i}`,$=rl(s,c,D,{deprecatedTokens:r.deprecatedTokens});h&&Object.keys(D).forEach(X=>{D[X]=`var(${mo(X,Na(s,h.prefix))})`});const L=zs(N,{componentCls:j,prefixCls:i,iconCls:`.${m}`,antCls:`.${x}`,calc:k,max:O,min:I},h?D:$),B=e(L,{hashId:d,prefixCls:i,rootPrefixCls:x,iconPrefixCls:m});return S(s,$),[r.resetStyle===!1?null:Sc(L,i,l,r.resetFont),B]}),d]}}const ny=(t,e,n,r)=>{const o=ol(t,e,n,Object.assign({resetStyle:!1,order:-998},r));return a=>{let{prefixCls:i,rootCls:l=i}=a;return o(i,l),null}},eh=(t,e,n)=>{const{unitless:r,injectStyle:o=!0,prefixToken:s}=n,a=l=>{let{rootCls:u,cssVar:c}=l;const[,d]=An();return Oc({path:[t],prefix:c.prefix,key:c==null?void 0:c.key,unitless:r,ignore:Ic,token:d,scope:u},()=>{const f=nl(t,d,e),h=rl(t,d,f,{deprecatedTokens:n==null?void 0:n.deprecatedTokens});return Object.keys(f).forEach(g=>{h[s(g)]=h[g],delete h[g]}),h}),null};return l=>{const[,,,,u]=An();return[c=>o&&u?ie.createElement(ie.Fragment,null,ie.createElement(a,{rootCls:l,cssVar:u,component:t}),c):c,u==null?void 0:u.key]}},th=(t,e,n,r)=>{const o=Array.isArray(t)?t[0]:t;function s(d){return`${o}${d.slice(0,1).toUpperCase()}${d.slice(1)}`}const a=r&&r.unitless||{},i=Object.assign(Object.assign({},_c),{[s("zIndexPopup")]:!0});Object.keys(a).forEach(d=>{i[s(d)]=a[d]});const l=Object.assign(Object.assign({},r),{unitless:i,prefixToken:s}),u=ol(t,e,n,l),c=eh(o,n,l);return function(d){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;const[,h]=u(d,f),[g,m]=c(f);return[g,h,m]}};var nh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const rh=nh;function sl(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}function oh(t){return sl(t)instanceof ShadowRoot}function sh(t){return oh(t)?sl(t):null}function ah(t){return t.replace(/-(.)/g,function(e,n){return n.toUpperCase()})}function ih(t,e){Pc(t,"[@ant-design/icons] ".concat(e))}function Da(t){return _t(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(_t(t.icon)==="object"||typeof t.icon=="function")}function ja(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(e,n){var r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:delete e[n],e[ah(n)]=r}return e},{})}function Bo(t,e,n){return n?ie.createElement(t.tag,Oe(Oe({key:e},ja(t.attrs)),n),(t.children||[]).map(function(r,o){return Bo(r,"".concat(e,"-").concat(t.tag,"-").concat(o))})):ie.createElement(t.tag,Oe({key:e},ja(t.attrs)),(t.children||[]).map(function(r,o){return Bo(r,"".concat(e,"-").concat(t.tag,"-").concat(o))}))}function al(t){return Nc(t)[0]}function il(t){return t?Array.isArray(t)?t:[t]:[]}var lh=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,ch=function(e){var n=p.useContext(ui),r=n.csp,o=n.prefixCls,s=lh;o&&(s=s.replace(/anticon/g,o)),p.useEffect(function(){var a=e.current,i=sh(a);Dc(s,"@ant-design-icons",{prepend:!0,csp:r,attachTo:i})},[])},uh=["icon","className","onClick","style","primaryColor","secondaryColor"],On={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function dh(t){var e=t.primaryColor,n=t.secondaryColor;On.primaryColor=e,On.secondaryColor=n||al(e),On.calculated=!!n}function fh(){return Oe({},On)}var ao=function(e){var n=e.icon,r=e.className,o=e.onClick,s=e.style,a=e.primaryColor,i=e.secondaryColor,l=to(e,uh),u=p.useRef(),c=On;if(a&&(c={primaryColor:a,secondaryColor:i||al(a)}),ch(u),ih(Da(n),"icon should be icon definiton, but got ".concat(n)),!Da(n))return null;var d=n;return d&&typeof d.icon=="function"&&(d=Oe(Oe({},d),{},{icon:d.icon(c.primaryColor,c.secondaryColor)})),Bo(d.icon,"svg-".concat(d.name),Oe(Oe({className:r,onClick:o,style:s,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:u}))};ao.displayName="IconReact";ao.getTwoToneColors=fh;ao.setTwoToneColors=dh;const Vs=ao;function ll(t){var e=il(t),n=Ke(e,2),r=n[0],o=n[1];return Vs.setTwoToneColors({primaryColor:r,secondaryColor:o})}function hh(){var t=Vs.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var ph=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ll(jc.primary);var io=p.forwardRef(function(t,e){var n=t.className,r=t.icon,o=t.spin,s=t.rotate,a=t.tabIndex,i=t.onClick,l=t.twoToneColor,u=to(t,ph),c=p.useContext(ui),d=c.prefixCls,f=d===void 0?"anticon":d,h=c.rootClassName,g=tt(h,f,$e($e({},"".concat(f,"-").concat(r.name),!!r.name),"".concat(f,"-spin"),!!o||r.name==="loading"),n),m=a;m===void 0&&i&&(m=-1);var v=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,x=il(l),b=Ke(x,2),k=b[0],O=b[1];return p.createElement("span",qe({role:"img","aria-label":r.name},u,{ref:e,tabIndex:m,onClick:i,className:g}),p.createElement(Vs,{icon:r,primaryColor:k,secondaryColor:O,style:v}))});io.displayName="AntdIcon";io.getTwoToneColor=hh;io.setTwoToneColor=ll;const mn=io;var mh=function(e,n){return p.createElement(mn,qe({},e,{ref:n,icon:rh}))},vh=p.forwardRef(mh);const yh=vh;var gh={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const wh=gh;var bh=function(e,n){return p.createElement(mn,qe({},e,{ref:n,icon:wh}))},xh=p.forwardRef(bh);const Ch=xh;var _h={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const Eh=_h;var kh=function(e,n){return p.createElement(mn,qe({},e,{ref:n,icon:Eh}))},Sh=p.forwardRef(kh);const Oh=Sh;var Ih={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const Ph=Ih;var Nh=function(e,n){return p.createElement(mn,qe({},e,{ref:n,icon:Ph}))},Dh=p.forwardRef(Nh);const jh=Dh;var Ah={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const Th=Ah;var Fh=function(e,n){return p.createElement(mn,qe({},e,{ref:n,icon:Th}))},Mh=p.forwardRef(Fh);const Rh=Mh;var Lh=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,Bh=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,Wh="".concat(Lh," ").concat(Bh).split(/[\s\n]+/),$h="aria-",Kh="data-";function Aa(t,e){return t.indexOf(e)===0}function Uh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;e===!1?n={aria:!0,data:!0,attr:!0}:e===!0?n={aria:!0}:n=Oe({},e);var r={};return Object.keys(t).forEach(function(o){(n.aria&&(o==="role"||Aa(o,$h))||n.data&&Aa(o,Kh)||n.attr&&Wh.includes(o))&&(r[o]=t[o])}),r}const zh=t=>{const[,,,,e]=An();return e?`${t}-css-var`:""},cl=zh;var q={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var n=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||n>=q.F1&&n<=q.F12)return!1;switch(n){case q.ALT:case q.CAPS_LOCK:case q.CONTEXT_MENU:case q.CTRL:case q.DOWN:case q.END:case q.ESC:case q.HOME:case q.INSERT:case q.LEFT:case q.MAC_FF_META:case q.META:case q.NUMLOCK:case q.NUM_CENTER:case q.PAGE_DOWN:case q.PAGE_UP:case q.PAUSE:case q.PRINT_SCREEN:case q.RIGHT:case q.SHIFT:case q.UP:case q.WIN_KEY:case q.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=q.ZERO&&e<=q.NINE||e>=q.NUM_ZERO&&e<=q.NUM_MULTIPLY||e>=q.A&&e<=q.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case q.SPACE:case q.QUESTION_MARK:case q.NUM_PLUS:case q.NUM_MINUS:case q.NUM_PERIOD:case q.NUM_DIVISION:case q.SEMICOLON:case q.DASH:case q.EQUALS:case q.COMMA:case q.PERIOD:case q.SLASH:case q.APOSTROPHE:case q.SINGLE_QUOTE:case q.OPEN_SQUARE_BRACKET:case q.BACKSLASH:case q.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},ul=p.forwardRef(function(t,e){var n=t.prefixCls,r=t.style,o=t.className,s=t.duration,a=s===void 0?4.5:s,i=t.showProgress,l=t.pauseOnHover,u=l===void 0?!0:l,c=t.eventKey,d=t.content,f=t.closable,h=t.closeIcon,g=h===void 0?"x":h,m=t.props,v=t.onClick,x=t.onNoticeClose,b=t.times,k=t.hovering,O=p.useState(!1),I=Ke(O,2),E=I[0],_=I[1],N=p.useState(0),S=Ke(N,2),D=S[0],j=S[1],$=p.useState(0),L=Ke($,2),B=L[0],X=L[1],C=k||E,y=a>0&&i,P=function(){x(c)},A=function(R){(R.key==="Enter"||R.code==="Enter"||R.keyCode===q.ENTER)&&P()};p.useEffect(function(){if(!C&&a>0){var K=Date.now()-B,R=setTimeout(function(){P()},a*1e3-B);return function(){u&&clearTimeout(R),X(Date.now()-K)}}},[a,C,b]),p.useEffect(function(){if(!C&&y&&(u||B===0)){var K=performance.now(),R,J=function ne(){cancelAnimationFrame(R),R=requestAnimationFrame(function(se){var fe=se+B-K,Ce=Math.min(fe/(a*1e3),1);j(Ce*100),Ce<1&&ne()})};return J(),function(){u&&cancelAnimationFrame(R)}}},[a,B,C,y,b]);var M=p.useMemo(function(){return _t(f)==="object"&&f!==null?f:f?{closeIcon:g}:{}},[f,g]),F=Uh(M,!0),z=100-(!D||D<0?0:D>100?100:D),U="".concat(n,"-notice");return p.createElement("div",qe({},m,{ref:e,className:tt(U,o,$e({},"".concat(U,"-closable"),f)),style:r,onMouseEnter:function(R){var J;_(!0),m==null||(J=m.onMouseEnter)===null||J===void 0||J.call(m,R)},onMouseLeave:function(R){var J;_(!1),m==null||(J=m.onMouseLeave)===null||J===void 0||J.call(m,R)},onClick:v}),p.createElement("div",{className:"".concat(U,"-content")},d),f&&p.createElement("a",qe({tabIndex:0,className:"".concat(U,"-close"),onKeyDown:A,"aria-label":"Close"},F,{onClick:function(R){R.preventDefault(),R.stopPropagation(),P()}}),M.closeIcon),y&&p.createElement("progress",{className:"".concat(U,"-progress"),max:"100",value:z},z+"%"))}),dl=ie.createContext({}),Vh=function(e){var n=e.children,r=e.classNames;return ie.createElement(dl.Provider,{value:{classNames:r}},n)},Ta=8,Fa=3,Ma=16,Hh=function(e){var n={offset:Ta,threshold:Fa,gap:Ma};if(e&&_t(e)==="object"){var r,o,s;n.offset=(r=e.offset)!==null&&r!==void 0?r:Ta,n.threshold=(o=e.threshold)!==null&&o!==void 0?o:Fa,n.gap=(s=e.gap)!==null&&s!==void 0?s:Ma}return[!!e,n]},qh=["className","style","classNames","styles"],Gh=function(e){var n=e.configList,r=e.placement,o=e.prefixCls,s=e.className,a=e.style,i=e.motion,l=e.onAllNoticeRemoved,u=e.onNoticeClose,c=e.stack,d=p.useContext(dl),f=d.classNames,h=p.useRef({}),g=p.useState(null),m=Ke(g,2),v=m[0],x=m[1],b=p.useState([]),k=Ke(b,2),O=k[0],I=k[1],E=n.map(function(C){return{config:C,key:String(C.key)}}),_=Hh(c),N=Ke(_,2),S=N[0],D=N[1],j=D.offset,$=D.threshold,L=D.gap,B=S&&(O.length>0||E.length<=$),X=typeof i=="function"?i(r):i;return p.useEffect(function(){S&&O.length>1&&I(function(C){return C.filter(function(y){return E.some(function(P){var A=P.key;return y===A})})})},[O,E,S]),p.useEffect(function(){var C;if(S&&h.current[(C=E[E.length-1])===null||C===void 0?void 0:C.key]){var y;x(h.current[(y=E[E.length-1])===null||y===void 0?void 0:y.key])}},[E,S]),ie.createElement(Ac,qe({key:r,className:tt(o,"".concat(o,"-").concat(r),f==null?void 0:f.list,s,$e($e({},"".concat(o,"-stack"),!!S),"".concat(o,"-stack-expanded"),B)),style:a,keys:E,motionAppear:!0},X,{onAllRemoved:function(){l(r)}}),function(C,y){var P=C.config,A=C.className,M=C.style,F=C.index,z=P,U=z.key,K=z.times,R=String(U),J=P,ne=J.className,se=J.style,fe=J.classNames,Ce=J.styles,Je=to(J,qh),te=E.findIndex(function(vt){return vt.key===R}),ye={};if(S){var Le=E.length-1-(te>-1?te:F-1),Q=r==="top"||r==="bottom"?"-50%":"0";if(Le>0){var ge,le,_e;ye.height=B?(ge=h.current[R])===null||ge===void 0?void 0:ge.offsetHeight:v==null?void 0:v.offsetHeight;for(var at=0,Ee=0;Ee<Le;Ee++){var Xe;at+=((Xe=h.current[E[E.length-1-Ee].key])===null||Xe===void 0?void 0:Xe.offsetHeight)+L}var wn=(B?at:Le*j)*(r.startsWith("top")?1:-1),sr=!B&&v!==null&&v!==void 0&&v.offsetWidth&&(le=h.current[R])!==null&&le!==void 0&&le.offsetWidth?((v==null?void 0:v.offsetWidth)-j*2*(Le<3?Le:3))/((_e=h.current[R])===null||_e===void 0?void 0:_e.offsetWidth):1;ye.transform="translate3d(".concat(Q,", ").concat(wn,"px, 0) scaleX(").concat(sr,")")}else ye.transform="translate3d(".concat(Q,", 0, 0)")}return ie.createElement("div",{ref:y,className:tt("".concat(o,"-notice-wrapper"),A,fe==null?void 0:fe.wrapper),style:Oe(Oe(Oe({},M),ye),Ce==null?void 0:Ce.wrapper),onMouseEnter:function(){return I(function(Qe){return Qe.includes(R)?Qe:[].concat(tn(Qe),[R])})},onMouseLeave:function(){return I(function(Qe){return Qe.filter(function(ar){return ar!==R})})}},ie.createElement(ul,qe({},Je,{ref:function(Qe){te>-1?h.current[R]=Qe:delete h.current[R]},prefixCls:o,classNames:fe,styles:Ce,className:tt(ne,f==null?void 0:f.notice),style:se,times:K,key:U,eventKey:U,onNoticeClose:u,hovering:S&&O.length>0})))})},Yh=p.forwardRef(function(t,e){var n=t.prefixCls,r=n===void 0?"rc-notification":n,o=t.container,s=t.motion,a=t.maxCount,i=t.className,l=t.style,u=t.onAllRemoved,c=t.stack,d=t.renderNotifications,f=p.useState([]),h=Ke(f,2),g=h[0],m=h[1],v=function(S){var D,j=g.find(function($){return $.key===S});j==null||(D=j.onClose)===null||D===void 0||D.call(j),m(function($){return $.filter(function(L){return L.key!==S})})};p.useImperativeHandle(e,function(){return{open:function(S){m(function(D){var j=tn(D),$=j.findIndex(function(X){return X.key===S.key}),L=Oe({},S);if($>=0){var B;L.times=(((B=D[$])===null||B===void 0?void 0:B.times)||0)+1,j[$]=L}else L.times=0,j.push(L);return a>0&&j.length>a&&(j=j.slice(-a)),j})},close:function(S){v(S)},destroy:function(){m([])}}});var x=p.useState({}),b=Ke(x,2),k=b[0],O=b[1];p.useEffect(function(){var N={};g.forEach(function(S){var D=S.placement,j=D===void 0?"topRight":D;j&&(N[j]=N[j]||[],N[j].push(S))}),Object.keys(k).forEach(function(S){N[S]=N[S]||[]}),O(N)},[g]);var I=function(S){O(function(D){var j=Oe({},D),$=j[S]||[];return $.length||delete j[S],j})},E=p.useRef(!1);if(p.useEffect(function(){Object.keys(k).length>0?E.current=!0:E.current&&(u==null||u(),E.current=!1)},[k]),!o)return null;var _=Object.keys(k);return Tc.createPortal(p.createElement(p.Fragment,null,_.map(function(N){var S=k[N],D=p.createElement(Gh,{key:N,configList:S,placement:N,prefixCls:r,className:i==null?void 0:i(N),style:l==null?void 0:l(N),motion:s,onNoticeClose:v,onAllNoticeRemoved:I,stack:c});return d?d(D,{prefixCls:r,key:N}):D})),o)}),Jh=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Xh=function(){return document.body},Ra=0;function Qh(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(o){o&&Object.keys(o).forEach(function(s){var a=o[s];a!==void 0&&(t[s]=a)})}),t}function Zh(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.getContainer,n=e===void 0?Xh:e,r=t.motion,o=t.prefixCls,s=t.maxCount,a=t.className,i=t.style,l=t.onAllRemoved,u=t.stack,c=t.renderNotifications,d=to(t,Jh),f=p.useState(),h=Ke(f,2),g=h[0],m=h[1],v=p.useRef(),x=p.createElement(Yh,{container:g,ref:v,prefixCls:o,motion:r,maxCount:s,className:a,style:i,onAllRemoved:l,stack:u,renderNotifications:c}),b=p.useState([]),k=Ke(b,2),O=k[0],I=k[1],E=p.useMemo(function(){return{open:function(N){var S=Qh(d,N);(S.key===null||S.key===void 0)&&(S.key="rc-notification-".concat(Ra),Ra+=1),I(function(D){return[].concat(tn(D),[{type:"open",config:S}])})},close:function(N){I(function(S){return[].concat(tn(S),[{type:"close",key:N}])})},destroy:function(){I(function(N){return[].concat(tn(N),[{type:"destroy"}])})}}},[]);return p.useEffect(function(){m(n())}),p.useEffect(function(){v.current&&O.length&&(O.forEach(function(_){switch(_.type){case"open":v.current.open(_.config);break;case"close":v.current.close(_.key);break;case"destroy":v.current.destroy();break}}),I(function(_){return _.filter(function(N){return!O.includes(N)})}))},[O]),[E,x]}var ep={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const tp=ep;var np=function(e,n){return p.createElement(mn,qe({},e,{ref:n,icon:tp}))},rp=p.forwardRef(np);const op=rp,sp=ie.createContext(void 0),ap=sp,Dt=100,ip=10,fl=Dt*ip,hl={Modal:Dt,Drawer:Dt,Popover:Dt,Popconfirm:Dt,Tooltip:Dt,Tour:Dt},lp={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function cp(t){return t in hl}function ry(t,e){const[,n]=An(),r=ie.useContext(ap),o=cp(t);if(e!==void 0)return[e,e];let s=r??0;return o?(s+=(r?0:n.zIndexPopupBase)+hl[t],s=Math.min(s,n.zIndexPopupBase+fl)):s+=lp[t],[r===void 0?e:s,s]}const up=t=>{const{componentCls:e,iconCls:n,boxShadow:r,colorText:o,colorSuccess:s,colorError:a,colorWarning:i,colorInfo:l,fontSizeLG:u,motionEaseInOutCirc:c,motionDurationSlow:d,marginXS:f,paddingXS:h,borderRadiusLG:g,zIndexPopup:m,contentPadding:v,contentBg:x}=t,b=`${e}-notice`,k=new Oa("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:h,transform:"translateY(0)",opacity:1}}),O=new Oa("MessageMoveOut",{"0%":{maxHeight:t.height,padding:h,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),I={padding:h,textAlign:"center",[`${e}-custom-content`]:{display:"flex",alignItems:"center"},[`${e}-custom-content > ${n}`]:{marginInlineEnd:f,fontSize:u},[`${b}-content`]:{display:"inline-block",padding:v,background:x,borderRadius:g,boxShadow:r,pointerEvents:"all"},[`${e}-success > ${n}`]:{color:s},[`${e}-error > ${n}`]:{color:a},[`${e}-warning > ${n}`]:{color:i},[`${e}-info > ${n},
      ${e}-loading > ${n}`]:{color:l}};return[{[e]:Object.assign(Object.assign({},Fc(t)),{color:o,position:"fixed",top:f,width:"100%",pointerEvents:"none",zIndex:m,[`${e}-move-up`]:{animationFillMode:"forwards"},[`
        ${e}-move-up-appear,
        ${e}-move-up-enter
      `]:{animationName:k,animationDuration:d,animationPlayState:"paused",animationTimingFunction:c},[`
        ${e}-move-up-appear${e}-move-up-appear-active,
        ${e}-move-up-enter${e}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${e}-move-up-leave`]:{animationName:O,animationDuration:d,animationPlayState:"paused",animationTimingFunction:c},[`${e}-move-up-leave${e}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[e]:{[`${b}-wrapper`]:Object.assign({},I)}},{[`${e}-notice-pure-panel`]:Object.assign(Object.assign({},I),{padding:0,textAlign:"start"})}]},dp=t=>({zIndexPopup:t.zIndexPopupBase+fl+10,contentBg:t.colorBgElevated,contentPadding:`${(t.controlHeightLG-t.fontSize*t.lineHeight)/2}px ${t.paddingSM}px`}),pl=th("Message",t=>{const e=zs(t,{height:150});return[up(e)]},dp);var fp=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const hp={info:p.createElement(Rh,null),success:p.createElement(yh,null),error:p.createElement(Ch,null),warning:p.createElement(jh,null),loading:p.createElement(op,null)},ml=t=>{let{prefixCls:e,type:n,icon:r,children:o}=t;return p.createElement("div",{className:tt(`${e}-custom-content`,`${e}-${n}`)},r||hp[n],p.createElement("span",null,o))},pp=t=>{const{prefixCls:e,className:n,type:r,icon:o,content:s}=t,a=fp(t,["prefixCls","className","type","icon","content"]),{getPrefixCls:i}=p.useContext(eo),l=e||i("message"),u=cl(l),[c,d,f]=pl(l,u);return c(p.createElement(ul,Object.assign({},a,{prefixCls:l,className:tt(n,d,`${l}-notice-pure-panel`,f,u),eventKey:"pure",duration:null,content:p.createElement(ml,{prefixCls:l,type:r,icon:o},s)})))},mp=pp;function vp(t,e){return{motionName:e??`${t}-move-up`}}function Hs(t){let e;const n=new Promise(o=>{e=t(()=>{o(!0)})}),r=()=>{e==null||e()};return r.then=(o,s)=>n.then(o,s),r.promise=n,r}var yp=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const gp=8,wp=3,bp=t=>{let{children:e,prefixCls:n}=t;const r=cl(n),[o,s,a]=pl(n,r);return o(p.createElement(Vh,{classNames:{list:tt(s,a,r)}},e))},xp=(t,e)=>{let{prefixCls:n,key:r}=e;return p.createElement(bp,{prefixCls:n,key:r},t)},Cp=p.forwardRef((t,e)=>{const{top:n,prefixCls:r,getContainer:o,maxCount:s,duration:a=wp,rtl:i,transitionName:l,onAllRemoved:u}=t,{getPrefixCls:c,getPopupContainer:d,message:f,direction:h}=p.useContext(eo),g=r||c("message"),m=()=>({left:"50%",transform:"translateX(-50%)",top:n??gp}),v=()=>tt({[`${g}-rtl`]:i??h==="rtl"}),x=()=>vp(g,l),b=p.createElement("span",{className:`${g}-close-x`},p.createElement(Oh,{className:`${g}-close-icon`})),[k,O]=Zh({prefixCls:g,style:m,className:v,motion:x,closable:!1,closeIcon:b,duration:a,getContainer:()=>(o==null?void 0:o())||(d==null?void 0:d())||document.body,maxCount:s,onAllRemoved:u,renderNotifications:xp});return p.useImperativeHandle(e,()=>Object.assign(Object.assign({},k),{prefixCls:g,message:f})),O});let La=0;function vl(t){const e=p.useRef(null);return Mc(),[p.useMemo(()=>{const r=l=>{var u;(u=e.current)===null||u===void 0||u.close(l)},o=l=>{if(!e.current){const E=()=>{};return E.then=()=>{},E}const{open:u,prefixCls:c,message:d}=e.current,f=`${c}-notice`,{content:h,icon:g,type:m,key:v,className:x,style:b,onClose:k}=l,O=yp(l,["content","icon","type","key","className","style","onClose"]);let I=v;return I==null&&(La+=1,I=`antd-message-${La}`),Hs(E=>(u(Object.assign(Object.assign({},O),{key:I,content:p.createElement(ml,{prefixCls:c,type:m,icon:g},h),placement:"top",className:tt(m&&`${f}-${m}`,x,d==null?void 0:d.className),style:Object.assign(Object.assign({},d==null?void 0:d.style),b),onClose:()=>{k==null||k(),E()}})),()=>{r(I)}))},a={open:o,destroy:l=>{var u;l!==void 0?r(l):(u=e.current)===null||u===void 0||u.destroy()}};return["info","success","warning","error","loading"].forEach(l=>{const u=(c,d,f)=>{let h;c&&typeof c=="object"&&"content"in c?h=c:h={content:c};let g,m;typeof d=="function"?m=d:(g=d,m=f);const v=Object.assign(Object.assign({onClose:m,duration:g},h),{type:l});return o(v)};a[l]=u}),a},[]),p.createElement(Cp,Object.assign({key:"message-holder"},t,{ref:e}))]}function _p(t){return vl(t)}function Mn(){Mn=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(C,y,P){C[y]=P.value},s=typeof Symbol=="function"?Symbol:{},a=s.iterator||"@@iterator",i=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(C,y,P){return Object.defineProperty(C,y,{value:P,enumerable:!0,configurable:!0,writable:!0}),C[y]}try{u({},"")}catch{u=function(P,A,M){return P[A]=M}}function c(C,y,P,A){var M=y&&y.prototype instanceof x?y:x,F=Object.create(M.prototype),z=new B(A||[]);return o(F,"_invoke",{value:D(C,P,z)}),F}function d(C,y,P){try{return{type:"normal",arg:C.call(y,P)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",g="executing",m="completed",v={};function x(){}function b(){}function k(){}var O={};u(O,a,function(){return this});var I=Object.getPrototypeOf,E=I&&I(I(X([])));E&&E!==n&&r.call(E,a)&&(O=E);var _=k.prototype=x.prototype=Object.create(O);function N(C){["next","throw","return"].forEach(function(y){u(C,y,function(P){return this._invoke(y,P)})})}function S(C,y){function P(M,F,z,U){var K=d(C[M],C,F);if(K.type!=="throw"){var R=K.arg,J=R.value;return J&&_t(J)=="object"&&r.call(J,"__await")?y.resolve(J.__await).then(function(ne){P("next",ne,z,U)},function(ne){P("throw",ne,z,U)}):y.resolve(J).then(function(ne){R.value=ne,z(R)},function(ne){return P("throw",ne,z,U)})}U(K.arg)}var A;o(this,"_invoke",{value:function(F,z){function U(){return new y(function(K,R){P(F,z,K,R)})}return A=A?A.then(U,U):U()}})}function D(C,y,P){var A=f;return function(M,F){if(A===g)throw Error("Generator is already running");if(A===m){if(M==="throw")throw F;return{value:t,done:!0}}for(P.method=M,P.arg=F;;){var z=P.delegate;if(z){var U=j(z,P);if(U){if(U===v)continue;return U}}if(P.method==="next")P.sent=P._sent=P.arg;else if(P.method==="throw"){if(A===f)throw A=m,P.arg;P.dispatchException(P.arg)}else P.method==="return"&&P.abrupt("return",P.arg);A=g;var K=d(C,y,P);if(K.type==="normal"){if(A=P.done?m:h,K.arg===v)continue;return{value:K.arg,done:P.done}}K.type==="throw"&&(A=m,P.method="throw",P.arg=K.arg)}}}function j(C,y){var P=y.method,A=C.iterator[P];if(A===t)return y.delegate=null,P==="throw"&&C.iterator.return&&(y.method="return",y.arg=t,j(C,y),y.method==="throw")||P!=="return"&&(y.method="throw",y.arg=new TypeError("The iterator does not provide a '"+P+"' method")),v;var M=d(A,C.iterator,y.arg);if(M.type==="throw")return y.method="throw",y.arg=M.arg,y.delegate=null,v;var F=M.arg;return F?F.done?(y[C.resultName]=F.value,y.next=C.nextLoc,y.method!=="return"&&(y.method="next",y.arg=t),y.delegate=null,v):F:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,v)}function $(C){var y={tryLoc:C[0]};1 in C&&(y.catchLoc=C[1]),2 in C&&(y.finallyLoc=C[2],y.afterLoc=C[3]),this.tryEntries.push(y)}function L(C){var y=C.completion||{};y.type="normal",delete y.arg,C.completion=y}function B(C){this.tryEntries=[{tryLoc:"root"}],C.forEach($,this),this.reset(!0)}function X(C){if(C||C===""){var y=C[a];if(y)return y.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var P=-1,A=function M(){for(;++P<C.length;)if(r.call(C,P))return M.value=C[P],M.done=!1,M;return M.value=t,M.done=!0,M};return A.next=A}}throw new TypeError(_t(C)+" is not iterable")}return b.prototype=k,o(_,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:b,configurable:!0}),b.displayName=u(k,l,"GeneratorFunction"),e.isGeneratorFunction=function(C){var y=typeof C=="function"&&C.constructor;return!!y&&(y===b||(y.displayName||y.name)==="GeneratorFunction")},e.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,k):(C.__proto__=k,u(C,l,"GeneratorFunction")),C.prototype=Object.create(_),C},e.awrap=function(C){return{__await:C}},N(S.prototype),u(S.prototype,i,function(){return this}),e.AsyncIterator=S,e.async=function(C,y,P,A,M){M===void 0&&(M=Promise);var F=new S(c(C,y,P,A),M);return e.isGeneratorFunction(y)?F:F.next().then(function(z){return z.done?z.value:F.next()})},N(_),u(_,l,"Generator"),u(_,a,function(){return this}),u(_,"toString",function(){return"[object Generator]"}),e.keys=function(C){var y=Object(C),P=[];for(var A in y)P.push(A);return P.reverse(),function M(){for(;P.length;){var F=P.pop();if(F in y)return M.value=F,M.done=!1,M}return M.done=!0,M}},e.values=X,B.prototype={constructor:B,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!y)for(var P in this)P.charAt(0)==="t"&&r.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=t)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if(y.type==="throw")throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var P=this;function A(R,J){return z.type="throw",z.arg=y,P.next=R,J&&(P.method="next",P.arg=t),!!J}for(var M=this.tryEntries.length-1;M>=0;--M){var F=this.tryEntries[M],z=F.completion;if(F.tryLoc==="root")return A("end");if(F.tryLoc<=this.prev){var U=r.call(F,"catchLoc"),K=r.call(F,"finallyLoc");if(U&&K){if(this.prev<F.catchLoc)return A(F.catchLoc,!0);if(this.prev<F.finallyLoc)return A(F.finallyLoc)}else if(U){if(this.prev<F.catchLoc)return A(F.catchLoc,!0)}else{if(!K)throw Error("try statement without catch or finally");if(this.prev<F.finallyLoc)return A(F.finallyLoc)}}}},abrupt:function(y,P){for(var A=this.tryEntries.length-1;A>=0;--A){var M=this.tryEntries[A];if(M.tryLoc<=this.prev&&r.call(M,"finallyLoc")&&this.prev<M.finallyLoc){var F=M;break}}F&&(y==="break"||y==="continue")&&F.tryLoc<=P&&P<=F.finallyLoc&&(F=null);var z=F?F.completion:{};return z.type=y,z.arg=P,F?(this.method="next",this.next=F.finallyLoc,v):this.complete(z)},complete:function(y,P){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&P&&(this.next=P),v},finish:function(y){for(var P=this.tryEntries.length-1;P>=0;--P){var A=this.tryEntries[P];if(A.finallyLoc===y)return this.complete(A.completion,A.afterLoc),L(A),v}},catch:function(y){for(var P=this.tryEntries.length-1;P>=0;--P){var A=this.tryEntries[P];if(A.tryLoc===y){var M=A.completion;if(M.type==="throw"){var F=M.arg;L(A)}return F}}throw Error("illegal catch attempt")},delegateYield:function(y,P,A){return this.delegate={iterator:X(y),resultName:P,nextLoc:A},this.method==="next"&&(this.arg=t),v}},e}function Ba(t,e,n,r,o,s,a){try{var i=t[s](a),l=i.value}catch(u){return void n(u)}i.done?e(l):Promise.resolve(l).then(r,o)}function yl(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var s=t.apply(e,n);function a(l){Ba(s,r,o,a,i,"next",l)}function i(l){Ba(s,r,o,a,i,"throw",l)}a(void 0)})}}var tr=Oe({},Rc),Ep=tr.version,kp=tr.render,Sp=tr.unmountComponentAtNode,lo;try{var Op=Number((Ep||"").split(".")[0]);Op>=18&&(lo=tr.createRoot)}catch{}function Wa(t){var e=tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&_t(e)==="object"&&(e.usingClientEntryPoint=t)}var Mr="__rc_react_root__";function Ip(t,e){Wa(!0);var n=e[Mr]||lo(e);Wa(!1),n.render(t),e[Mr]=n}function Pp(t,e){kp(t,e)}function Np(t,e){if(lo){Ip(t,e);return}Pp(t,e)}function Dp(t){return Wo.apply(this,arguments)}function Wo(){return Wo=yl(Mn().mark(function t(e){return Mn().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve().then(function(){var o;(o=e[Mr])===null||o===void 0||o.unmount(),delete e[Mr]}));case 1:case"end":return r.stop()}},t)})),Wo.apply(this,arguments)}function jp(t){Sp(t)}function oy(t){return $o.apply(this,arguments)}function $o(){return $o=yl(Mn().mark(function t(e){return Mn().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(lo===void 0){r.next=2;break}return r.abrupt("return",Dp(e));case 2:jp(e);case 3:case"end":return r.stop()}},t)})),$o.apply(this,arguments)}const Ap=ie.createContext({});let We=null,At=t=>t(),Rn=[],Ln={};function $a(){const{getContainer:t,duration:e,rtl:n,maxCount:r,top:o}=Ln,s=(t==null?void 0:t())||document.body;return{getContainer:()=>s,duration:e,rtl:n,maxCount:r,top:o}}const Tp=ie.forwardRef((t,e)=>{const{messageConfig:n,sync:r}=t,{getPrefixCls:o}=p.useContext(eo),s=Ln.prefixCls||o("message"),a=p.useContext(Ap),[i,l]=vl(Object.assign(Object.assign(Object.assign({},n),{prefixCls:s}),a.message));return ie.useImperativeHandle(e,()=>{const u=Object.assign({},i);return Object.keys(u).forEach(c=>{u[c]=function(){return r(),i[c].apply(i,arguments)}}),{instance:u,sync:r}}),l}),Fp=ie.forwardRef((t,e)=>{const[n,r]=ie.useState($a),o=()=>{r($a)};ie.useEffect(o,[]);const s=Bc(),a=s.getRootPrefixCls(),i=s.getIconPrefixCls(),l=s.getTheme(),u=ie.createElement(Tp,{ref:e,sync:o,messageConfig:n});return ie.createElement(Lc,{prefixCls:a,iconPrefixCls:i,theme:l},s.holderRender?s.holderRender(u):u)});function co(){if(!We){const t=document.createDocumentFragment(),e={fragment:t};We=e,At(()=>{Np(ie.createElement(Fp,{ref:n=>{const{instance:r,sync:o}=n||{};Promise.resolve().then(()=>{!e.instance&&r&&(e.instance=r,e.sync=o,co())})}}),t)});return}We.instance&&(Rn.forEach(t=>{const{type:e,skipped:n}=t;if(!n)switch(e){case"open":{At(()=>{const r=We.instance.open(Object.assign(Object.assign({},Ln),t.config));r==null||r.then(t.resolve),t.setCloseFn(r)});break}case"destroy":At(()=>{We==null||We.instance.destroy(t.key)});break;default:At(()=>{var r;const o=(r=We.instance)[e].apply(r,tn(t.args));o==null||o.then(t.resolve),t.setCloseFn(o)})}}),Rn=[])}function Mp(t){Ln=Object.assign(Object.assign({},Ln),t),At(()=>{var e;(e=We==null?void 0:We.sync)===null||e===void 0||e.call(We)})}function Rp(t){const e=Hs(n=>{let r;const o={type:"open",config:t,resolve:n,setCloseFn:s=>{r=s}};return Rn.push(o),()=>{r?At(()=>{r()}):o.skipped=!0}});return co(),e}function Lp(t,e){const n=Hs(r=>{let o;const s={type:t,args:e,resolve:r,setCloseFn:a=>{o=a}};return Rn.push(s),()=>{o?At(()=>{o()}):s.skipped=!0}});return co(),n}const Bp=t=>{Rn.push({type:"destroy",key:t}),co()},Wp=["success","info","warning","error","loading"],$p={open:Rp,destroy:Bp,config:Mp,useMessage:_p,_InternalPanelDoNotUseOrYouWillBeFired:mp},gl=$p;Wp.forEach(t=>{gl[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Lp(t,n)}});const Kp=gl,Up="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Vt=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=Up[n[t]&63];return e};async function zp(t){console.warn("[workspace deprecated] getDB is deprecated",t);try{const e=await fetch(`/workspace/get_db?table=${t}`);return e.ok?await e.json():void 0}catch(e){console.error("Error fetching workspace:",e);return}}async function Vp(t,e){try{return await(await fetch("/workspace/update_file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:t,json_str:e})})).text()}catch(n){alert("Error saving workflow .json file: "+n),console.error("Error saving workspace:",n)}}async function wl(t,e=!1){try{return await(await fetch("/workspace/delete_file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:t,deleteEmptyFolder:e})})).text()}catch(n){console.error("Error deleting file:",n)}}const Hp="backup",Rr="workspace";let lr=null;function qp(){return new Promise((t,e)=>{const n=indexedDB.open("WorkspaceDB",3);n.onupgradeneeded=r=>{const o=r.target.result;o.objectStoreNames.contains(Rr)||o.createObjectStore(Rr,{keyPath:"id"})},n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{e(r.target.error)}})}async function Gp(){try{return lr==null&&(lr=await qp()),new Promise((t,e)=>{if(lr==null)return e("indexDB is null");const o=lr.transaction([Rr],"readonly").objectStore(Rr).get(Hp);o.onsuccess=()=>{o.result?t(o.result.value):t(void 0)},o.onerror=()=>e(o.error)})}catch(t){console.error("Error while reading from database:",t)}}async function Yp(){try{return await Gp()}catch(t){console.error("Error retrieving data from IndexedDB:",t)}}const oe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,me=Object.keys,xe=Array.isArray;function Ie(t,e){return typeof e!="object"||me(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||oe.Promise||(oe.Promise=Promise);const Bn=Object.getPrototypeOf,Jp={}.hasOwnProperty;function Me(t,e){return Jp.call(t,e)}function fn(t,e){typeof e=="function"&&(e=e(Bn(t))),(typeof Reflect>"u"?me:Reflect.ownKeys)(e).forEach(n=>{dt(t,n,e[n])})}const bl=Object.defineProperty;function dt(t,e,n,r){bl(t,e,Ie(n&&Me(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function rn(t){return{from:function(e){return t.prototype=Object.create(e.prototype),dt(t.prototype,"constructor",t),{extend:fn.bind(null,t.prototype)}}}}const Xp=Object.getOwnPropertyDescriptor;function qs(t,e){let n;return Xp(t,e)||(n=Bn(t))&&qs(n,e)}const Qp=[].slice;function Lr(t,e,n){return Qp.call(t,e,n)}function xl(t,e){return e(t)}function Cn(t){if(!t)throw new Error("Assertion Failed")}function Cl(t){oe.setImmediate?setImmediate(t):setTimeout(t,0)}function _l(t,e){return t.reduce((n,r,o)=>{var s=e(r,o);return s&&(n[s[0]]=s[1]),n},{})}function ft(t,e){if(Me(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,o=e.length;r<o;++r){var s=ft(t,e[r]);n.push(s)}return n}var a=e.indexOf(".");if(a!==-1){var i=t[e.substr(0,a)];return i===void 0?void 0:ft(i,e.substr(a+1))}}function He(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){Cn(typeof n!="string"&&"length"in n);for(var r=0,o=e.length;r<o;++r)He(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var a=e.substr(0,s),i=e.substr(s+1);if(i==="")n===void 0?xe(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var l=t[a];l&&Me(t,a)||(l=t[a]={}),He(l,i,n)}}else n===void 0?xe(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function El(t){var e={};for(var n in t)Me(t,n)&&(e[n]=t[n]);return e}const Zp=[].concat;function kl(t){return Zp.apply([],t)}const Sl="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(kl([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>oe[t]),em=Sl.map(t=>oe[t]);_l(Sl,t=>[t,!0]);let gt=null;function nr(t){gt=typeof WeakMap<"u"&&new WeakMap;const e=Ko(t);return gt=null,e}function Ko(t){if(!t||typeof t!="object")return t;let e=gt&&gt.get(t);if(e)return e;if(xe(t)){e=[],gt&&gt.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Ko(t[n]))}else if(em.indexOf(t.constructor)>=0)e=t;else{const s=Bn(t);for(var o in e=s===Object.prototype?{}:Object.create(s),gt&&gt.set(t,e),t)Me(t,o)&&(e[o]=Ko(t[o]))}return e}const{toString:tm}={};function Uo(t){return tm.call(t).slice(8,-1)}const zo=typeof Symbol<"u"?Symbol.iterator:"@@iterator",nm=typeof zo=="symbol"?function(t){var e;return t!=null&&(e=t[zo])&&e.apply(t)}:function(){return null},en={};function ct(t){var e,n,r,o;if(arguments.length===1){if(xe(t))return t.slice();if(this===en&&typeof t=="string")return[t];if(o=nm(t)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Gs=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var st=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ol(t,e){st=t,Il=e}var Il=()=>!0;const rm=!new Error("").stack;function Gt(){if(rm)try{throw Gt.arguments,new Error}catch(t){return t}return new Error}function Vo(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Il).map(r=>`
`+r).join("")):""}var Pl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ys=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Pl),om={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function on(t,e){this._e=Gt(),this.name=t,this.message=e}function Nl(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,o)=>o.indexOf(n)===r).join(`
`)}function Br(t,e,n,r){this._e=Gt(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Nl(t,e)}function In(t,e){this._e=Gt(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Nl(t,e)}rn(on).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Vo(this._e,2))}},toString:function(){return this.name+": "+this.message}}),rn(Br).from(on),rn(In).from(on);var Js=Ys.reduce((t,e)=>(t[e]=e+"Error",t),{});const sm=on;var G=Ys.reduce((t,e)=>{var n=e+"Error";function r(o,s){this._e=Gt(),this.name=n,o?typeof o=="string"?(this.message=`${o}${s?`
 `+s:""}`,this.inner=s||null):typeof o=="object"&&(this.message=`${o.name} ${o.message}`,this.inner=o):(this.message=om[e]||n,this.inner=null)}return rn(r).from(sm),t[e]=r,t},{});G.Syntax=SyntaxError,G.Type=TypeError,G.Range=RangeError;var Ka=Pl.reduce((t,e)=>(t[e+"Error"]=G[e],t),{}),br=Ys.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=G[e]),t),{});function re(){}function Wn(t){return t}function am(t,e){return t==null||t===Wn?e:function(n){return e(t(n))}}function Ht(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function im(t,e){return t===re?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ht(r,this.onsuccess):r),o&&(this.onerror=this.onerror?Ht(o,this.onerror):o),s!==void 0?s:n}}function lm(t,e){return t===re?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ht(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ht(r,this.onerror):r)}}function cm(t,e){return t===re?e:function(n){var r=t.apply(this,arguments);Ie(n,r);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Ht(o,this.onsuccess):o),s&&(this.onerror=this.onerror?Ht(s,this.onerror):s),r===void 0?a===void 0?void 0:a:Ie(r,a)}}function um(t,e){return t===re?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Xs(t,e){return t===re?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,s=new Array(o);o--;)s[o]=arguments[o];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}br.ModifyError=Br,br.DexieError=on,br.BulkError=In;var $n={};const Dl=100,[Ho,Wr,qo]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Bn(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Bn(e),t]})(),jl=Wr&&Wr.then,xr=Ho&&Ho.constructor,Qs=!!qo;var Go=!1,dm=qo?()=>{qo.then(cr)}:oe.setImmediate?setImmediate.bind(null,cr):oe.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{cr(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(cr,0)},Pn=function(t,e){_n.push([t,e]),$r&&(dm(),$r=!1)},Yo=!0,$r=!0,Wt=[],Cr=[],Jo=null,Xo=Wn,sn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Va,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Va(t[0],t[1])}catch{}})}},V=sn,_n=[],$t=0,_r=[];function W(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=re,this._lib=!1;var e=this._PSD=V;if(st&&(this._stackHolder=Gt(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==$n)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Zo(this,this._value))}this._state=null,this._value=null,++e.ref,Tl(this,t)}const Qo={get:function(){var t=V,e=Kr;function n(r,o){var s=!t.global&&(t!==V||e!==Kr);const a=s&&!pt();var i=new W((l,u)=>{Zs(this,new Al(Ur(r,t,s,a),Ur(o,t,s,a),l,u,t))});return st&&Rl(i,this),i}return n.prototype=$n,n},set:function(t){dt(this,"then",t&&t.prototype===$n?Qo:{get:function(){return t},set:Qo.set})}};function Al(t,e,n,r,o){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=o}function Tl(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&rr();n&&typeof n.then=="function"?Tl(t,(o,s)=>{n instanceof W?n._then(o,s):n.then(o,s)}):(t._state=!0,t._value=n,Fl(t)),r&&or()}},Zo.bind(null,t))}catch(n){Zo(t,n)}}function Zo(t,e){if(Cr.push(e),t._state===null){var n=t._lib&&rr();e=Xo(e),t._state=!1,t._value=e,st&&e!==null&&typeof e=="object"&&!e._promise&&function(r,o,s){try{r.apply(null,s)}catch(a){o&&o(a)}}(()=>{var r=qs(e,"stack");e._promise=t,dt(e,"stack",{get:()=>Go?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Wt.some(o=>o._value===r._value)||Wt.push(r)}(t),Fl(t),n&&or()}}function Fl(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Zs(t,e[n]);var o=t._PSD;--o.ref||o.finalize(),$t===0&&(++$t,Pn(()=>{--$t==0&&ea()},[]))}function Zs(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++$t,Pn(fm,[n,t,e])}else t._listeners.push(e)}function fm(t,e,n){try{Jo=e;var r,o=e._value;e._state?r=t(o):(Cr.length&&(Cr=[]),r=t(o),Cr.indexOf(o)===-1&&function(s){for(var a=Wt.length;a;)if(Wt[--a]._value===s._value)return void Wt.splice(a,1)}(e)),n.resolve(r)}catch(s){n.reject(s)}finally{Jo=null,--$t==0&&ea(),--n.psd.ref||n.psd.finalize()}}function Ml(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var o,s,a=t._value;a!=null?(o=a.name||"Error",s=a.message||a,r=Vo(a,0)):(o=a,s=""),e.push(o+(s?": "+s:"")+r)}return st&&((r=Vo(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&Ml(t._prev,e,n)),e}function Rl(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function cr(){rr()&&or()}function rr(){var t=Yo;return Yo=!1,$r=!1,t}function or(){var t,e,n;do for(;_n.length>0;)for(t=_n,_n=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(_n.length>0);Yo=!0,$r=!0}function ea(){var t=Wt;Wt=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=_r.slice(0),n=e.length;n;)e[--n]()}function ur(t){return new W($n,!1,t)}function ae(t,e){var n=V;return function(){var r=rr(),o=V;try{return kt(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{kt(o,!1),r&&or()}}}fn(W.prototype,{then:Qo,_then:function(t,e){Zs(this,new Al(null,null,t,e,V))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):ur(r)):this.then(null,r=>r&&r.name===e?n(r):ur(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),ur(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Go=!0;var t=Ml(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Go=!1}}},timeout:function(t,e){return t<1/0?new W((n,r)=>{var o=setTimeout(()=>r(new G.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,o))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&dt(W.prototype,Symbol.toStringTag,"Dexie.Promise"),sn.env=Ll(),fn(W,{all:function(){var t=ct.apply(null,arguments).map(dr);return new W(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((o,s)=>W.resolve(o).then(a=>{t[s]=a,--r||e(t)},n))})},resolve:t=>{if(t instanceof W)return t;if(t&&typeof t.then=="function")return new W((n,r)=>{t.then(n,r)});var e=new W($n,!0,t);return Rl(e,Jo),e},reject:ur,race:function(){var t=ct.apply(null,arguments).map(dr);return new W((e,n)=>{t.map(r=>W.resolve(r).then(e,n))})},PSD:{get:()=>V,set:t=>V=t},totalEchoes:{get:()=>Kr},newPSD:Et,usePSD:yn,scheduler:{get:()=>Pn,set:t=>{Pn=t}},rejectionMapper:{get:()=>Xo,set:t=>{Xo=t}},follow:(t,e)=>new W((n,r)=>Et((o,s)=>{var a=V;a.unhandleds=[],a.onunhandled=s,a.finalize=Ht(function(){(function(i){function l(){i(),_r.splice(_r.indexOf(l),1)}_r.push(l),++$t,Pn(()=>{--$t==0&&ea()},[])})(()=>{this.unhandleds.length===0?o():s(this.unhandleds[0])})},a.finalize),t()},e,n,r))}),xr&&(xr.allSettled&&dt(W,"allSettled",function(){const t=ct.apply(null,arguments).map(dr);return new W(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((o,s)=>W.resolve(o).then(a=>r[s]={status:"fulfilled",value:a},a=>r[s]={status:"rejected",reason:a}).then(()=>--n||e(r)))})}),xr.any&&typeof AggregateError<"u"&&dt(W,"any",function(){const t=ct.apply(null,arguments).map(dr);return new W((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const o=new Array(r);t.forEach((s,a)=>W.resolve(s).then(i=>e(i),i=>{o[a]=i,--r||n(new AggregateError(o))}))})}));const be={awaits:0,echoes:0,id:0};var hm=0,Er=[],Co=0,Kr=0,pm=0;function Et(t,e,n,r){var o=V,s=Object.create(o);s.parent=o,s.ref=0,s.global=!1,s.id=++pm;var a=sn.env;s.env=Qs?{Promise:W,PromiseProp:{value:W,configurable:!0,writable:!0},all:W.all,race:W.race,allSettled:W.allSettled,any:W.any,resolve:W.resolve,reject:W.reject,nthen:Ua(a.nthen,s),gthen:Ua(a.gthen,s)}:{},e&&Ie(s,e),++o.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var i=yn(s,t,n,r);return s.ref===0&&s.finalize(),i}function vn(){return be.id||(be.id=++hm),++be.awaits,be.echoes+=Dl,be.id}function pt(){return!!be.awaits&&(--be.awaits==0&&(be.id=0),be.echoes=be.awaits*Dl,!0)}function dr(t){return be.echoes&&t&&t.constructor===xr?(vn(),t.then(e=>(pt(),e),e=>(pt(),ve(e)))):t}function mm(t){++Kr,be.echoes&&--be.echoes!=0||(be.echoes=be.id=0),Er.push(V),kt(t,!0)}function vm(){var t=Er[Er.length-1];Er.pop(),kt(t,!1)}function kt(t,e){var n=V;if((e?!be.echoes||Co++&&t===V:!Co||--Co&&t===V)||Bl(e?mm.bind(null,t):vm),t!==V&&(V=t,n===sn&&(sn.env=Ll()),Qs)){var r=sn.env.Promise,o=t.env;Wr.then=o.nthen,r.prototype.then=o.gthen,(n.global||t.global)&&(Object.defineProperty(oe,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function Ll(){var t=oe.Promise;return Qs?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(oe,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Wr.then,gthen:t.prototype.then}:{}}function yn(t,e,n,r,o){var s=V;try{return kt(t,!0),e(n,r,o)}finally{kt(s,!1)}}function Bl(t){jl.call(Ho,t)}function Ur(t,e,n,r){return typeof t!="function"?t:function(){var o=V;n&&vn(),kt(e,!0);try{return t.apply(this,arguments)}finally{kt(o,!1),r&&Bl(pt)}}}function Ua(t,e){return function(n,r){return t.call(this,Ur(n,e),Ur(r,e))}}(""+jl).indexOf("[native code]")===-1&&(vn=pt=re);const za="unhandledrejection";function Va(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,o={promise:e,reason:t};if(oe.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(za,!0,!0),Ie(r,o)):oe.CustomEvent&&Ie(r=new CustomEvent(za,{detail:o}),o),r&&oe.dispatchEvent&&(dispatchEvent(r),!oe.PromiseRejectionEvent&&oe.onunhandledrejection))try{oe.onunhandledrejection(r)}catch{}st&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var ve=W.reject;function es(t,e,n,r){if(t.idbdb&&(t._state.openComplete||V.letThrough||t._vip)){var o=t._createTransaction(e,n,t._dbSchema);try{o.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===Js.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>es(t,e,n,r))):ve(s)}return o._promise(e,(s,a)=>Et(()=>(V.trans=o,r(s,a,o)))).then(s=>o._completion.then(()=>s))}if(t._state.openComplete)return ve(new G.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return ve(new G.DatabaseClosed);t.open().catch(re)}return t._state.dbReadyPromise.then(()=>es(t,e,n,r))}const Ha="3.2.4",Tt="￿",ts=-1/0,it="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wl="String expected.",Nn=[],uo=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ym=uo,gm=uo,$l=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),fo="__dbnames",_o="readonly",Eo="readwrite";function qt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Kl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function fr(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=nr(e))[t],e)}class wm{_trans(e,n,r){const o=this._tx||V.trans,s=this.name;function a(l,u,c){if(!c.schema[s])throw new G.NotFound("Table "+s+" not part of transaction");return n(c.idbtrans,c)}const i=rr();try{return o&&o.db===this.db?o===V.trans?o._promise(e,a,r):Et(()=>o._promise(e,a,r),{trans:o,transless:V.transless||V}):es(this.db,e,[this.name],a)}finally{i&&or()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(o=>this.hook.reading.fire(o))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(xe(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=me(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&n.every(c=>u.keyPath.indexOf(c)>=0)&&u.keyPath.every(c=>n.indexOf(c)>=0))[0];if(r&&this.db._maxKey!==Tt)return this.where(r.name).equals(r.keyPath.map(u=>e[u]));!r&&st&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:o}=this.schema,s=this.db._deps.indexedDB;function a(u,c){try{return s.cmp(u,c)===0}catch{return!1}}const[i,l]=n.reduce(([u,c],d)=>{const f=o[d],h=e[d];return[u||f,u||!f?qt(c,f&&f.multi?g=>{const m=ft(g,d);return xe(m)&&m.some(v=>a(h,v))}:g=>a(h,ft(g,d))):c]},[null,null]);return i?this.where(i.name).equals(e[i.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,xe(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const o=Object.create(e.prototype);for(var s in r)if(Me(r,s))try{o[s]=r[s]}catch{}return o};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){Ie(this,e)})}add(e,n){const{auto:r,keyPath:o}=this.schema.primKey;let s=e;return o&&r&&(s=fr(o)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[s]})).then(a=>a.numFailures?W.reject(a.failures[0]):a.lastResult).then(a=>{if(o)try{He(e,o,a)}catch{}return a})}update(e,n){if(typeof e!="object"||xe(e))return this.where(":id").equals(e).modify(n);{const r=ft(e,this.schema.primKey.keyPath);if(r===void 0)return ve(new G.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?me(n).forEach(o=>{He(e,o,n[o])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:o}=this.schema.primKey;let s=e;return o&&r&&(s=fr(o)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[s],keys:n!=null?[n]:null})).then(a=>a.numFailures?W.reject(a.failures[0]):a.lastResult).then(a=>{if(o)try{He(e,o,a)}catch{}return a})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?W.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Kl})).then(e=>e.numFailures?W.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(o=>this.hook.reading.fire(o))))}bulkAdd(e,n,r){const o=Array.isArray(n)?n:void 0,s=(r=r||(o?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:i,keyPath:l}=this.schema.primKey;if(l&&o)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let c=l&&i?e.map(fr(l)):e;return this.core.mutate({trans:a,type:"add",keys:o,values:c,wantResults:s}).then(({numFailures:d,results:f,lastResult:h,failures:g})=>{if(d===0)return s?f:h;throw new In(`${this.name}.bulkAdd(): ${d} of ${u} operations failed`,g)})})}bulkPut(e,n,r){const o=Array.isArray(n)?n:void 0,s=(r=r||(o?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:i,keyPath:l}=this.schema.primKey;if(l&&o)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let c=l&&i?e.map(fr(l)):e;return this.core.mutate({trans:a,type:"put",keys:o,values:c,wantResults:s}).then(({numFailures:d,results:f,lastResult:h,failures:g})=>{if(d===0)return s?f:h;throw new In(`${this.name}.bulkPut(): ${d} of ${u} operations failed`,g)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:o,failures:s})=>{if(r===0)return o;throw new In(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function Dn(t){var e={},n=function(a,i){if(i){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return e[a].subscribe.apply(null,u),t}if(typeof a=="string")return e[a]};n.addEventType=s;for(var r=1,o=arguments.length;r<o;++r)s(arguments[r]);return n;function s(a,i,l){if(typeof a!="object"){var u;i||(i=um),l||(l=re);var c={subscribers:[],fire:l,subscribe:function(d){c.subscribers.indexOf(d)===-1&&(c.subscribers.push(d),c.fire=i(c.fire,d))},unsubscribe:function(d){c.subscribers=c.subscribers.filter(function(f){return f!==d}),c.fire=c.subscribers.reduce(i,l)}};return e[a]=n[a]=c,c}me(u=a).forEach(function(d){var f=u[d];if(xe(f))s(d,u[d][0],u[d][1]);else{if(f!=="asap")throw new G.InvalidArgument("Invalid event config");var h=s(d,Wn,function(){for(var g=arguments.length,m=new Array(g);g--;)m[g]=arguments[g];h.subscribers.forEach(function(v){Cl(function(){v.apply(null,m)})})})}})}}function xn(t,e){return rn(e).from({prototype:t}),e}function Qt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function ko(t,e){t.filter=qt(t.filter,e)}function So(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>qt(r(),e()):e,t.justLimit=n&&!r}function kr(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new G.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function qa(t,e,n){const r=kr(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function hr(t,e,n,r){const o=t.replayFilter?qt(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},a=(i,l,u)=>{if(!o||o(l,u,f=>l.stop(f),f=>l.fail(f))){var c=l.primaryKey,d=""+c;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(c)),Me(s,d)||(s[d]=!0,e(i,l,u))}};return Promise.all([t.or._iterate(a,n),Ga(qa(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}return Ga(qa(t,r,n),qt(t.algorithm,o),e,!t.keysOnly&&t.valueMapper)}function Ga(t,e,n,r){var o=ae(r?(s,a,i)=>n(r(s),a,i):n);return t.then(s=>{if(s)return s.start(()=>{var a=()=>s.continue();e&&!e(s,i=>a=i,i=>{s.stop(i),a=re},i=>{s.fail(i),a=re})||o(s.value,s,i=>a=i),a()})})}function Se(t,e){try{const n=Ya(t),r=Ya(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(o,s){const a=o.length,i=s.length,l=a<i?a:i;for(let u=0;u<l;++u)if(o[u]!==s[u])return o[u]<s[u]?-1:1;return a===i?0:a<i?-1:1}(Ja(t),Ja(e));case"Array":return function(o,s){const a=o.length,i=s.length,l=a<i?a:i;for(let u=0;u<l;++u){const c=Se(o[u],s[u]);if(c!==0)return c}return a===i?0:a<i?-1:1}(t,e)}}catch{}return NaN}function Ya(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Uo(t);return n==="ArrayBuffer"?"binary":n}function Ja(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class bm{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,ve.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,ve.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=qt(n.algorithm,e)}_iterate(e,n){return hr(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Ie(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>hr(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,o=r.table.core;if(Qt(r,!0))return o.count({trans:n,query:{index:kr(r,o.schema),range:r.range}}).then(a=>Math.min(a,r.limit));var s=0;return hr(r,()=>(++s,!1),n,o).then(()=>s)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),o=r[0],s=r.length-1;function a(u,c){return c?a(u[r[c]],c-1):u[o]}var i=this._ctx.dir==="next"?1:-1;function l(u,c){var d=a(u,s),f=a(c,s);return d<f?-i:d>f?i:0}return this.toArray(function(u){return u.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&Qt(r,!0)&&r.limit>0){const{valueMapper:o}=r,s=kr(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:a})=>o?a.map(o):a)}{const o=[];return hr(r,s=>o.push(s),n,r.table.core).then(()=>o)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Qt(n)?So(n,()=>{var r=e;return(o,s)=>r===0||(r===1?(--r,!1):(s(()=>{o.advance(r),r=0}),!1))}):So(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),So(this._ctx,()=>{var n=e;return function(r,o,s){return--n<=0&&o(s),n>=0}},!0),this}until(e,n){return ko(this._ctx,function(r,o,s){return!e(r.value)||(o(s),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return ko(this._ctx,function(o){return e(o.value)}),n=this._ctx,r=e,n.isMatch=qt(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.key,o)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.primaryKey,o)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Qt(n,!0)&&n.limit>0)return this._read(o=>{var s=kr(n,n.table.core.schema);return n.table.core.query({trans:o,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:o})=>o).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return ko(this._ctx,function(o){var s=o.primaryKey.toString(),a=Me(r,s);return r[s]=!0,!a}),this}modify(e){var n=this._ctx;return this._write(r=>{var o;if(typeof e=="function")o=e;else{var s=me(e),a=s.length;o=function(m){for(var v=!1,x=0;x<a;++x){var b=s[x],k=e[b];ft(m,b)!==k&&(He(m,b,k),v=!0)}return v}}const i=n.table.core,{outbound:l,extractKey:u}=i.schema.primaryKey,c=this.db._options.modifyChunkSize||200,d=[];let f=0;const h=[],g=(m,v)=>{const{failures:x,numFailures:b}=v;f+=m-b;for(let k of me(x))d.push(x[k])};return this.clone().primaryKeys().then(m=>{const v=x=>{const b=Math.min(c,m.length-x);return i.getMany({trans:r,keys:m.slice(x,x+b),cache:"immutable"}).then(k=>{const O=[],I=[],E=l?[]:null,_=[];for(let S=0;S<b;++S){const D=k[S],j={value:nr(D),primKey:m[x+S]};o.call(j,j.value,j)!==!1&&(j.value==null?_.push(m[x+S]):l||Se(u(D),u(j.value))===0?(I.push(j.value),l&&E.push(m[x+S])):(_.push(m[x+S]),O.push(j.value)))}const N=Qt(n)&&n.limit===1/0&&(typeof e!="function"||e===Oo)&&{index:n.index,range:n.range};return Promise.resolve(O.length>0&&i.mutate({trans:r,type:"add",values:O}).then(S=>{for(let D in S.failures)_.splice(parseInt(D),1);g(O.length,S)})).then(()=>(I.length>0||N&&typeof e=="object")&&i.mutate({trans:r,type:"put",keys:E,values:I,criteria:N,changeSpec:typeof e!="function"&&e}).then(S=>g(I.length,S))).then(()=>(_.length>0||N&&e===Oo)&&i.mutate({trans:r,type:"delete",keys:_,criteria:N}).then(S=>g(_.length,S))).then(()=>m.length>x+b&&v(x+c))})};return v(0).then(()=>{if(d.length>0)throw new Br("Error modifying one or more objects",d,f,h);return m.length})})})}delete(){var e=this._ctx,n=e.range;return Qt(e)&&(e.isPrimKey&&!gm||n.type===3)?this._write(r=>{const{primaryKey:o}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:o,range:s}}).then(a=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:i,lastResult:l,results:u,numFailures:c})=>{if(c)throw new Br("Could not delete some values",Object.keys(i).map(d=>i[d]),a-c);return a-c}))}):this.modify(Oo)}}const Oo=(t,e)=>e.value=null;function xm(t,e){return t<e?-1:t===e?0:1}function Cm(t,e){return t>e?-1:t===e?0:1}function De(t,e,n){var r=t instanceof zl?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Zt(t){return new t.Collection(t,()=>Ul("")).limit(0)}function _m(t,e,n,r,o,s){for(var a=Math.min(t.length,r.length),i=-1,l=0;l<a;++l){var u=e[l];if(u!==r[l])return o(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):o(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):i>=0?t.substr(0,i)+e[i]+n.substr(i+1):null;o(t[l],u)<0&&(i=l)}return a<r.length&&s==="next"?t+n.substr(t.length):a<t.length&&s==="prev"?t.substr(0,n.length):i<0?null:t.substr(0,i)+r[i]+n.substr(i+1)}function pr(t,e,n,r){var o,s,a,i,l,u,c,d=n.length;if(!n.every(m=>typeof m=="string"))return De(t,Wl);function f(m){o=function(x){return x==="next"?b=>b.toUpperCase():b=>b.toLowerCase()}(m),s=function(x){return x==="next"?b=>b.toLowerCase():b=>b.toUpperCase()}(m),a=m==="next"?xm:Cm;var v=n.map(function(x){return{lower:s(x),upper:o(x)}}).sort(function(x,b){return a(x.lower,b.lower)});i=v.map(function(x){return x.upper}),l=v.map(function(x){return x.lower}),u=m,c=m==="next"?"":r}f("next");var h=new t.Collection(t,()=>yt(i[0],l[d-1]+r));h._ondirectionchange=function(m){f(m)};var g=0;return h._addAlgorithm(function(m,v,x){var b=m.key;if(typeof b!="string")return!1;var k=s(b);if(e(k,l,g))return!0;for(var O=null,I=g;I<d;++I){var E=_m(b,k,i[I],l[I],a,u);E===null&&O===null?g=I+1:(O===null||a(O,E)>0)&&(O=E)}return v(O!==null?function(){m.continue(O+c)}:x),!1}),h}function yt(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Ul(t){return{type:1,lower:t,upper:t}}class zl{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,o){r=r!==!1,o=o===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||o)&&(!r||!o)?Zt(this):new this.Collection(this,()=>yt(e,n,!r,!o))}catch{return De(this,it)}}equals(e){return e==null?De(this,it):new this.Collection(this,()=>Ul(e))}above(e){return e==null?De(this,it):new this.Collection(this,()=>yt(e,void 0,!0))}aboveOrEqual(e){return e==null?De(this,it):new this.Collection(this,()=>yt(e,void 0,!1))}below(e){return e==null?De(this,it):new this.Collection(this,()=>yt(void 0,e,!1,!0))}belowOrEqual(e){return e==null?De(this,it):new this.Collection(this,()=>yt(void 0,e))}startsWith(e){return typeof e!="string"?De(this,Wl):this.between(e,e+Tt,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):pr(this,(n,r)=>n.indexOf(r[0])===0,[e],Tt)}equalsIgnoreCase(e){return pr(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=ct.apply(en,arguments);return e.length===0?Zt(this):pr(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=ct.apply(en,arguments);return e.length===0?Zt(this):pr(this,(n,r)=>r.some(o=>n.indexOf(o)===0),e,Tt)}anyOf(){const e=ct.apply(en,arguments);let n=this._cmp;try{e.sort(n)}catch{return De(this,it)}if(e.length===0)return Zt(this);const r=new this.Collection(this,()=>yt(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let o=0;return r._addAlgorithm((s,a,i)=>{const l=s.key;for(;n(l,e[o])>0;)if(++o,o===e.length)return a(i),!1;return n(l,e[o])===0||(a(()=>{s.continue(e[o])}),!1)}),r}notEqual(e){return this.inAnyRange([[ts,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=ct.apply(en,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return De(this,it)}const n=e.reduce((r,o)=>r?r.concat([[r[r.length-1][1],o]]):[[ts,o]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,o=this._ascending,s=this._descending,a=this._min,i=this._max;if(e.length===0)return Zt(this);if(!e.every(b=>b[0]!==void 0&&b[1]!==void 0&&o(b[0],b[1])<=0))return De(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);const l=!n||n.includeLowers!==!1,u=n&&n.includeUppers===!0;let c,d=o;function f(b,k){return d(b[0],k[0])}try{c=e.reduce(function(b,k){let O=0,I=b.length;for(;O<I;++O){const E=b[O];if(r(k[0],E[1])<0&&r(k[1],E[0])>0){E[0]=a(E[0],k[0]),E[1]=i(E[1],k[1]);break}}return O===I&&b.push(k),b},[]),c.sort(f)}catch{return De(this,it)}let h=0;const g=u?b=>o(b,c[h][1])>0:b=>o(b,c[h][1])>=0,m=l?b=>s(b,c[h][0])>0:b=>s(b,c[h][0])>=0;let v=g;const x=new this.Collection(this,()=>yt(c[0][0],c[c.length-1][1],!l,!u));return x._ondirectionchange=b=>{b==="next"?(v=g,d=o):(v=m,d=s),c.sort(f)},x._addAlgorithm((b,k,O)=>{for(var I=b.key;v(I);)if(++h,h===c.length)return k(O),!1;return!!function(E){return!g(E)&&!m(E)}(I)||(this._cmp(I,c[h][1])===0||this._cmp(I,c[h][0])===0||k(()=>{d===o?b.continue(c[h][0]):b.continue(c[h][1])}),!1)}),x}startsWithAnyOf(){const e=ct.apply(en,arguments);return e.every(n=>typeof n=="string")?e.length===0?Zt(this):this.inAnyRange(e.map(n=>[n,n+Tt])):De(this,"startsWithAnyOf() only works with strings")}}function et(t){return ae(function(e){return Kn(e),t(e.target.error),!1})}function Kn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Un="storagemutated",xt="x-storagemutated-1",St=Dn(null,Un);class Em{_lock(){return Cn(!V.global),++this._reculock,this._reculock!==1||V.global||(V.lockOwnerFor=this),this}_unlock(){if(Cn(!V.global),--this._reculock==0)for(V.global||(V.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{yn(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&V.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Cn(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new G.DatabaseClosed(r);case"MissingAPIError":throw new G.MissingAPI(r.message,r);default:throw new G.OpenFailed(r)}if(!this.active)throw new G.TransactionInactive;return Cn(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ae(o=>{Kn(o),this._reject(e.error)}),e.onabort=ae(o=>{Kn(o),this.active&&this._reject(new G.Abort(e.error)),this.active=!1,this.on("abort").fire(o)}),e.oncomplete=ae(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&St.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return ve(new G.ReadOnly("Transaction is readonly"));if(!this.active)return ve(new G.TransactionInactive);if(this._locked())return new W((s,a)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,a)},V])});if(r)return Et(()=>{var s=new W((a,i)=>{this._lock();const l=n(a,i,this);l&&l.then&&l.then(a,i)});return s.finally(()=>this._unlock()),s._lib=!0,s});var o=new W((s,a)=>{var i=n(s,a,this);i&&i.then&&i.then(s,a)});return o._lib=!0,o}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=W.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var o=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(o.get(-1/0).onsuccess=a)})()}var s=n._waitingFor;return new W((a,i)=>{r.then(l=>n._waitingQueue.push(ae(a.bind(null,l))),l=>n._waitingQueue.push(ae(i.bind(null,l)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new G.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Me(n,e))return n[e];const r=this.schema[e];if(!r)throw new G.NotFound("Table "+e+" not part of transaction");const o=new this.db.Table(e,r,this);return o.core=this.db.core.table(e),n[e]=o,o}}function ns(t,e,n,r,o,s,a){return{name:t,keyPath:e,unique:n,multi:r,auto:o,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(o?"++":"")+Vl(e)}}function Vl(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Hl(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:_l(n,r=>[r.name,r])}}let zn=t=>{try{return t.only([[]]),zn=()=>[[]],[[]]}catch{return zn=()=>Tt,Tt}};function rs(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>ft(r,e)}(t):e=>ft(e,t)}function Xa(t){return[].slice.call(t)}let km=0;function jn(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Sm(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:c,lowerOpen:d,upperOpen:f}=l;return u===void 0?c===void 0?null:e.upperBound(c,!!f):c===void 0?e.lowerBound(u,!!d):e.bound(u,c,!!d,!!f)}const{schema:o,hasGetAll:s}=function(l,u){const c=Xa(l.objectStoreNames);return{schema:{name:l.name,tables:c.map(d=>u.objectStore(d)).map(d=>{const{keyPath:f,autoIncrement:h}=d,g=xe(f),m=f==null,v={},x={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m,compound:g,keyPath:f,autoIncrement:h,unique:!0,extractKey:rs(f)},indexes:Xa(d.indexNames).map(b=>d.index(b)).map(b=>{const{name:k,unique:O,multiEntry:I,keyPath:E}=b,_={name:k,compound:xe(E),keyPath:E,unique:O,multiEntry:I,extractKey:rs(E)};return v[jn(E)]=_,_}),getIndexByKeyPath:b=>v[jn(b)]};return v[":id"]=x.primaryKey,f!=null&&(v[jn(f)]=x.primaryKey),x})},hasGetAll:c.length>0&&"getAll"in u.objectStore(c[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),a=o.tables.map(l=>function(u){const c=u.name;return{name:c,schema:u,mutate:function({trans:d,type:f,keys:h,values:g,range:m}){return new Promise((v,x)=>{v=ae(v);const b=d.objectStore(c),k=b.keyPath==null,O=f==="put"||f==="add";if(!O&&f!=="delete"&&f!=="deleteRange")throw new Error("Invalid operation type: "+f);const{length:I}=h||g||{length:1};if(h&&g&&h.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(I===0)return v({numFailures:0,failures:{},results:[],lastResult:void 0});let E;const _=[],N=[];let S=0;const D=$=>{++S,Kn($)};if(f==="deleteRange"){if(m.type===4)return v({numFailures:S,failures:N,results:[],lastResult:void 0});m.type===3?_.push(E=b.clear()):_.push(E=b.delete(r(m)))}else{const[$,L]=O?k?[g,h]:[g,null]:[h,null];if(O)for(let B=0;B<I;++B)_.push(E=L&&L[B]!==void 0?b[f]($[B],L[B]):b[f]($[B])),E.onerror=D;else for(let B=0;B<I;++B)_.push(E=b[f]($[B])),E.onerror=D}const j=$=>{const L=$.target.result;_.forEach((B,X)=>B.error!=null&&(N[X]=B.error)),v({numFailures:S,failures:N,results:f==="delete"?h:_.map(B=>B.result),lastResult:L})};E.onerror=$=>{D($),j($)},E.onsuccess=j})},getMany:({trans:d,keys:f})=>new Promise((h,g)=>{h=ae(h);const m=d.objectStore(c),v=f.length,x=new Array(v);let b,k=0,O=0;const I=_=>{const N=_.target;x[N._pos]=N.result,++O===k&&h(x)},E=et(g);for(let _=0;_<v;++_)f[_]!=null&&(b=m.get(f[_]),b._pos=_,b.onsuccess=I,b.onerror=E,++k);k===0&&h(x)}),get:({trans:d,key:f})=>new Promise((h,g)=>{h=ae(h);const m=d.objectStore(c).get(f);m.onsuccess=v=>h(v.target.result),m.onerror=et(g)}),query:function(d){return f=>new Promise((h,g)=>{h=ae(h);const{trans:m,values:v,limit:x,query:b}=f,k=x===1/0?void 0:x,{index:O,range:I}=b,E=m.objectStore(c),_=O.isPrimaryKey?E:E.index(O.name),N=r(I);if(x===0)return h({result:[]});if(d){const S=v?_.getAll(N,k):_.getAllKeys(N,k);S.onsuccess=D=>h({result:D.target.result}),S.onerror=et(g)}else{let S=0;const D=v||!("openKeyCursor"in _)?_.openCursor(N):_.openKeyCursor(N),j=[];D.onsuccess=$=>{const L=D.result;return L?(j.push(v?L.value:L.primaryKey),++S===x?h({result:j}):void L.continue()):h({result:j})},D.onerror=et(g)}})}(s),openCursor:function({trans:d,values:f,query:h,reverse:g,unique:m}){return new Promise((v,x)=>{v=ae(v);const{index:b,range:k}=h,O=d.objectStore(c),I=b.isPrimaryKey?O:O.index(b.name),E=g?m?"prevunique":"prev":m?"nextunique":"next",_=f||!("openKeyCursor"in I)?I.openCursor(r(k),E):I.openKeyCursor(r(k),E);_.onerror=et(x),_.onsuccess=ae(N=>{const S=_.result;if(!S)return void v(null);S.___id=++km,S.done=!1;const D=S.continue.bind(S);let j=S.continuePrimaryKey;j&&(j=j.bind(S));const $=S.advance.bind(S),L=()=>{throw new Error("Cursor not stopped")};S.trans=d,S.stop=S.continue=S.continuePrimaryKey=S.advance=()=>{throw new Error("Cursor not started")},S.fail=ae(x),S.next=function(){let B=1;return this.start(()=>B--?this.continue():this.stop()).then(()=>this)},S.start=B=>{const X=new Promise((y,P)=>{y=ae(y),_.onerror=et(P),S.fail=P,S.stop=A=>{S.stop=S.continue=S.continuePrimaryKey=S.advance=L,y(A)}}),C=()=>{if(_.result)try{B()}catch(y){S.fail(y)}else S.done=!0,S.start=()=>{throw new Error("Cursor behind last entry")},S.stop()};return _.onsuccess=ae(y=>{_.onsuccess=C,C()}),S.continue=D,S.continuePrimaryKey=j,S.advance=$,C(),X},v(S)},x)})},count({query:d,trans:f}){const{index:h,range:g}=d;return new Promise((m,v)=>{const x=f.objectStore(c),b=h.isPrimaryKey?x:x.index(h.name),k=r(g),O=k?b.count(k):b.count();O.onsuccess=ae(I=>m(I.target.result)),O.onerror=et(v)})}}}(l)),i={};return a.forEach(l=>i[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!i[l])throw new Error(`Table '${l}' not found`);return i[l]},MIN_KEY:-1/0,MAX_KEY:zn(e),schema:o}}function os({_novip:t},e){const n=e.db,r=function(o,s,{IDBKeyRange:a,indexedDB:i},l){return{dbcore:function(c,d){return d.reduce((f,{create:h})=>({...f,...h(f)}),c)}(Sm(s,a,l),o.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(o=>{const s=o.name;t.core.schema.tables.some(a=>a.name===s)&&(o.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=o.core))})}function zr({_novip:t},e,n,r){n.forEach(o=>{const s=r[o];e.forEach(a=>{const i=qs(a,o);(!i||"value"in i&&i.value===void 0)&&(a===t.Transaction.prototype||a instanceof t.Transaction?dt(a,o,{get(){return this.table(o)},set(l){bl(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):a[o]=new t.Table(o,s))})})}function ss({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Om(t,e){return t._cfg.version-e._cfg.version}function Im(t,e,n,r){const o=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,o);s.create(n),s._completion.catch(r);const a=s._reject.bind(s),i=V.transless||V;Et(()=>{V.trans=s,V.transless=i,e===0?(me(o).forEach(l=>{Io(n,l,o[l].primKey,o[l].indexes)}),os(t,n),W.follow(()=>t.on.populate.fire(s)).catch(a)):function({_novip:l},u,c,d){const f=[],h=l._versions;let g=l._dbSchema=is(l,l.idbdb,d),m=!1;const v=h.filter(b=>b._cfg.version>=u);function x(){return f.length?W.resolve(f.shift()(c.idbtrans)).then(x):W.resolve()}return v.forEach(b=>{f.push(()=>{const k=g,O=b._cfg.dbschema;ls(l,k,d),ls(l,O,d),g=l._dbSchema=O;const I=ql(k,O);I.add.forEach(_=>{Io(d,_[0],_[1].primKey,_[1].indexes)}),I.change.forEach(_=>{if(_.recreate)throw new G.Upgrade("Not yet support for changing primary key");{const N=d.objectStore(_.name);_.add.forEach(S=>as(N,S)),_.change.forEach(S=>{N.deleteIndex(S.name),as(N,S)}),_.del.forEach(S=>N.deleteIndex(S))}});const E=b._cfg.contentUpgrade;if(E&&b._cfg.version>u){os(l,d),c._memoizedTables={},m=!0;let _=El(O);I.del.forEach(j=>{_[j]=k[j]}),ss(l,[l.Transaction.prototype]),zr(l,[l.Transaction.prototype],me(_),_),c.schema=_;const N=Gs(E);let S;N&&vn();const D=W.follow(()=>{if(S=E(c),S&&N){var j=pt.bind(null,null);S.then(j,j)}});return S&&typeof S.then=="function"?W.resolve(S):D.then(()=>S)}}),f.push(k=>{(!m||!ym)&&function(O,I){[].slice.call(I.db.objectStoreNames).forEach(E=>O[E]==null&&I.db.deleteObjectStore(E))}(b._cfg.dbschema,k),ss(l,[l.Transaction.prototype]),zr(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),c.schema=l._dbSchema})}),x().then(()=>{var b,k;k=d,me(b=g).forEach(O=>{k.db.objectStoreNames.contains(O)||Io(k,O,b[O].primKey,b[O].indexes)})})}(t,e,s,n).catch(a)})}function ql(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const o=t[r],s=e[r];if(o){const a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||o.primKey.auto!==s.primKey.auto&&!uo)a.recreate=!0,n.change.push(a);else{const i=o.idxByName,l=s.idxByName;let u;for(u in i)l[u]||a.del.push(u);for(u in l){const c=i[u],d=l[u];c?c.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,s])}return n}function Io(t,e,n,r){const o=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>as(o,s)),o}function as(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function is(t,e,n){const r={};return Lr(e.objectStoreNames,0).forEach(o=>{const s=n.objectStore(o);let a=s.keyPath;const i=ns(Vl(a),a||"",!1,!1,!!s.autoIncrement,a&&typeof a!="string",!0),l=[];for(let c=0;c<s.indexNames.length;++c){const d=s.index(s.indexNames[c]);a=d.keyPath;var u=ns(d.name,a,!!d.unique,!!d.multiEntry,!1,a&&typeof a!="string",!1);l.push(u)}r[o]=Hl(o,i,l)}),r}function ls({_novip:t},e,n){const r=n.db.objectStoreNames;for(let o=0;o<r.length;++o){const s=r[o],a=n.objectStore(s);t._hasGetAll="getAll"in a;for(let i=0;i<a.indexNames.length;++i){const l=a.indexNames[i],u=a.index(l).keyPath,c=typeof u=="string"?u:"["+Lr(u).join("+")+"]";if(e[s]){const d=e[s].idxByName[c];d&&(d.name=l,delete e[s].idxByName[c],e[s].idxByName[l]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&oe.WorkerGlobalScope&&oe instanceof oe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class Pm{_parseStoresSpec(e,n){me(e).forEach(r=>{if(e[r]!==null){var o=e[r].split(",").map((a,i)=>{const l=(a=a.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return ns(l,u||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),xe(u),i===0)}),s=o.shift();if(s.multi)throw new G.Schema("Primary key cannot be multi-valued");o.forEach(a=>{if(a.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string")}),n[r]=Hl(r,s,o)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Ie(this._cfg.storesSource,e):e;const r=n._versions,o={};let s={};return r.forEach(a=>{Ie(o,a._cfg.storesSource),s=a._cfg.dbschema={},a._parseStoresSpec(o,s)}),n._dbSchema=s,ss(n,[n._allTables,n,n.Transaction.prototype]),zr(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],me(s),s),n._storeNames=me(s),this}upgrade(e){return this._cfg.contentUpgrade=Xs(this._cfg.contentUpgrade||re,e),this}}function ta(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Kt(fo,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function na(t){return t&&typeof t.databases=="function"}function cs(t){return Et(function(){return V.letThrough=!0,t()})}function Nm(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function Dm(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?ve(e.dbOpenError):t);st&&(e.openCanceller._stackHolder=Gt()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function o(){if(e.openCanceller!==r)throw new G.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,a=null,i=!1;return W.race([r,(typeof navigator>"u"?W.resolve():Nm()).then(()=>new W((l,u)=>{if(o(),!n)throw new G.MissingAPI;const c=t.name,d=e.autoSchema?n.open(c):n.open(c,Math.round(10*t.verno));if(!d)throw new G.MissingAPI;d.onerror=et(u),d.onblocked=ae(t._fireOnBlocked),d.onupgradeneeded=ae(f=>{if(a=d.transaction,e.autoSchema&&!t._options.allowEmptyDB){d.onerror=Kn,a.abort(),d.result.close();const g=n.deleteDatabase(c);g.onsuccess=g.onerror=ae(()=>{u(new G.NoSuchDatabase(`Database ${c} doesnt exist`))})}else{a.onerror=et(u);var h=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;i=h<1,t._novip.idbdb=d.result,Im(t,h/10,a,u)}},u),d.onsuccess=ae(()=>{a=null;const f=t._novip.idbdb=d.result,h=Lr(f.objectStoreNames);if(h.length>0)try{const m=f.transaction((g=h).length===1?g[0]:g,"readonly");e.autoSchema?function({_novip:v},x,b){v.verno=x.version/10;const k=v._dbSchema=is(0,x,b);v._storeNames=Lr(x.objectStoreNames,0),zr(v,[v._allTables],me(k),k)}(t,f,m):(ls(t,t._dbSchema,m),function(v,x){const b=ql(is(0,v.idbdb,x),v._dbSchema);return!(b.add.length||b.change.some(k=>k.add.length||k.change.length))}(t,m)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),os(t,m)}catch{}var g;Nn.push(t),f.onversionchange=ae(m=>{e.vcFired=!0,t.on("versionchange").fire(m)}),f.onclose=ae(m=>{t.on("close").fire(m)}),i&&function({indexedDB:m,IDBKeyRange:v},x){!na(m)&&x!==fo&&ta(m,v).put({name:x}).catch(re)}(t._deps,c),l()},u)}))]).then(()=>(o(),e.onReadyBeingFired=[],W.resolve(cs(()=>t.on.ready.fire(t.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(Xs,re);return e.onReadyBeingFired=[],W.resolve(cs(()=>u(t.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(l=>{e.dbOpenError=l;try{a&&a.abort()}catch{}return r===e.openCanceller&&t._close(),ve(l)}).finally(()=>{e.openComplete=!0,s()})}function us(t){var e=s=>t.next(s),n=o(e),r=o(s=>t.throw(s));function o(s){return a=>{var i=s(a),l=i.value;return i.done?l:l&&typeof l.then=="function"?l.then(n,r):xe(l)?Promise.all(l).then(n,r):n(l)}}return o(e)()}function jm(t,e,n){var r=arguments.length;if(r<2)throw new G.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[t,kl(o),n]}function Gl(t,e,n,r,o){return W.resolve().then(()=>{const s=V.transless||V,a=t._createTransaction(e,n,t._dbSchema,r),i={trans:a,transless:s};if(r)a.idbtrans=r.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===Js.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Gl(t,e,n,null,o))):ve(d)}const l=Gs(o);let u;l&&vn();const c=W.follow(()=>{if(u=o.call(a,a),u)if(l){var d=pt.bind(null,null);u.then(d,d)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=us(u))},i);return(u&&typeof u.then=="function"?W.resolve(u).then(d=>a.active?d:ve(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):c.then(()=>u)).then(d=>(r&&a._resolve(),a._completion.then(()=>d))).catch(d=>(a._reject(d),ve(d)))})}function mr(t,e,n){const r=xe(t)?t.slice():[t];for(let o=0;o<n;++o)r.push(e);return r}const Am={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,o={},s=[];function a(c,d,f){const h=jn(c),g=o[h]=o[h]||[],m=c==null?0:typeof c=="string"?1:c.length,v=d>0,x={...f,isVirtual:v,keyTail:d,keyLength:m,extractKey:rs(c),unique:!v&&f.unique};return g.push(x),x.isPrimaryKey||s.push(x),m>1&&a(m===2?c[0]:c.slice(0,m-1),d+1,f),g.sort((b,k)=>b.keyTail-k.keyTail),x}const i=a(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[i];for(const c of r.indexes)a(c.keyPath,0,c);function l(c){const d=c.query.index;return d.isVirtual?{...c,query:{index:d,range:(f=c.query.range,h=d.keyTail,{type:f.type===1?2:f.type,lower:mr(f.lower,f.lowerOpen?t.MAX_KEY:t.MIN_KEY,h),lowerOpen:!0,upper:mr(f.upper,f.upperOpen?t.MIN_KEY:t.MAX_KEY,h),upperOpen:!0})}}:c;var f,h}return{...n,schema:{...r,primaryKey:i,indexes:s,getIndexByKeyPath:function(c){const d=o[jn(c)];return d&&d[0]}},count:c=>n.count(l(c)),query:c=>n.query(l(c)),openCursor(c){const{keyTail:d,isVirtual:f,keyLength:h}=c.query.index;return f?n.openCursor(l(c)).then(g=>g&&function(m){return Object.create(m,{continue:{value:function(x){x!=null?m.continue(mr(x,c.reverse?t.MAX_KEY:t.MIN_KEY,d)):c.unique?m.continue(m.key.slice(0,h).concat(c.reverse?t.MIN_KEY:t.MAX_KEY,d)):m.continue()}},continuePrimaryKey:{value(x,b){m.continuePrimaryKey(mr(x,t.MAX_KEY,d),b)}},primaryKey:{get:()=>m.primaryKey},key:{get(){const x=m.key;return h===1?x[0]:x.slice(0,h)}},value:{get:()=>m.value}})}(g)):n.openCursor(c)}}}}}};function ra(t,e,n,r){return n=n||{},r=r||"",me(t).forEach(o=>{if(Me(e,o)){var s=t[o],a=e[o];if(typeof s=="object"&&typeof a=="object"&&s&&a){const i=Uo(s);i!==Uo(a)?n[r+o]=e[o]:i==="Object"?ra(s,a,n,r+o+"."):s!==a&&(n[r+o]=e[o])}else s!==a&&(n[r+o]=e[o])}else n[r+o]=void 0}),me(e).forEach(o=>{Me(t,o)||(n[r+o]=e[o])}),n}const Tm={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(s){const a=V.trans,{deleting:i,creating:l,updating:u}=a.table(e).hook;switch(s.type){case"add":if(l.fire===re)break;return a._promise("readwrite",()=>c(s),!0);case"put":if(l.fire===re&&u.fire===re)break;return a._promise("readwrite",()=>c(s),!0);case"delete":if(i.fire===re)break;return a._promise("readwrite",()=>c(s),!0);case"deleteRange":if(i.fire===re)break;return a._promise("readwrite",()=>function(f){return d(f.trans,f.range,1e4)}(s),!0)}return n.mutate(s);function c(f){const h=V.trans,g=f.keys||function(m,v){return v.type==="delete"?v.keys:v.keys||v.values.map(m.extractKey)}(r,f);if(!g)throw new Error("Keys missing");return(f=f.type==="add"||f.type==="put"?{...f,keys:g}:{...f}).type!=="delete"&&(f.values=[...f.values]),f.keys&&(f.keys=[...f.keys]),function(m,v,x){return v.type==="add"?Promise.resolve([]):m.getMany({trans:v.trans,keys:x,cache:"immutable"})}(n,f,g).then(m=>{const v=g.map((x,b)=>{const k=m[b],O={onerror:null,onsuccess:null};if(f.type==="delete")i.fire.call(O,x,k,h);else if(f.type==="add"||k===void 0){const I=l.fire.call(O,x,f.values[b],h);x==null&&I!=null&&(x=I,f.keys[b]=x,r.outbound||He(f.values[b],r.keyPath,x))}else{const I=ra(k,f.values[b]),E=u.fire.call(O,I,x,k,h);if(E){const _=f.values[b];Object.keys(E).forEach(N=>{Me(_,N)?_[N]=E[N]:He(_,N,E[N])})}}return O});return n.mutate(f).then(({failures:x,results:b,numFailures:k,lastResult:O})=>{for(let I=0;I<g.length;++I){const E=b?b[I]:g[I],_=v[I];E==null?_.onerror&&_.onerror(x[I]):_.onsuccess&&_.onsuccess(f.type==="put"&&m[I]?f.values[I]:E)}return{failures:x,results:b,numFailures:k,lastResult:O}}).catch(x=>(v.forEach(b=>b.onerror&&b.onerror(x)),Promise.reject(x)))})}function d(f,h,g){return n.query({trans:f,values:!1,query:{index:r,range:h},limit:g}).then(({result:m})=>c({type:"delete",keys:m,trans:f}).then(v=>v.numFailures>0?Promise.reject(v.failures[0]):m.length<g?{failures:[],numFailures:0,lastResult:void 0}:d(f,{...h,lower:m[m.length-1],lowerOpen:!0},g)))}}}}})};function Yl(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let o=0,s=0;o<e.keys.length&&s<t.length;++o)Se(e.keys[o],t[s])===0&&(r.push(n?nr(e.values[o]):e.values[o]),++s);return r.length===t.length?r:null}catch{return null}}const Fm={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const o=Yl(r.keys,r.trans._cache,r.cache==="clone");return o?W.resolve(o):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?nr(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function oa(t){return!("from"in t)}const lt=function(t,e){if(!this){const n=new lt;return t&&"d"in t&&Ie(n,t),n}Ie(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Vn(t,e,n){const r=Se(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(oa(t))return Ie(t,{from:e,to:n,d:1});const o=t.l,s=t.r;if(Se(n,t.from)<0)return o?Vn(o,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Qa(t);if(Se(e,t.to)>0)return s?Vn(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Qa(t);Se(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),Se(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const a=!t.r;o&&!t.l&&Vr(t,o),s&&a&&Vr(t,s)}function Vr(t,e){oa(e)||function n(r,{from:o,to:s,l:a,r:i}){Vn(r,o,s),a&&n(r,a),i&&n(r,i)}(t,e)}function Mm(t,e){const n=ds(e);let r=n.next();if(r.done)return!1;let o=r.value;const s=ds(t);let a=s.next(o.from),i=a.value;for(;!r.done&&!a.done;){if(Se(i.from,o.to)<=0&&Se(i.to,o.from)>=0)return!0;Se(o.from,i.from)<0?o=(r=n.next(i.from)).value:i=(a=s.next(o.from)).value}return!1}function ds(t){let e=oa(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Se(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Se(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Qa(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){const s=o==="r"?"l":"r",a={...t},i=t[o];t.from=i.from,t.to=i.to,t[o]=i[o],a[o]=i[s],t[s]=a,a.d=Za(a)}t.d=Za(t)}function Za({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}fn(lt.prototype,{add(t){return Vr(this,t),this},addKey(t){return Vn(this,t,t),this},addKeys(t){return t.forEach(e=>Vn(this,e,e)),this},[zo](){return ds(this)}});const Rm={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new lt(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const o=t.table(r),{schema:s}=o,{primaryKey:a}=s,{extractKey:i,outbound:l}=a,u={...o,mutate:f=>{const h=f.trans,g=h.mutatedParts||(h.mutatedParts={}),m=E=>{const _=`idb://${e}/${r}/${E}`;return g[_]||(g[_]=new lt)},v=m(""),x=m(":dels"),{type:b}=f;let[k,O]=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[];const I=f.trans._cache;return o.mutate(f).then(E=>{if(xe(k)){b!=="delete"&&(k=E.results),v.addKeys(k);const _=Yl(k,I);_||b==="add"||x.addKeys(k),(_||O)&&function(N,S,D,j){function $(L){const B=N(L.name||"");function X(y){return y!=null?L.extractKey(y):null}const C=y=>L.multiEntry&&xe(y)?y.forEach(P=>B.addKey(P)):B.addKey(y);(D||j).forEach((y,P)=>{const A=D&&X(D[P]),M=j&&X(j[P]);Se(A,M)!==0&&(A!=null&&C(A),M!=null&&C(M))})}S.indexes.forEach($)}(m,s,_,O)}else if(k){const _={from:k.lower,to:k.upper};x.add(_),v.add(_)}else v.add(n),x.add(n),s.indexes.forEach(_=>m(_.name).add(n));return E})}},c=({query:{index:f,range:h}})=>{var g,m;return[f,new lt((g=h.lower)!==null&&g!==void 0?g:t.MIN_KEY,(m=h.upper)!==null&&m!==void 0?m:t.MAX_KEY)]},d={get:f=>[a,new lt(f.key)],getMany:f=>[a,new lt().addKeys(f.keys)],count:c,query:c,openCursor:c};return me(d).forEach(f=>{u[f]=function(h){const{subscr:g}=V;if(g){const m=O=>{const I=`idb://${e}/${r}/${O}`;return g[I]||(g[I]=new lt)},v=m(""),x=m(":dels"),[b,k]=d[f](h);if(m(b.name||"").add(k),!b.isPrimaryKey){if(f!=="count"){const O=f==="query"&&l&&h.values&&o.query({...h,values:!1});return o[f].apply(this,arguments).then(I=>{if(f==="query"){if(l&&h.values)return O.then(({result:_})=>(v.addKeys(_),I));const E=h.values?I.result.map(i):I.result;h.values?v.addKeys(E):x.addKeys(E)}else if(f==="openCursor"){const E=I,_=h.values;return E&&Object.create(E,{key:{get:()=>(x.addKey(E.primaryKey),E.key)},primaryKey:{get(){const N=E.primaryKey;return x.addKey(N),N}},value:{get:()=>(_&&v.addKey(E.primaryKey),E.value)}})}return I})}x.add(n)}}return o[f].apply(this,arguments)}}),u}}}};class Kt{constructor(e,n){this._middlewares={},this.verno=0;const r=Kt.dependencies;this._options=n={addons:Kt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:o}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;s.dbReadyPromise=new W(i=>{s.dbReadyResolve=i}),s.openCanceller=new W((i,l)=>{s.cancelOpen=l}),this._state=s,this.name=e,this.on=Dn(this,"populate","blocked","versionchange","close",{ready:[Xs,re]}),this.on.ready.subscribe=xl(this.on.ready.subscribe,i=>(l,u)=>{Kt.vip(()=>{const c=this._state;if(c.openComplete)c.dbOpenError||W.resolve().then(l),u&&i(l);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(l),u&&i(l);else{i(l);const d=this;u||i(function f(){d.on.ready.unsubscribe(l),d.on.ready.unsubscribe(f)})}})}),this.Collection=(a=this,xn(bm.prototype,function(i,l){this.db=a;let u=Kl,c=null;if(l)try{u=l()}catch(g){c=g}const d=i._ctx,f=d.table,h=f.hook.reading.fire;this._ctx={table:f,index:d.index,isPrimKey:!d.index||f.schema.primKey.keyPath&&d.index===f.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:d.or,valueMapper:h!==Wn?h:null}})),this.Table=function(i){return xn(wm.prototype,function(l,u,c){this.db=i,this._tx=c,this.name=l,this.schema=u,this.hook=i._allTables[l]?i._allTables[l].hook:Dn(null,{creating:[im,re],reading:[am,Wn],updating:[cm,re],deleting:[lm,re]})})}(this),this.Transaction=function(i){return xn(Em.prototype,function(l,u,c,d,f){this.db=i,this.mode=l,this.storeNames=u,this.schema=c,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=Dn(this,"complete","error","abort"),this.parent=f||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new W((h,g)=>{this._resolve=h,this._reject=g}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},h=>{var g=this.active;return this.active=!1,this.on.error.fire(h),this.parent?this.parent._reject(h):g&&this.idbtrans&&this.idbtrans.abort(),ve(h)})})}(this),this.Version=function(i){return xn(Pm.prototype,function(l){this.db=i,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(i){return xn(zl.prototype,function(l,u,c){this.db=i,this._ctx={table:l,index:u===":id"?null:u,or:c};const d=i._deps.indexedDB;if(!d)throw new G.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(f,h)=>d.cmp(h,f),this._max=(f,h)=>d.cmp(f,h)>0?f:h,this._min=(f,h)=>d.cmp(f,h)<0?f:h,this._IDBKeyRange=i._deps.IDBKeyRange})}(this),this.on("versionchange",i=>{i.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",i=>{!i.newVersion||i.newVersion<i.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${i.oldVersion/10}`)}),this._maxKey=zn(n.IDBKeyRange),this._createTransaction=(i,l,u,c)=>new this.Transaction(i,l,u,this._options.chromeTransactionDurability,c),this._fireOnBlocked=i=>{this.on("blocked").fire(i),Nn.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(i))},this.use(Am),this.use(Tm),this.use(Rm),this.use(Fm),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(i=>i(this))}version(e){if(isNaN(e)||e<.1)throw new G.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(o=>o._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Om),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||V.letThrough||this._vip)?e():new W((n,r)=>{if(this._state.openComplete)return r(new G.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new G.DatabaseClosed);this.open().catch(re)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:o}){o&&this.unuse({stack:e,name:o});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:o}),s.sort((a,i)=>a.level-i.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(o=>r?o.create!==r:!!n&&o.name!==n)),this}open(){return Dm(this)}_close(){const e=this._state,n=Nn.indexOf(this);if(n>=0&&Nn.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new W(r=>{e.dbReadyResolve=r}),e.openCanceller=new W((r,o)=>{e.cancelOpen=o})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new G.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new W((r,o)=>{const s=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=ae(()=>{(function({indexedDB:i,IDBKeyRange:l},u){!na(i)&&u!==fo&&ta(i,l).delete(u).catch(re)})(this._deps,this.name),r()}),a.onerror=et(o),a.onblocked=this._fireOnBlocked};if(e)throw new G.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return me(this._allTables).map(e=>this._allTables[e])}transaction(){const e=jm.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let o=V.trans;o&&o.db===this&&e.indexOf("!")===-1||(o=null);const s=e.indexOf("?")!==-1;let a,i;e=e.replace("!","").replace("?","");try{if(i=n.map(u=>{var c=u instanceof this.Table?u.name:u;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===_o)a=_o;else{if(e!="rw"&&e!=Eo)throw new G.InvalidArgument("Invalid transaction mode: "+e);a=Eo}if(o){if(o.mode===_o&&a===Eo){if(!s)throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&i.forEach(u=>{if(o&&o.storeNames.indexOf(u)===-1){if(!s)throw new G.SubTransaction("Table "+u+" not included in parent transaction.");o=null}}),s&&o&&!o.active&&(o=null)}}catch(u){return o?o._promise(null,(c,d)=>{d(u)}):ve(u)}const l=Gl.bind(null,this,a,i,o,r);return o?o._promise(a,l,"lock"):V.trans?yn(V.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!Me(this._allTables,e))throw new G.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Lm=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Bm{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[Lm](){return this}}function Jl(t,e){return me(e).forEach(n=>{Vr(t[n]||(t[n]=new lt),e[n])}),t}function Wm(t){let e,n=!1;const r=new Bm(o=>{const s=Gs(t);let a=!1,i={},l={};const u={get closed(){return a},unsubscribe:()=>{a=!0,St.storagemutated.unsubscribe(h)}};o.start&&o.start(u);let c=!1,d=!1;function f(){return me(l).some(m=>i[m]&&Mm(i[m],l[m]))}const h=m=>{Jl(i,m),f()&&g()},g=()=>{if(c||a)return;i={};const m={},v=function(x){s&&vn();const b=()=>Et(t,{subscr:x,trans:null}),k=V.trans?yn(V.transless,b):b();return s&&k.then(pt,pt),k}(m);d||(St(Un,h),d=!0),c=!0,Promise.resolve(v).then(x=>{n=!0,e=x,c=!1,a||(f()?g():(i={},l=m,o.next&&o.next(x)))},x=>{c=!1,n=!1,o.error&&o.error(x),u.unsubscribe()})};return g(),u});return r.hasValue=()=>n,r.getValue=()=>e,r}let fs;try{fs={indexedDB:oe.indexedDB||oe.mozIndexedDB||oe.webkitIndexedDB||oe.msIndexedDB,IDBKeyRange:oe.IDBKeyRange||oe.webkitIDBKeyRange}}catch{fs={indexedDB:null,IDBKeyRange:null}}const Nt=Kt;function Sr(t){let e=ut;try{ut=!0,St.storagemutated.fire(t)}finally{ut=e}}fn(Nt,{...br,delete:t=>new Nt(t,{addons:[]}).delete(),exists:t=>new Nt(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return na(e)?Promise.resolve(e.databases()).then(r=>r.map(o=>o.name).filter(o=>o!==fo)):ta(e,n).toCollection().primaryKeys()}(Nt.dependencies).then(t)}catch{return ve(new G.MissingAPI)}},defineClass:()=>function(t){Ie(this,t)},ignoreTransaction:t=>V.trans?yn(V.transless,t):t(),vip:cs,async:function(t){return function(){try{var e=us(t.apply(this,arguments));return e&&typeof e.then=="function"?e:W.resolve(e)}catch(n){return ve(n)}}},spawn:function(t,e,n){try{var r=us(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:W.resolve(r)}catch(o){return ve(o)}},currentTransaction:{get:()=>V.trans||null},waitFor:function(t,e){const n=W.resolve(typeof t=="function"?Nt.ignoreTransaction(t):t).timeout(e||6e4);return V.trans?V.trans.waitFor(n):n},Promise:W,debug:{get:()=>st,set:t=>{Ol(t,t==="dexie"?()=>!0:$l)}},derive:rn,extend:Ie,props:fn,override:xl,Events:Dn,on:St,liveQuery:Wm,extendObservabilitySet:Jl,getByKeyPath:ft,setByKeyPath:He,delByKeyPath:function(t,e){typeof e=="string"?He(t,e,void 0):"length"in e&&[].map.call(e,function(n){He(t,n,void 0)})},shallowClone:El,deepClone:nr,getObjectDiff:ra,cmp:Se,asap:Cl,minKey:ts,addons:[],connections:Nn,errnames:Js,dependencies:fs,semVer:Ha,version:Ha.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Nt.maxKey=zn(Nt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(St(Un,t=>{if(!ut){let e;uo?(e=document.createEvent("CustomEvent"),e.initCustomEvent(xt,!0,!0,t)):e=new CustomEvent(xt,{detail:t}),ut=!0,dispatchEvent(e),ut=!1}}),addEventListener(xt,({detail:t})=>{ut||Sr(t)}));let ut=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(xt);typeof t.unref=="function"&&t.unref(),St(Un,e=>{ut||t.postMessage(e)}),t.onmessage=e=>{e.data&&Sr(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){St(Un,e=>{try{ut||(typeof localStorage<"u"&&localStorage.setItem(xt,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:xt,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===xt){const n=JSON.parse(e.newValue);n&&Sr(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===xt&&Sr(e.changedParts)})}W.rejectionMapper=function(t,e){if(!t||t instanceof on||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Ka[t.name])return t;var n=new Ka[t.name](e||t.message,t);return"stack"in t&&dt(n,"stack",{get:function(){return this.inner.stack}}),n},Ol(st,$l);var $m=(t=>(t.SAVE="save",t.SAVE_AS="saveAs",t))($m||{}),Or=(t=>(t.MOVE_TO_ROOT_FOLDER="moveToRootFolder",t.DELETE="delete",t))(Or||{});const Km="comfyui_workspace_db";class Um extends Kt{constructor(){super(Km);ce(this,"workflows");ce(this,"changelogs");ce(this,"media");ce(this,"folders");ce(this,"tags");ce(this,"userSettings");ce(this,"models");ce(this,"cache");ce(this,"workflowVersions");this.version(1).stores({workflows:"&id, name, parentFolderID",changelogs:"&id, workflowID",media:"&id, workflowID",folders:"&id, name, parentFolderID",tags:"&name",userSettings:"&id",models:"&id, fileName, fileHash",cache:"&id"}).upgrade(n=>{}),this.version(2).stores({workflows:"&id, name, parentFolderID,cloudID",changelogs:"&id, workflowID",media:"&id, workflowID",folders:"&id, name, parentFolderID",tags:"&name",userSettings:"&id",models:"&id, fileName, fileHash",cache:"&id",workflowVersions:"&id, name, workflowID,cloudID"}).upgrade(n=>{})}}const Y=new Um;class Yt{constructor(e){ce(this,"tableName");this.tableName=e}async saveDiskDB(){const e=await Y[this.tableName].toArray(),n={};e.forEach(r=>{r.id?n[r.id]=r:r.name?n[r.name]=r:console.error("TableBaseModel should have id or name")})}async add(e){return e.id||(e.id=Vt()),e.createTime||(e.createTime=Date.now()),await Y[this.tableName].add(e),await this.saveDiskDB(),e}async put(e){return await Y[this.tableName].put(e),await this.saveDiskDB(),e}async bulkPut(e){await Y[this.tableName].bulkPut(e),this.saveDiskDB()}async update(e,n){return await Y[this.tableName].update(e,n),this.saveDiskDB(),await this.get(e)??null}async listAll(){return await Y[this.tableName].toArray()}async filter(e){return await Y[this.tableName].filter(e).toArray()}async batchQuery(e){return await Y[this.tableName].bulkGet(e)}async getRecords(){console.warn("[DEPRECATED] getRecords() call, should only be used for one-time backfill for indexdb",this.tableName);const e=await zp(this.tableName);let n;try{n=e!=null?JSON.parse(e):null}catch{}if(n==null){const r=await Yp()??"{}";n=JSON.parse(r)[this.tableName]}return n??{}}async get(e){return await Y[this.tableName].get(e)}async delete(e){await Y[this.tableName].delete(e),this.saveDiskDB()}async listByIndex(e,n){return await Y[this.tableName].where(e).equals(n).toArray()}}const zm=80,qr=class qr extends Yt{constructor(){super("changelogs")}static async load(){return new qr}async listByWorkflowID(e){return await Y.changelogs.where("workflowID").equals(e).reverse().sortBy("createTime")}async getLastestByWorkflowID(e){return(await this.listByWorkflowID(e))[0]}async create(e){const n=await this.getLastestByWorkflowID(e.workflowID);if(n!=null&&n.json===e.json)return null;const r={id:Vt(),json:e.json,workflowID:e.workflowID,createTime:Date.now(),isAutoSave:e.isAutoSave};return await this.deleteLogsExceedLimit(e.workflowID),await Y.changelogs.add(r),r}async deleteLogsExceedLimit(e){var o;const n=await Y.changelogs.where("workflowID").equals(e).reverse().sortBy("createTime"),r=((o=T==null?void 0:T.settings)==null?void 0:o.maximumChangelogNumber)??zm;if(n.length>r){const s=n.slice(r);await Y.changelogs.bulkDelete(s.map(a=>a.id))}}};ce(qr,"TABLE_NAME","changelogs");let hs=qr;const sy="CWM_WORKFLOWS_SORT_TYPE";var wt=(t=>(t.RECENTLY_OPENED="recentlyOpened",t.RECENTLY_MODIFIED="newest",t.OLDEST_MODIFIED="oldest",t.AZ="name A-Z",t.ZA="name Z-A",t))(wt||{});const ay=[{title:"Import Workflows",type:"file"},{title:"Import Folder",type:"folder"}],Vm="comfyspace_tracking",bt="workspace_info",Hm=1999,ei="upgrade_to_2way_sync",Ir=28,iy="SHORTCUT_TRIGGER_EVENT";function Pr(...t){const e=t.filter(n=>n!=="").join("/");return ho(e)}function ho(t){let n=t.split("/").filter(r=>r!=="").join("/").replace(/\\/g,"/");return n=n.replace(/^\/+/,""),n}function Po(t){return Pr(t.parentFolderID??"",t.name+".json")}var Ft;(t=>{async function e({parentFolderID:i,name:l}){return ho(`${i??""}/${l}`)}t.genFolderRelPath=e;async function n(i){}t.createFolder=n;async function r(i,l){const c=await(await fetch("/workspace/folder/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder:i,newParentPath:l})})).json();c.error&&alert("Failed to move folder: "+c.error)}t.moveFolder=r;async function o(i){try{return await(await fetch("/workspace/folder/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:i})})).text()}catch(l){console.error("Error deleting file:",l)}}t.deleteFolder=o;async function s(i){try{const u=await(await fetch("/workspace/file/count_files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:i})})).json();return u.error&&console.error("Error counting files:",u.error),u.count}catch(l){console.error("Error renaming file:",l)}return null}t.genFilesCountInFolder=s;async function a(i,l){try{const c=await(await fetch("/workspace/folder/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({absPath:i,newName:l})})).json();c.error&&alert("Failed to rename folder: "+c.error)}catch(u){console.error("Error renaming file:",u)}}t.renameFolder=a})(Ft||(Ft={}));async function En(t){const e=await sa(t);if(e==null)return;const n=await Xl(t);await(H==null?void 0:H.updateMetaInfo(t.id,{filePath:n??void 0}));const r=t.json,o=JSON.parse(r);o.extra[bt]={id:t.id,name:t.name},delete o.extra[Vm],await Vp(e,JSON.stringify(o))}async function No(t){if(t.name==null)return;const e=await sa(t);e!=null&&wl(e)}async function sa(t){let e=qm(t.name)+".json",n=t.parentFolderID;for(;n!=null;){const r=await(Ae==null?void 0:Ae.get(n));if(r==null)break;e=`${r.name}/${e}`,n=r.parentFolderID??void 0}return e??null}async function Xl(t){const e=await sa(t);let n=await(T==null?void 0:T.getSetting("myWorkflowsDir"));return n?(n.endsWith("/")||(n=n+"/"),n+e):(console.error("myWorkflowsDir is not set"),null)}async function ly(t){if(await(T==null?void 0:T.getSetting("twoWaySync")))return await Ft.genFilesCountInFolder(t)??0;const n=await(H==null?void 0:H.listAll())??[],r=await(Ae==null?void 0:Ae.listAll())??[],o=[t];let s=0;for(;o.length>0;){const a=o.shift();if(a){for(const l of n)l.parentFolderID===a&&s++;const i=r.filter(l=>l.parentFolderID===a).map(l=>l.id);i.length&&o.push(...i)}}return s}function qm(t){return t=t.replace(/[\\/:*?"<>|]/g,"_"),t.trim()}function Ql(t,e=!0,n=!1,r="-"){const o=new Date(t),s=String(o.getDate()).padStart(2,"0"),a=String(o.getMonth()+1).padStart(2,"0"),i=o.getFullYear(),l=String(o.getHours()).padStart(2,"0"),u=String(o.getMinutes()).padStart(2,"0"),c=String(o.getSeconds()).padStart(2,"0"),d=`${a}${r}${s}${r}${i}`;return e?d+` ${l}:${u}`:n?d+`:${c}`:d}async function Gm(t=!1){if(await(T==null?void 0:T.getSetting("twoWaySync")))return;const n=await(H==null?void 0:H.listAll())??[];for(const r of n){const o=await Xl(r);r.filePath!=o&&(r.filePath!=null&&await wl(r.filePath,t),await En(r))}}const ti=(t,e=wt.RECENTLY_MODIFIED)=>{const n=[...t];switch(e){case wt.AZ:n.sort((r,o)=>r.name.localeCompare(o.name));break;case wt.ZA:n.sort((r,o)=>o.name.localeCompare(r.name));break;case wt.RECENTLY_MODIFIED:n.sort((r,o)=>o.updateTime-r.updateTime);break;case wt.OLDEST_MODIFIED:n.sort((r,o)=>r.updateTime-o.updateTime);break;case wt.RECENTLY_OPENED:n.sort((r,o)=>(o.lastOpenedTime??0)-(r.lastOpenedTime??0));break}return n};function Ym(t){const e=t.nodes,n=new Array,r=new Map,o=new Array;for(let s=0;s<t.nodes.length;++s){const a=t.nodes[s];if(a.inputs)for(const i of a.inputs)i.link&&(o.push(i.link),i.link=null);if(a.outputs)for(const i of a.outputs)i.links&&(o.concat(i.links),i.links=[]);r.set(a.id,s)}for(const s of t.links)o.includes(s[0])&&n.push([r.get(s[1]),s[2],r.get(s[3]),s[4],s[1]]);return JSON.stringify({nodes:e,links:n})}function cy(t,e){let n=JSON.parse(t);if(!n||!n.nodes||n.nodes.length==0)return;const r=localStorage.getItem("litegrapheditor_clipboard");localStorage.setItem("litegrapheditor_clipboard",Ym(n));const o=we.canvas.graph_mouse;e&&(e[0]-=15,e[1]-=15,we.canvas.graph_mouse=e),we.canvas.pasteFromClipboard(),we.canvas.graph_mouse=o,r&&localStorage.setItem("litegrapheditor_clipboard",r)}const uy=t=>{var n;const e=(n=T==null?void 0:T.settings)==null?void 0:n.shortcuts;if(!e)return!1;for(const r in e){const s=e[r].split("+"),a={Control:t.ctrlKey,Shift:t.shiftKey,Alt:t.altKey,Command:t.metaKey,[t.key.toUpperCase()]:!0};for(const i in a)a[i]||delete a[i];if(s.length===Object.keys(a).length&&s.every(i=>a[i]))return r}};function dy(t){const e=["png","jpg","jpeg","gif","bmp","webp"],n=t.split(".").pop();return n!=null&&e.includes(n)}function Jm(t){return`/workspace/view_media?filename=${t}`}function Xm(){const e=window.location.hash.slice(1).split("/").find(n=>n.includes("workflowId@"));return e?e.split("@")[1]:null}function ps(t){const e=window.location.hash.slice(1).split("/"),n=e.findIndex(o=>o.includes("workflowId@")),r=`workflowId@${t}`;return n>=0?e[n]=r:e.push(r),`${e.join("/")}`}const Qm=t=>{const e=ps(t);window.open(`${window.location.origin}/#${e}`)},Nr={last_node_id:9,last_link_id:9,nodes:[{id:7,type:"CLIPTextEncode",pos:[413,389],size:{0:425.27801513671875,1:180.6060791015625},flags:{},order:3,mode:0,inputs:[{name:"clip",type:"CLIP",link:5}],outputs:[{name:"CONDITIONING",type:"CONDITIONING",links:[6],slot_index:0}],properties:{},widgets_values:["text, watermark"]},{id:6,type:"CLIPTextEncode",pos:[415,186],size:{0:422.84503173828125,1:164.31304931640625},flags:{},order:2,mode:0,inputs:[{name:"clip",type:"CLIP",link:3}],outputs:[{name:"CONDITIONING",type:"CONDITIONING",links:[4],slot_index:0}],properties:{},widgets_values:["beautiful scenery nature glass bottle landscape, , purple galaxy bottle,"]},{id:5,type:"EmptyLatentImage",pos:[473,609],size:{0:315,1:106},flags:{},order:1,mode:0,outputs:[{name:"LATENT",type:"LATENT",links:[2],slot_index:0}],properties:{},widgets_values:[512,512,1]},{id:3,type:"KSampler",pos:[863,186],size:{0:315,1:262},flags:{},order:4,mode:0,inputs:[{name:"model",type:"MODEL",link:1},{name:"positive",type:"CONDITIONING",link:4},{name:"negative",type:"CONDITIONING",link:6},{name:"latent_image",type:"LATENT",link:2}],outputs:[{name:"LATENT",type:"LATENT",links:[7],slot_index:0}],properties:{},widgets_values:[0x8e7ff42ed37e,!0,20,8,"euler","normal",1]},{id:8,type:"VAEDecode",pos:[1209,188],size:{0:210,1:46},flags:{},order:5,mode:0,inputs:[{name:"samples",type:"LATENT",link:7},{name:"vae",type:"VAE",link:8}],outputs:[{name:"IMAGE",type:"IMAGE",links:[9],slot_index:0}],properties:{}},{id:9,type:"SaveImage",pos:[1451,189],size:{0:210,1:26},flags:{},order:6,mode:0,inputs:[{name:"images",type:"IMAGE",link:9}],properties:{}},{id:4,type:"CheckpointLoaderSimple",pos:[26,474],size:{0:315,1:98},flags:{},order:0,mode:0,outputs:[{name:"MODEL",type:"MODEL",links:[1],slot_index:0},{name:"CLIP",type:"CLIP",links:[3,5],slot_index:1},{name:"VAE",type:"VAE",links:[8],slot_index:2}],properties:{},widgets_values:["v1-5-pruned-emaonly.ckpt"]}],links:[[1,4,0,3,0,"MODEL"],[2,5,0,3,3,"LATENT"],[3,4,1,6,0,"CLIP"],[4,6,0,3,1,"CONDITIONING"],[5,4,1,7,0,"CLIP"],[6,7,0,3,2,"CONDITIONING"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[9,8,0,9,0,"IMAGE"]],groups:[],config:{},extra:{},version:.4};var Be;(t=>{async function e(l,u){try{const d=await(await fetch("/workspace/file/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:Po(l),newParentPath:u})})).json();return d.error?(alert("Error moving file: "+d.error),!1):!0}catch(c){console.error("Error deleting file:",c)}}t.moveWorkflow=e;async function n(l,u){try{const d=await(await fetch("/workspace/file/gen_unique_name",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:Pr(u??"",l)})})).json();return d.error?(console.error("Error getting unique name:",d.error),null):d.uniqueName}catch(c){console.error("Error deleting file:",c)}return null}t.genFileUniqueName=n;async function r({parentFolderID:l,name:u},c){try{const f=await(await fetch("/workspace/file/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:Pr(l??"",u+".json"),newName:c})})).json();return f.error?(alert("Error rename file: "+f.error),!1):!0}catch(d){console.error("Error deleting file:",d)}}t.renameWorkflow=r;async function o(l){const u=l.json,c=JSON.parse(u);c.extra[bt]==null&&(c.extra[bt]={}),c.extra[bt].id=l.id;const f=await(await fetch("/workspace/file/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:Po(l),json:JSON.stringify(c)})})).json();if(f.error)throw console.error("Error saving file:",f.error),alert(`"Error saving file: ${f.error}
      
      👉Please try "Save as" from "Files" dropdown menu
      `),new Error(f.error);return f}t.saveWorkflow=o;async function s(l){try{return await(await fetch("/workspace/delete_file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:Po(l),deleteEmptyFolder:!1})})).text()}catch(u){alert("Error deleting workflow .json file: "+u),console.error("Error deleting file:",u)}}t.deleteWorkflow=s;async function a({parentFolderID:l,name:u,json:c,id:d}){var g;let f=JSON.parse(c??"");f.extra==null&&(f.extra={}),f.extra[bt]==null&&(f.extra[bt]={}),f.extra[bt].id=d;const h={parentFolderPath:ho(l??""),name:u,json:JSON.stringify(f)};try{const v=await(await fetch("/workspace/create_workflow_file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).json();return v.name&&await((g=Y.workflows)==null?void 0:g.update(d,{name:v.name})),v}catch(m){return console.error(`Error creating file <${d}> at "${l}"`,m),alert(`Error creating file <${d}> at "${l}"`),{}}}t.createWorkflow=a;async function i({parentFolderID:l,name:u,id:c}){const d=Pr(l??"",u+".json");try{const h=await(await fetch("/workspace/get_workflow_file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:d,id:c})})).json();return h.error&&(console.error(`Error getting file <${c}> at "${d}"`,h.error),alert({message:`Error getting file <${c}> at "${d}"`,level:"error"})),h}catch(f){return console.error(`Erro finding file <${c}> at "${d}"`,f),{}}}t.getFile=i})(Be||(Be={}));async function Zm(t,e=!1,n=!1){try{return await(await fetch("/workspace/file/scan_my_workflows_folder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:ho(t),recursive:e,metaInfoOnly:n})})).json()}catch(r){return console.error("Error scan local new files:",r),[]}}const Gr=class Gr extends Yt{constructor(){super("workflows");ce(this,"_curWorkflow",null)}get curWorkflow(){return this._curWorkflow}static async load(){return new Gr}updateCurWorkflowID(n){if(n==null){this._curWorkflow=null;return}this.get(n).then(r=>{this._curWorkflow=r??null})}updateCurWorkflow(n){this._curWorkflow=n}async latestVersionCheck(){if(this._curWorkflow){const n=await Y.workflows.get(this._curWorkflow.id);return n?(n==null?void 0:n.updateTime)===this._curWorkflow.updateTime:!0}return!0}async listByIndex(n,r){const o=await super.listByIndex(n,r);return await(T==null?void 0:T.getSetting("twoWaySync"))?(await Promise.all(o.map(async i=>await this.get(i.id)))).filter(i=>i!=null):o}async generateUniqueName(n,r){if(await(T==null?void 0:T.getSetting("twoWaySync"))){const l=await Be.genFileUniqueName((n??"Untitled Flow")+".json",r??"");return(l==null?void 0:l.replace(/\.json$/,""))??"Untitled Flow"}let s=n??"Untitled Flow";const i=(await this.listAll()??[]).filter(l=>l.parentFolderID==r).map(l=>l.name);if(i.includes(s)){let l=2,u=!0;for(;u;)i.includes(`${s} ${l}`)?l++:(s=`${s} ${l}`,u=!1)}return s}async createFlow(n){const{name:r}=n,o=await this.generateUniqueName(r,n.parentFolderID??void 0),s=Date.now(),a={...n,id:n.id??Vt(),json:n.json??JSON.stringify(Nr),name:o,updateTime:n.updateTime??s,createTime:n.createTime??s};return await Y.workflows.add(a),this.saveDiskDB(),await(T==null?void 0:T.getSetting("twoWaySync"))?(await Be.createWorkflow(a),await this.get(a.id)):(En(a),a)}async update(n,r){throw new Error("Method not allowed.")}async updateTopFields(n,r){return this._update(n,r)}async updateMetaInfo(n,r){return this._update(n,r)}async _update(n,r){await Y.workflows.update(n,r);const o=await Y.workflows.get(n)??null;return this._curWorkflow&&this._curWorkflow.id===n&&(this._curWorkflow=o),this.saveDiskDB(),o}async updateFolder(n,r){var i;const o=await(T==null?void 0:T.getSetting("twoWaySync")),s=await this.get(n),a=await this.updateMetaInfo(n,r);!a||!s||(o?await Be.moveWorkflow(s,r.parentFolderID):(await En(a),await No(s),(a==null?void 0:a.parentFolderID)!=null&&await((i=Y.folders)==null?void 0:i.update(a.parentFolderID,{updateTime:Date.now()}))))}async genLastManualSavedJson(n){const r=await(Te==null?void 0:Te.getLastestByWorkflowID(n));return r==null?void 0:r.json}async updateName(n,r){const o=await this.get(n);return await(T==null?void 0:T.getSetting("twoWaySync"))&&o&&await Be.renameWorkflow(o,r.name+".json"),await this.updateMetaInfo(n,r)}async updateFlow(n,r){const o=await this.get(n,!1);if(o==null)return;const s=JSON.stringify(o.json),a=JSON.stringify(r.json);if(s===a)return;const i=await this._update(n,{updateTime:Date.now(),json:r.json});await(T==null?void 0:T.getSetting("twoWaySync"))?i&&await Be.saveWorkflow(i):i&&await En(i)}async batchCreateFlows(n=[],r=!1,o){var a,i;const s=[];for(const l of n){const u=l.name&&r?l.name:await this.generateUniqueName(l.name,o),c=Vt(),d=Date.now(),f={id:c,name:u,json:l.json,parentFolderID:o,updateTime:d,createTime:d,tags:[]};if(s.push(f),await(T==null?void 0:T.getSetting("twoWaySync")))try{const g=JSON.parse(l.json),m=(i=(a=g==null?void 0:g.extra)==null?void 0:a[bt])==null?void 0:i.id;m&&(await this.get(m)||(f.id=m)),Be.createWorkflow(f)}catch(g){console.error("batchCreateFlows error",g)}else await En(f)}try{await Y.workflows.bulkAdd(s),this.saveDiskDB()}catch(l){console.error("batchCreateFlows error",l)}}async deleteFlow(n){const r=await this.get(n);r&&(await(T==null?void 0:T.getSetting("twoWaySync"))?await Be.deleteWorkflow(r):No({...r})),await Y.workflows.delete(n),this.saveDiskDB()}async batchDeleteFlow(n){const r=await Y.workflows.bulkGet(n);for(const o of r){if(!o)return;await(T==null?void 0:T.getSetting("twoWaySync"))?await Be.deleteWorkflow(o):No({...o})}await Y.workflows.bulkDelete(n),this.saveDiskDB()}async listFolderContent(n,r){await(T==null?void 0:T.getSetting("twoWaySync"));const o=await this.listAll().then(i=>i.filter(l=>l.parentFolderID==n))??[],s=await(Ae==null?void 0:Ae.listAll().then(i=>i.filter(l=>l.parentFolderID==n)))??[],a=[...o,...s];return ti(a,r??wt.RECENTLY_MODIFIED)}async get(n,r=!0){const o=await(T==null?void 0:T.getSetting("twoWaySync")),s=await Y.workflows.get(n);if(!o||!r)return s;if(s==null)return;const a=await Be.getFile({parentFolderID:s.parentFolderID??null,name:s.name,id:s.id});if(a.json)return{...s,json:JSON.stringify(a.json)}}async listAll(n){await(T==null?void 0:T.getSetting("twoWaySync"));let r;return r=await Y.workflows.toArray(),n?ti(r,n):r}async updateLastOpenedTime(n){await Y.workflows.update(n,{lastOpenedTime:Date.now()})}};ce(Gr,"TABLE_NAME","workflows");let ms=Gr;const Yr=class Yr extends Yt{constructor(){super("folders")}static async load(){return new Yr}async create(e){const n=await this.generateUniqueName(e.name,e.parentFolderID),r=await(T==null?void 0:T.getSetting("twoWaySync")),o=await Ft.genFolderRelPath({name:n,parentFolderID:e.parentFolderID??""}),s={id:r?o:Vt(),name:n,parentFolderID:e.parentFolderID??null,updateTime:Date.now(),createTime:Date.now(),type:"folder"};return r||(await Y.folders.add(s),this.saveDiskDB()),s}async update(e,n){if(await(T==null?void 0:T.getSetting("twoWaySync")))return"parentFolderID"in n&&await Ft.moveFolder(e,n.parentFolderID??""),"name"in n&&await Ft.renameFolder(e,n.name??""),null;const o=await this.get(e);if(o==null)return null;const s="name"in n&&n.name!=o.name,a="parentFolderID"in n&&n.parentFolderID!=o.parentFolderID,i={...o,...n};return n.name!=null&&(i.updateTime=Date.now()),a&&(n.name=await this.generateUniqueName(i.name,i.parentFolderID??void 0)),await Y.folders.update(e,n),this.saveDiskDB(),(s||a)&&Gm(!0),i}async deleteFolder(e,n=Or.DELETE){if(await(T==null?void 0:T.getSetting("twoWaySync"))){await Zm(e,!0,!0).then(i=>{i.forEach(l=>{l.type==="workflow"&&(H==null||H.deleteFlow(l.id))})}),await Ft.deleteFolder(e);return}const o=await(H==null?void 0:H.listAll())??[],s=await this.listAll(),a=[e];for(;a.length>0;){const i=a.shift();if(i){for(const u of o)if(u.parentFolderID===i)switch(n){case Or.DELETE:await(H==null?void 0:H.deleteFlow(u.id));break;case Or.MOVE_TO_ROOT_FOLDER:await(H==null?void 0:H.updateFolder(u.id,{parentFolderID:void 0}));break}await Y.folders.delete(i);const l=s.filter(u=>u.parentFolderID===i).map(u=>u.id);l.length&&a.push(...l)}}this.saveDiskDB()}async generateUniqueName(e,n){if(await(T==null?void 0:T.getSetting("twoWaySync")))return await Be.genFileUniqueName(e??"New folder",n??"")??"New folder";let o=e??"New folder";const s=await this.listAll().then(a=>a.filter(i=>i.parentFolderID==n).map(i=>i.name));if(s.includes(o)){let a=2,i=!0;for(;i;)s.includes(`${o} ${a}`)?a++:(o=`${o} ${a}`,i=!1)}return o}};ce(Yr,"TABLE_NAME","folders");let vs=Yr;function ev(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=o=>{const s=new Uint8Array(o.target.result),a=new DataView(s.buffer);a.getUint32(0)!==2303741511&&(console.error("Not a valid PNG file"),n());let i=8;const l={};for(;i<s.length;){const u=a.getUint32(i),c=String.fromCharCode(...s.slice(i+4,i+8));if(c==="tEXt"||c=="comf"){let d=i+8;for(;s[d]!==0;)d++;const f=String.fromCharCode(...s.slice(i+8,d)),h=s.slice(d+1,i+8+u),g=Array.from(h).map(m=>String.fromCharCode(m)).join("");l[f]=g}i+=12+u}e(l)},r.readAsArrayBuffer(t)})}function tv(t){const e=new Uint16Array(t.slice(0,2))[0]===18761;function n(a,i,l){const u=t.slice(a,a+l);if(l===2)return new DataView(u.buffer,u.byteOffset,u.byteLength).getUint16(0,i);if(l===4)return new DataView(u.buffer,u.byteOffset,u.byteLength).getUint32(0,i)}const r=n(4,e,4);function o(a){const i=n(a,e,2),l={};for(let u=0;u<i;u++){const c=a+2+u*12,d=n(c,e,2),f=n(c+2,e,2),h=n(c+4,e,4),g=n(c+8,e,4);let m;f===2&&(m=String.fromCharCode(...t.slice(g,g+h-1))),l[d]=m}return l}return o(r)}function nv(t){return new Promise(e=>{const n=new FileReader;n.onload=r=>{var l;const o=new Uint8Array((l=r==null?void 0:r.target)==null?void 0:l.result),s=new DataView(o.buffer);if(s.getUint32(0)!==1380533830||s.getUint32(8)!==1464156752){console.error("Not a valid WEBP file"),e();return}let a=12;const i={};for(;a<o.length;){const u=s.getUint32(a+4,!0);if(String.fromCharCode(...o.slice(a,a+4))==="EXIF"){String.fromCharCode(...o.slice(a+8,a+8+6))=="Exif\0\0"&&(a+=6);const d=tv(o.slice(a+8,a+8+u));for(const f in d){const h=d[f],g=h.indexOf(":");i[h.slice(0,g)]=h.slice(g+1)}}a+=8+u}e(i)},n.readAsArrayBuffer(t)})}function rv(t){return!!(t!=null&&t.endsWith(".webm")||t!=null&&t.endsWith(".mp4"))}function ov(t){return new Promise(e=>{const n=new FileReader;n.onload=r=>{const o=new Uint8Array(r.target.result),s=new DataView(o.buffer),a=new TextDecoder;if(s.getUint32(0)==440786851){let i=12;for(;i<o.length-16;){if(s.getUint16(i)==17543&&String.fromCharCode(...o.slice(i-7,i))==="COMMENT"){const u=s.getUint32(i+2),c=Math.clz32(u)+1;if(c<4){const d=u>>8*(4-c)&~(1<<7*c),f=a.decode(o.slice(i+2+c,i+2+c+d)),h=JSON.parse(f);e(h);return}}i+=1}}else if(s.getUint32(4)==1718909296&&s.getUint32(8)==1769172845){let i=o.length-4;for(;i>16;){if(s.getUint32(i)==1684108385&&s.getUint32(i-8)==2841865588){s.getUint32(i+4),s.getUint32(i+8);const l=s.getUint32(i-4)-4*4,u=a.decode(o.slice(i+12,i+12+l)),c=JSON.parse(u);e(c);return}i-=1}}else{console.error("Unknown magic: "+s.getUint32(0)),e();return}},n.readAsArrayBuffer(t)})}function sv(t){const e=t.split(".").pop();return fetch(t).then(n=>{if(!n.ok)throw new Error("Network response was not ok");return n.blob()}).then(async n=>{const r=t.split("/").pop()??"",o=new File([n],r);if(rv(t))return ov(o);if(e==="webp")return nv(o);const s=await ev(o),a=JSON.parse(s==null?void 0:s.prompt),i=JSON.parse(s==null?void 0:s.workflow);return{prompt:a,workflow:i}})}class Zl extends Yt{constructor(){super("media")}async listByWorkflowID(e){return await Y.media.where("workflowID").equals(e).reverse().sortBy("createTime")}async create(e){const n=e.localPath.split(".").pop();if(n==null)return null;const r=await sv(`/workspace/view_media?filename=${e.localPath}`).catch(s=>(console.error("get meta error:",s),{prompt:""})),o={id:e.localPath,localPath:e.localPath,workflowID:e.workflowID,createTime:Date.now(),workflowJSON:JSON.stringify(r==null?void 0:r.prompt),format:n};return await(H==null?void 0:H.updateMetaInfo(e.workflowID,{latestImage:o.localPath})),Y.media.put(o),this.saveDiskDB(),o}async delete(e){var n,r;super.delete(e),((n=H==null?void 0:H.curWorkflow)==null?void 0:n.coverMediaPath)===e&&(H==null||H.updateMetaInfo(H.curWorkflow.id,{coverMediaPath:void 0})),((r=H==null?void 0:H.curWorkflow)==null?void 0:r.latestImage)===e&&(H==null||H.updateMetaInfo(H.curWorkflow.id,{latestImage:void 0}))}}ce(Zl,"TABLE_NAME","media");const av={Checkpoint:"checkpoints",TextualInversion:"embeddings",Hypernetwork:"hypernetworks",LORA:"loras",Controlnet:"controlnet",Upscaler:"upscale_models",VAE:"vae"},Jr=class Jr extends Yt{constructor(){super("userSettings");ce(this,"defaultSettings");ce(this,"DEFAULT_USER","guest");ce(this,"_autoSave",!1);ce(this,"_settings");this.defaultSettings={id:this.DEFAULT_USER,topBarStyle:{top:0,left:0},myWorkflowsDir:"",shortcuts:{save:"Shift+S",saveAs:"Control+Alt+S"},defaultFolders:av,autoSave:!1,autoSaveDuration:3,twoWaySync:!1,foldersOnTop:!1,cloudHost:"https://www.nodecafe.org",overwriteCurWorkflowWhenDroppingFileToCanvas:!1,maximumChangelogNumber:80,hideCoverImage:!1,disableUnsavedWarning:!1}}get settings(){return this._settings}get autoSave(){return this._autoSave}async getSetting(n){const r=await this.get(this.DEFAULT_USER);return n==="shortcuts"&&(r!=null&&r.shortcuts)?{...this.defaultSettings.shortcuts,...r.shortcuts}:(r==null?void 0:r[n])??this.defaultSettings[n]}async upsert(n){const o={...await this.get(this.DEFAULT_USER)??this.defaultSettings,...n};await this.put(o),this._settings={...this.defaultSettings,...o}}static async load(){const n=new Jr;return await n.get(n.DEFAULT_USER).then(r=>{n._autoSave=(r==null?void 0:r.autoSave)??!1,n._settings={...n.defaultSettings,...r}}),await n.upsert({cloudHost:n.defaultSettings.cloudHost}),n}};ce(Jr,"TABLE_NAME","userSettings");let ys=Jr;const Xr=class Xr extends Yt{constructor(){super("tags")}static async load(){return new Xr}};ce(Xr,"TABLE_NAME","tags");let gs=Xr;const Qr=class Qr extends Yt{constructor(){super("workflowVersions")}static async load(){return new Qr}async listByWorkflowID(e){return await Y[this.tableName].where("workflowID").equals(e).reverse().sortBy("createTime")??[]}async getLatestByWorkflowID(e){const n=await this.listByWorkflowID(e);return n!=null&&n.length?n[0]:null}};ce(Qr,"TABLE_NAME","workflowVersions");let ws=Qr;function fy(t){return"type"in t&&t.type==="folder"}let H=null,Dr=null,T=null,Ae=null,Te=null,Ut=null,jr=null;async function iv(){const t=async()=>{H=await ms.load()},e=async()=>{Dr=await gs.load()},n=async()=>{T=await ys.load()},r=async()=>{Ae=await vs.load()},o=async()=>{Te=await hs.load()},s=async()=>{Ut=new Zl},a=async()=>{jr=await ws.load()};await Promise.all([t(),e(),n(),r(),o(),s(),a()]),localStorage.getItem("WORKSPACE_INDEXDB_BACKFILL")!=="true"&&(await lv(),localStorage.setItem("WORKSPACE_INDEXDB_BACKFILL","true"))}async function lv(){const t=async()=>{try{const i=await(H==null?void 0:H.getRecords());i&&await Y.workflows.bulkPut(Object.values(i))}catch(i){console.error(i)}},e=async()=>{try{const i=await(Ae==null?void 0:Ae.getRecords());i&&await Y.folders.bulkPut(Object.values(i))}catch(i){console.error(i)}},n=async()=>{try{const i=await(Ut==null?void 0:Ut.getRecords());i&&await Y.media.bulkPut(Object.values(i))}catch(i){console.error(i)}},r=async()=>{try{const i=await(Te==null?void 0:Te.getRecords());i&&await Y.changelogs.bulkPut(Object.values(i))}catch(i){console.error(i)}},o=async()=>{try{const i=await(Dr==null?void 0:Dr.getRecords());i&&await Y.tags.bulkPut(Object.values(i))}catch(i){console.error(i)}},s=async()=>{try{const i=T,l=await i.getRecords().then(u=>u[i.DEFAULT_USER]?u[i.DEFAULT_USER]:u);await Y.userSettings.put({...i.defaultSettings,...l})}catch(i){console.error(i)}},a=async()=>{try{const i=await(jr==null?void 0:jr.getRecords());i&&await Y.workflowVersions.bulkPut(Object.values(i))}catch(i){console.error(i)}};await Promise.all([t(),e(),n(),r(),o(),s(),a()])}const gn=p.createContext({curFlowID:null,curFlowName:null,projectId:null,loadWorkflowID:()=>{},saveCurWorkflow:async()=>{},isDirty:!1,loadNewWorkflow:()=>{},loadFilePath:()=>{},setRoute:()=>{},route:"root",curVersion:null,setIsDirty:()=>{},setCurVersion:()=>{},useUserModal:{}}),hy=p.createContext({refreshFolderStamp:0,setRefreshFolderStamp:()=>{}});var cv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},uv=Object.defineProperty,dv=Object.defineProperties,fv=Object.getOwnPropertyDescriptors,Hr=Object.getOwnPropertySymbols,ec=Object.prototype.hasOwnProperty,tc=Object.prototype.propertyIsEnumerable,ni=(t,e,n)=>e in t?uv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ri=(t,e)=>{for(var n in e||(e={}))ec.call(e,n)&&ni(t,n,e[n]);if(Hr)for(var n of Hr(e))tc.call(e,n)&&ni(t,n,e[n]);return t},hv=(t,e)=>dv(t,fv(e)),pv=(t,e)=>{var n={};for(var r in t)ec.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Hr)for(var r of Hr(t))e.indexOf(r)<0&&tc.call(t,r)&&(n[r]=t[r]);return n},Re=(t,e,n)=>{const r=p.forwardRef((o,s)=>{var a=o,{color:i="currentColor",size:l=24,stroke:u=2,children:c}=a,d=pv(a,["color","size","stroke","children"]);return p.createElement("svg",ri(hv(ri({ref:s},cv),{width:l,height:l,stroke:i,strokeWidth:u,className:`tabler-icon tabler-icon-${t}`}),d),[...n.map(([f,h])=>p.createElement(f,h)),...c||[]])});return r.propTypes={color:Pt.string,size:Pt.oneOfType([Pt.string,Pt.number]),stroke:Pt.oneOfType([Pt.string,Pt.number])},r.displayName=`${e}`,r},mv=Re("arrow-badge-up","IconArrowBadgeUp",[["path",{d:"M17 11v6l-5 -4l-5 4v-6l5 -4z",key:"svg-0"}]]),nc=Re("chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]),rc=Re("device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]),vv=Re("download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),yv=Re("external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]),gv=Re("fold-down","IconFoldDown",[["path",{d:"M12 11v8l3 -3m-6 0l3 3",key:"svg-0"}],["path",{d:"M9 7l1 0",key:"svg-1"}],["path",{d:"M14 7l1 0",key:"svg-2"}],["path",{d:"M19 7l1 0",key:"svg-3"}],["path",{d:"M4 7l1 0",key:"svg-4"}]]),wv=Re("history","IconHistory",[["path",{d:"M12 8l0 4l2 2",key:"svg-0"}],["path",{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5",key:"svg-1"}]]),bv=Re("menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]),xv=Re("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),Cv=Re("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]),_v=Re("triangle-inverted-filled","IconTriangleInvertedFilled",[["path",{d:"M20.118 3h-16.225a2.914 2.914 0 0 0 -2.503 4.371l8.116 13.549a2.917 2.917 0 0 0 4.987 .005l8.11 -13.539a2.914 2.914 0 0 0 -2.486 -4.386z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]),Ev=Re("upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),oc=Re("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);const kv="/api/dm";async function Ye(t,e="GET",n){const r=e==="POST"?{"Content-Type":"application/json"}:{};localStorage.getItem("token")&&(r.Authorization=`Bearer ${localStorage.getItem("token")}`);const s=await fetch(`${kv}${t}`,{method:e,headers:r,body:e==="POST"?JSON.stringify(n):null});if(!s.ok){s.status===401&&(console.log("401"),window.loginController(!0));const i=await s.json();console.error("fetch error:",i),Kp.error("网络异常，请稍后重试");return}const a=await s.json();return a.status==401,a.data??a}const mt="/creator";async function Sv(t){return Ye(mt+"/workflow","POST",t)}async function py(){return Ye(mt+"/workflow?pageSize=1000")}async function my(t){return Ye(`${mt}/package?filterId=${t}&pageSize=1000`)}async function Ov(t){return Ye(`${mt}/workflow/history?projectId=${t}&pageSize=1000`)}async function Iv(t){return Ye(`${mt}/workflow/${t}`)}async function vy(t){return Ye(mt+"/package","POST",t)}async function yy(t){return Ye(`${mt}/workflow/project/${t}`,"DELETE")}async function gy(){return fetch("/inner/enhance/node_git").then(t=>t.text())}async function Pv(){return Ye("/creator/getCreatorInfo")}async function Nv(t){return Ye("/creator/updateCreatorInfo","POST",t)}async function Dv(){return Ye(`${mt}/packageLiteList?pageSize=1000`)}async function jv(t){return Ye(`${mt}/deleteCreatorPackage`,"POST",t)}function Av({onClose:t}){pi();const{curFlowID:e,isDirty:n,loadWorkflowID:r,curVersion:o,projectId:s}=p.useContext(gn),[a,i]=p.useState(0),[l,u]=p.useState(null),[c,d]=p.useState([]),[f,h]=p.useState([]),g=async v=>{var I;const x=await(H==null?void 0:H.get(v)),b=await(Te==null?void 0:Te.listByWorkflowID(v));d(b??[]);const k=b==null?void 0:b.filter(E=>E.json===(x==null?void 0:x.json)),O=(I=k==null?void 0:k[0])==null?void 0:I.id;O&&u(O)},m=async()=>{const v=await Ov(s)??[];h(v)};return p.useEffect(()=>{switch(a){case 0:m();break;case 1:g(e);break}},[a]),p.useEffect(()=>(we.canvasEl.addEventListener("click",t),()=>{we.canvasEl.removeEventListener("click",t)}),[a]),w.jsxs(bi,{width:430,height:"100vh",gap:0,position:"fixed",top:0,left:0,zIndex:1e3,children:[w.jsx(wi,{pb:1,mb:0,children:w.jsxs(Mt,{justifyContent:"space-between",alignItems:"center",children:[w.jsx(As,{size:"md",children:"Version History"}),w.jsx(Yn,{size:"sm",icon:w.jsx(oc,{}),onClick:t,variant:"ghost","aria-label":"close version history"})]})}),w.jsx(gi,{overflowY:"auto",gap:0,children:w.jsx(an,{divider:w.jsx(js,{}),spacing:2,children:f==null?void 0:f.map(v=>w.jsxs(Mt,{w:"100%",mb:1,justify:"space-between",backgroundColor:v.id===(o==null?void 0:o.id)?"teal.300":void 0,borderRadius:4,children:[w.jsxs(an,{textAlign:"left",gap:0,children:[w.jsx(rt,{fontWeight:"500",children:v.name??"untitled"}),w.jsxs(rt,{color:"GrayText",fontSize:"sm",children:["Created: ",Ql(v.create_time??"")]})]}),w.jsx(Mt,{alignItems:"center",gap:2,children:w.jsx(je,{size:"sm",onClick:()=>{if(n){alert("You have unsaved changes, please save or discard your changes to proceed switching version, in case losing your changes.");return}r(v.id),t()},children:"Load"})})]},v.id))})})]})}function Tv({options:t,menuButton:e,isOpen:n,onClose:r}){const o=p.useRef(null);return Du({ref:o,handler:()=>r()}),w.jsxs(Ct,{position:"relative",children:[w.jsx(Ct,{children:e}),n&&w.jsx(Ct,{ref:o,mt:"8px",shadow:"md",p:"2",position:"absolute",zIndex:"dropdown",children:t})]})}function Fv({menuButton:t,menuContent:e,onClose:n}){const r=p.useRef(),[o,s]=p.useState(!1),a=()=>{r.current=setTimeout(()=>s(!1),400)},i=()=>{s(!0),clearTimeout(r.current),r.current=void 0};return w.jsx(Tv,{isOpen:o,onClose:a,menuButton:w.jsx(Ct,{"aria-label":"menu",onClick:i,onMouseEnter:i,onMouseLeave:a,children:t}),options:w.jsx(oo,{isOpen:!0,children:w.jsx(so,{minWidth:150,zIndex:1e3,onMouseEnter:i,onMouseLeave:a,children:e})})})}function Mv(t,e){const n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=`${e}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)}function Rv(t){const{promptMessage:e="Are you sure you want to delete this?",variant:n="ghost",onDelete:r,isDisabled:o=!1,tooltipText:s}=t;return w.jsx(Gi,{isLazy:!0,placement:"auto",gutter:0,children:({onClose:a})=>w.jsxs(w.Fragment,{children:[w.jsx(qi,{children:w.jsx(Ct,{children:w.jsx(Bt,{hasArrow:!0,label:s,placement:"bottom",children:w.jsx(Yn,{"aria-label":"Delete confirm",size:"sm",icon:w.jsx(Cv,{color:"#F56565",size:"20px"}),isDisabled:o,variant:n})})})}),w.jsxs(Qi,{children:[w.jsx(Ji,{onClick:a}),w.jsxs(Yi,{children:[w.jsx(rt,{mb:4,pr:4,fontWeight:600,children:e}),w.jsx(je,{colorScheme:"red",size:"sm",onClick:()=>{r(),a()},children:"Yes, delete"})]})]})]})})}function Lv({onClose:t}){const[e,n]=p.useState([]),r=async()=>{const a=await Dv()??{};n(a.list??[])},o=async a=>{const i=await jv({package_id:a});i&&i.status==200&&(Wc({title:"删除成功",status:"success",duration:2e3}),r())};p.useEffect(()=>(r(),we.canvasEl.addEventListener("click",t),()=>{we.canvasEl.removeEventListener("click",t)}),[]);const s={ACTIVATE:"已通过",INACTIVATE:"已通过",FIRST_AUDIT:"审核中",FIRST_AUDIT_FAIL:"未通过",SECOND_AUDIT:"审核中",SECOND_AUDIT_FAIL:"未通过"};return w.jsxs(bi,{width:430,height:"100vh",gap:0,position:"fixed",top:0,right:0,zIndex:1e3,children:[w.jsx(wi,{pb:1,mb:0,children:w.jsxs(Mt,{justifyContent:"space-between",alignItems:"center",children:[w.jsx(As,{size:"md",children:"已发布的应用列表"}),w.jsx(Yn,{size:"sm",icon:w.jsx(oc,{}),onClick:t,variant:"ghost","aria-label":"close version history"})]})}),w.jsx(gi,{overflowY:"auto",gap:0,children:w.jsx(an,{divider:w.jsx(js,{}),spacing:2,children:e==null?void 0:e.map(a=>w.jsxs(Mt,{w:"100%",mb:1,justify:"space-between",borderRadius:4,children:[w.jsxs(an,{textAlign:"left",gap:0,children:[w.jsx(rt,{fontWeight:"500",children:a.name??"untitled"}),w.jsxs(rt,{color:"GrayText",fontSize:"sm",children:["Created: ",Ql(a.create_time??"")]})]}),w.jsxs(Mt,{alignItems:"center",gap:2,children:[w.jsx(w.Fragment,{children:["ACTIVATE","INACTIVATE"].includes(a.status)?w.jsx(yr,{colorScheme:"green",children:"已通过"}):["FIRST_AUDIT_FAIL","SECOND_AUDIT_FAIL"].includes(a.status)?w.jsx(Bt,{label:a.audit_msg,children:w.jsx(yr,{colorScheme:"red",children:"未通过"})}):w.jsx(yr,{children:s[a.status]??a.status})}),w.jsx(Rv,{isDisabled:["ACTIVATE","INACTIVATE"].includes(a.status),promptMessage:"确定删除当前的应用吗?",onDelete:()=>{o(a.id)}})]})]},a.id))})})]})}function Bv(){const{curFlowID:t,curFlowName:e,saveCurWorkflow:n,setRoute:r,route:o}=p.useContext(gn),[s,a]=p.useState({save:"",saveAs:""});p.useEffect(()=>{T==null||T.getSetting("shortcuts").then(l=>{a(l)})},[t]);const i=p.useCallback(async()=>{const l=we.graph.serialize(),u=JSON.stringify(l,null,2);Mv(u,e??"")},[t]);return w.jsxs(w.Fragment,{children:[w.jsx(Fv,{menuButton:w.jsx($c,{children:w.jsxs(je,{px:1,height:Ir+"px","aria-label":"menu",size:"sm",backgroundColor:"#434554",children:["File",w.jsx(nc,{size:20})]})}),menuContent:w.jsx(oo,{isOpen:!0,children:w.jsxs(so,{minWidth:150,zIndex:1e3,children:[w.jsx(Lt,{onClick:()=>n(),icon:w.jsx(rc,{size:20}),iconSpacing:1,command:s.save,children:"保存"}),w.jsx(Lt,{onClick:i,icon:w.jsx(vv,{size:20}),iconSpacing:1,children:"下载"}),w.jsx(Lt,{onClick:()=>r("versionHistory"),icon:w.jsx(wv,{size:20}),iconSpacing:1,children:"历史版本"})]})})}),o=="versionHistory"&&w.jsx(Av,{onClose:()=>r("root")}),o=="packageList"&&w.jsx(Lv,{onClose:()=>r("root")})]})}function Wv({displayName:t,updateFlowName:e,isDirty:n}){const{isOpen:r,onOpen:o,onClose:s}=Ds(),[a,i]=p.useState(t),[l,u]=p.useState(""),c=()=>{i(t),o()},d=g=>{i(g.target.value),l&&u("")},f=async()=>{const g=a.trim();if(i(g),t===g)return h();e(g),h()},h=()=>{u(""),s()};return w.jsxs(jt,{children:[w.jsx(Bt,{label:"点击编辑工作流名称",placement:"bottom",children:w.jsxs(rt,{as:"div",color:"white",onClick:c,maxW:200,fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:[w.jsx("div",{style:{width:8,display:"inline-block"},children:w.jsx(rt,{as:"span",children:n&&"* "})}),t]})}),w.jsxs(Cs,{isOpen:r,onClose:h,children:[w.jsx(_s,{}),w.jsxs(Es,{children:[w.jsx(di,{children:"编辑工作流名称"}),w.jsx(ks,{}),w.jsx(Ss,{children:w.jsxs(Is,{isInvalid:!!l,children:[w.jsx(Ns,{children:"你的工作流名称，不会为用户展示"}),w.jsx(no,{value:a,onChange:d,autoFocus:!0,onKeyUp:g=>{g.code==="Enter"&&!l&&a&&f()}}),l&&w.jsx(Ps,{children:l})]})}),w.jsxs(fi,{children:[w.jsx(je,{onClick:h,mr:3,children:"取消"}),w.jsx(je,{colorScheme:"teal",onClick:f,isDisabled:!a||!!l,children:"保存"})]})]})]})]})}function $v({wx:t}){const[e,n]=p.useState(t),[r,o]=p.useState(""),{useUserModal:{isOpen:s,onClose:a}}=p.useContext(gn),i=c=>{n(c.target.value),r&&o("")},l=async()=>{const c=e.trim();if(n(c),t===c)return u();Nv({wx:c}).then(d=>{d&&u()})},u=()=>{o(""),a&&a()};return w.jsx(jt,{children:w.jsxs(Cs,{isOpen:!!s,onClose:u,children:[w.jsx(_s,{}),w.jsxs(Es,{children:[w.jsx(di,{children:"微信号"}),w.jsx(ks,{}),w.jsx(Ss,{children:w.jsxs(Is,{isInvalid:!!r,children:[w.jsx(Ns,{children:"你的微信账号，便于后期联系和发放奖励"}),w.jsx(no,{value:e,onChange:i,autoFocus:!0,onKeyUp:c=>{c.code==="Enter"&&!r&&e&&l()}}),r&&w.jsx(Ps,{children:r})]})}),w.jsxs(fi,{children:[w.jsx(je,{onClick:u,mr:3,children:"取消"}),w.jsx(je,{colorScheme:"teal",onClick:l,isDisabled:!e||!!r,children:"保存"})]})]})]})})}function Kv(){const[t,e]=p.useState({}),{setRoute:n,useUserModal:{onOpen:r}}=p.useContext(gn);p.useEffect(()=>{o()},[]);async function o(){try{const a=await Pv();e(a)}catch(a){console.log(a)}}const s=()=>{localStorage.removeItem("token"),window.location.reload()};return w.jsxs(w.Fragment,{children:[w.jsx($v,{wx:t==null?void 0:t.wx}),w.jsxs(oo,{isLazy:!0,children:[w.jsx(Hi,{as:je,rightIcon:w.jsx(nc,{}),variant:"ghost",size:"sm",children:(t==null?void 0:t.name)??"--"}),w.jsxs(so,{children:[w.jsx(Lt,{onClick:r,children:"编辑用户信息"}),w.jsx(Lt,{onClick:()=>n("packageList"),children:"已发布的应用"}),w.jsx(Lt,{onClick:s,children:"退出"})]})]})]})}const Uv=p.lazy(()=>Os(()=>import("./AppIsDirtyEventListener-H-A01Y-Q.js"),__vite__mapDeps([0,1]),import.meta.url));function zv({curFlowName:t,setCurFlowName:e}){const{isDirty:n,loadNewWorkflow:r,saveCurWorkflow:o,setRoute:s,curFlowID:a,route:i}=p.useContext(gn),{isOpen:l,onToggle:u}=Ds(),c=()=>{n&&o(),s("publish")};return w.jsxs("div",{style:{padding:2,position:"relative",top:0,width:"100%"},children:[w.jsxs(jt,{h:50,bg:"rgba(0,0,0,0.5)",display:l?"none":"flex",justifyContent:"space-between",alignItems:"center",gap:2,draggable:!1,id:"workspaceManagerPanel",className:"workspaceManagerPanel",children:[w.jsxs(jt,{gap:1,children:[w.jsx(vi,{src:"https://p0.meituan.net/guangnian/9655338c34a7ec4645a50a6e38562c843972.jpg",alt:"logo",width:"80px",ml:2,objectFit:"contain"}),w.jsx(rt,{as:"span",fontWeight:"bolder",children:"妙刷·创作者"})]}),w.jsx(je,{size:"sm","aria-label":"workspace folder",height:Ir+"px",onClick:()=>s("recentFlows"),px:2,children:w.jsxs(jt,{gap:1,children:[w.jsx(bv,{size:21}),w.jsx(rt,{as:"span",children:"我的工作流"}),w.jsx(_v,{size:8})]})}),w.jsx(Bt,{label:"New workflow",children:w.jsxs(je,{size:"sm",variant:"ghost","aria-label":"new workflow",height:Ir+"px",onClick:()=>r(),px:1,children:[w.jsx(xv,{size:16,color:"white"}),"新建工作流"]})}),w.jsx(Wv,{isDirty:n,displayName:t??"",updateFlowName:d=>{e(d),requestAnimationFrame(()=>{})}}),w.jsx(p.Suspense,{fallback:w.jsx("div",{style:{width:"60px"}}),children:w.jsx(Bt,{label:a?"":"请先保存当前工作流",children:w.jsxs(je,{size:"md",colorScheme:"teal","aria-label":"My models",onClick:c,px:1,height:Ir+"px",isDisabled:!a,children:[w.jsx(Ev,{size:16,color:"black"})," 提交作品"]})})}),a&&w.jsx(jt,{gap:"4px",children:w.jsx(Bv,{})}),n?w.jsx(Bt,{label:"Save workflow",children:w.jsx(Yn,{onClick:()=>o(),icon:w.jsx(rc,{size:23,color:"white"}),size:"xs",paddingY:4,"aria-label":"save workspace",variant:"ghost"})}):w.jsx("div",{style:{width:1}}),w.jsx(Uv,{}),w.jsx(Kv,{})]}),w.jsx(je,{onClick:u,variant:"link",size:"xs",position:"absolute",px:4,ml:"47%",bg:"rgba(0,0,0,0.3)",children:l?w.jsx(gv,{size:16,color:"white"}):w.jsx(mv,{size:16,color:"white"})})]})}const Vv=t=>typeof t=="function",Hv=t=>{const[e,n]=p.useState(t),r=p.useRef(e),o=p.useCallback(s=>{r.current=Vv(s)?s(r.current):s,n(r.current)},[]);return[e,o,r]},qv=(t,e)=>{const n=t.nodes==null?[]:t.nodes,r=e.nodes==null?[]:e.nodes;t.nodes=[],e.nodes=[];let o=JSON.stringify(t)===JSON.stringify(e);if(o){const s=(i,l)=>{const u=l.order,c=l.pos;return delete l.order,delete l.pos,i.set(l.id,JSON.stringify(l)),i.set(l.id+"_pos",c),l.order=u,l.pos=c,i},a=(i,l,u)=>Math.abs(i-l)>u;if(n.length==r.length){const i=n.reduce(s,new Map),l=r.reduce(s,new Map);for(let[u,c]of i){if(!l.has(u)){o=!1;break}if(typeof u=="string"&&u.includes("_pos")){const d=l.get(u);if(d==null||c==null||a(d[0],c[0],5)||a(d[1],c[1],5)){o=!1;break}}else if(l.get(u)!==c){o=!1;break}}}}return t.nodes=n,e.nodes=r,o};function Gv(){const[t,e]=p.useState(!1);p.useEffect(()=>(window.loginController=r=>{e(r)},()=>{window.loginController=null}),[]),p.useEffect(()=>{const r=o=>{(o.origin.startsWith("https://online.miaoshuaai.com")||o.origin.startsWith("https://magicbrush.guangnianai.test.sankuai.com"))&&o.data.msg.token&&(console.log("登录成功"),localStorage.setItem("token",o.data.msg.token),e(!1))};return window.addEventListener("message",r),()=>{window.removeEventListener("message",r)}},[]);const n=window.VITE_APP_ENV==="test"?"https://magicbrush.guangnianai.test.sankuai.com/login":"https://online.miaoshuaai.com/login";return w.jsxs(Cs,{isOpen:t,onClose:()=>e(!1),children:[w.jsx(_s,{}),w.jsxs(Es,{maxW:"1100px",borderRadius:"30px",mt:"12%",bg:"url(https://p0.meituan.net/guangnian/dd443e6de630ac4d1b1e21fee8cd64ee347714.png) no-repeat center center / cover",children:[w.jsx(ks,{}),w.jsx(Ss,{width:"50%",p:0,overflow:"hidden",bg:"linear-gradient(143deg, rgba(76, 80, 80, 0.7) 0%, rgba(50, 50, 50, 0.7) 97%);",borderRadius:"30px 0px 0px 30px",children:w.jsx("iframe",{src:n,title:"login",style:{height:"520px",width:"100%",backgroundColor:"black"}})})]})]})}const Yv=ie.lazy(()=>Os(()=>import("./RecentFilesDrawer-274ukssP.js"),__vite__mapDeps([2,1,3]),import.meta.url)),Jv=ie.lazy(()=>Os(()=>import("./index-QfnU6eYy.js"),__vite__mapDeps([4,1,3]),import.meta.url));function Xv(){const[t,e]=p.useState(null),[n,r]=p.useState("root"),[o,s]=p.useState(!0),[a,i]=p.useState(null),[l,u]=p.useState(null),c=p.useRef(null),[d,f]=p.useState(!1),h=p.useRef(null),{showDialog:g}=Kc(),[m,v]=p.useState(!1);p.useRef(!1);const x=pi(),[b,k]=Hv(null),O=Ds(),I=p.useCallback(async(C=!1)=>{var F,z;const y=JSON.stringify(we.graph.serialize()),P=await Promise.all([Sv({is_public:!0,json_data:y,name:t??"",project_id:l??""}),Te==null?void 0:Te.create({workflowID:c.current??"new",json:y,isAutoSave:!1})]),A=P[0].workflow_id;i(A),u(((F=P[0])==null?void 0:F.project_id)??"");const M=ps(A);window.location.hash=M,(z=T==null?void 0:T.settings)!=null&&z.autoSave&&x({title:"Saved",status:"success",duration:1e3,isClosable:!0}),f(!1)},[l,t]),E=C=>{const y=(C==null?void 0:C.id)??null;if(c.current=y,i(y),u((C==null?void 0:C.project_id)??""),e((C==null?void 0:C.name)??""),y==null){document.title="ComfyUI",window.location.hash="",localStorage.removeItem("curFlowID");return}if(y){const P=ps(y);window.location.hash=P,document.title=C.name+" - ComfyUI"}else localStorage.setItem("curFlowID",y),document.title="ComfyUI - "+C.name},_=async()=>{localStorage.removeItem("workspace"),localStorage.removeItem("comfyspace");try{await iv()}catch(P){console.error("error loading db",P)}s(!1);let C=null;C=Xm(),C==null&&(C=localStorage.getItem("curFlowID")),C&&S(C),!await(T==null?void 0:T.getSetting("twoWaySync"))&&Y.cache.get(ei).then(async P=>{if((P==null?void 0:P.value)!=="true"&&await Y.workflows.count()==0){await(T==null?void 0:T.upsert({twoWaySync:!0})),await Y.cache.put({id:ei,value:"true"});return}})},N=()=>{if(c.current==null)return!1;const C=H==null?void 0:H.curWorkflow;if(C==null)return!1;if(C.json==null)return!0;const y=we.graph.serialize()??{};let P={};try{P=C!=null&&C.json?JSON.parse(C==null?void 0:C.json):{}}catch(M){console.error("error parsing json",M)}return!qv(y,P)},S=async(C,y,P)=>{if(we.graph==null)return;let A=P;if(C!=="new"&&(A=await Iv(C)),A==null){alert("Error: Workflow not found! id: "+C),E(null);return}E(A),k(null),we.loadGraphData(JSON.parse(A.workflow_json)),r("root"),d&&f(!1)},D=async(C,y,P=!1)=>{var A;if(C===null){E(null),we.graph.clear();return}if(!d||P||(A=T==null?void 0:T.settings)!=null&&A.autoSave||(H==null?void 0:H.curWorkflow)==null){S(C);return}j(C)},j=async C=>{const y=[C?{label:"Open in new tab",icon:w.jsx(yv,{}),onClick:()=>{Qm(C)}}:null,{label:"Save",colorScheme:"teal",onClick:async()=>{await I(),C&&S(C)}}];y.push({label:"Discard",colorScheme:"red",onClick:async()=>{C&&S(C)}}),g(`Please save or discard your changes to "${t}" before leaving, or your changes will be lost.`,y)},$=async C=>{const P={workflow_json:(C==null?void 0:C.json)??JSON.stringify(Nr),name:(C==null?void 0:C.name)??"new workflow"};await S("new",null,P),r("root")},L=async(C,y=!1)=>{const P=C.split("/").pop()??C;y?I():$({name:P});const A=await fetch(Jm(C)),M=await A.blob(),F=new File([M],P,{type:A.headers.get("Content-Type")||""});await we.handleFile(F),r("root")},B=p.useCallback(C=>{if(c.current==null)return;let y=C.filename;C.subfolder!=null&&C.subfolder!==""&&(y=C.subfolder+"/"+y),Ut==null||Ut.create({workflowID:c.current,localPath:y})},[]),X=p.useCallback(()=>{r("root")},[]);return p.useEffect(()=>{_(),v(!0);const C=document.getElementById("comfy-file-input"),y=async()=>{if(C&&C.files&&C.files.length>0){const F={id:Vt(),name:C.files[0].name,json:JSON.stringify(Nr),updateTime:Date.now(),createTime:Date.now()};E(F)}};C==null||C.addEventListener("change",y);const P=F=>{const z=N();console.log("handleBeforeUnload isDirty",z),z&&(F.preventDefault(),F.returnValue="You have unsaved changes!",j())};window.addEventListener("beforeunload",P);const A=F=>{var z,U,K,R,J,ne;(K=(U=(z=F.detail)==null?void 0:z.output)==null?void 0:U.images)==null||K.forEach(se=>{se.type==="output"&&B(se)}),(ne=(J=(R=F.detail)==null?void 0:R.output)==null?void 0:J.gifs)==null||ne.forEach(se=>{se.type==="output"&&B(se)})};Uc.addEventListener("executed",A);const M=async F=>{var R,J;const z=(J=(R=F.dataTransfer)==null?void 0:R.files[0])==null?void 0:J.name,U=we.dragOverNode;if(U&&U.onDragDrop)return;if(!(await(T==null?void 0:T.getSetting("overwriteCurWorkflowWhenDroppingFileToCanvas"))??!1)&&z){const ne={id:Vt(),name:z,json:JSON.stringify(Nr),updateTime:Date.now(),createTime:Date.now()};E(ne)}};return we.canvasEl.addEventListener("drop",M),()=>{window.removeEventListener("change",y),window.removeEventListener("beforeunload",P),window.removeEventListener("executed",A),we.canvasEl.removeEventListener("drop",M)}},[]),o?null:w.jsx(gn.Provider,{value:{curFlowID:a,curFlowName:t,projectId:l,loadWorkflowID:D,saveCurWorkflow:I,isDirty:d,setIsDirty:f,loadNewWorkflow:$,loadFilePath:L,setRoute:r,route:n,curVersion:b,setCurVersion:k,useUserModal:O},children:w.jsx("div",{ref:h,className:"inner_enhance",children:w.jsx(ii,{containerRef:h,children:w.jsxs(Ct,{zIndex:Hm,draggable:!1,children:[w.jsx(Gv,{}),w.jsx(zv,{curFlowName:t,setCurFlowName:e}),m&&n==="recentFlows"&&w.jsx(p.Suspense,{children:w.jsx(Yv,{onClose:X,onClickNewFlow:()=>{$(),r("root")}})}),m&&n==="publish"&&w.jsx(p.Suspense,{children:w.jsx(Jv,{onClose:X})})]})})})})}const wy=Object.freeze(Object.defineProperty({__proto__:null,default:Xv},Symbol.toStringTag,{value:"Module"}));export{ol as $,Qm as A,Ct as B,Bt as C,Ev as D,Or as E,Is as F,Ut as G,jt as H,Yn as I,Mt as J,Rv as K,Ql as L,oo as M,T as N,wt as O,yy as P,bi as Q,hy as R,an as S,rt as T,Hm as U,py as V,gn as W,ti as X,cy as Y,pn as Z,pu as _,Hi as a,Np as a0,oy as a1,th as a2,zs as a3,op as a4,ny as a5,Uh as a6,q as a7,Oh as a8,yl as a9,Mn as aa,Oa as ab,mn as ac,cl as ad,ry as ae,ap as af,jh as ag,Ch as ah,yh as ai,Rh as aj,fl as ak,sh as al,kv as am,my as an,gy as ao,wi as ap,As as aq,gi as ar,Pv as as,vy as at,qv as au,iy as av,$m as aw,uy as ax,Te as ay,wy as az,bv as b,Re as c,so as d,Lt as e,oc as f,no as g,nc as h,Ns as i,Ps as j,Ae as k,ay as l,ev as m,Cv as n,xv as o,Nr as p,ly as q,fy as r,sy as s,Dr as t,mu as u,dy as v,H as w,vi as x,pi as y,yv as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./AppIsDirtyEventListener-H-A01Y-Q.js","./input.js","./RecentFilesDrawer-274ukssP.js","./index-pz0vT7Or.js","./index-QfnU6eYy.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}